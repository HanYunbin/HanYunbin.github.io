/*! For license information please see main.5b306c50.js.LICENSE.txt */
(()=>{var e={4:(e,t,n)=>{"use strict";var r=n(853),i=n(43),s=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(o(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),b=Symbol.for("react.consumer"),w=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope");var E=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var A=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function N(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var O=Symbol.for("react.client.reference");function R(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===O?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case y:return"Profiler";case v:return"StrictMode";case T:return"Suspense";case k:return"SuspenseList";case E:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case w:return(e.displayName||"Context")+".Provider";case b:return(e._context.displayName||"Context")+".Consumer";case x:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case S:return null!==(t=e.displayName||null)?t:R(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return R(e(t))}catch(n){}}return null}var D=Array.isArray,P=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},V=[],j=-1;function F(e){return{current:e}}function U(e){0>j||(e.current=V[j],V[j]=null,j--)}function z(e,t){j++,V[j]=e.current,e.current=t}var q=F(null),B=F(null),$=F(null),H=F(null);function W(e,t){switch(z($,t),z(B,e),z(q,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?ih(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=sh(t=ih(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(q),z(q,e)}function G(){U(q),U(B),U($)}function K(e){null!==e.memoizedState&&z(H,e);var t=q.current,n=sh(t,e.type);t!==n&&(z(B,e),z(q,n))}function Q(e){B.current===e&&(U(q),U(B)),H.current===e&&(U(H),Kh._currentValue=L)}var Y=Object.prototype.hasOwnProperty,X=r.unstable_scheduleCallback,J=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,se=r.unstable_NormalPriority,oe=r.unstable_LowPriority,ae=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,he=null;function de(e){if("function"===typeof le&&ce(e),he&&"function"===typeof he.setStrictMode)try{he.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/me|0)|0},pe=Math.log,me=Math.LN2;var ge=256,ve=4194304;function ye(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _e(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~s)?i=ye(r):0!==(o&=a)?i=ye(o):n||0!==(n=a&~e)&&(i=ye(n)):0!==(a=r&~s)?i=ye(a):0!==o?i=ye(o):n||0!==(n=r&~e)&&(i=ye(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function be(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function we(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function xe(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function Te(){var e=ve;return 0===(62914560&(ve<<=1))&&(ve=4194304),e}function ke(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Se(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ce(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ee(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Ae(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ie(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ne(){var e=M.p;return 0!==e?e:void 0===(e=window.event)?32:cd(e.type)}var Oe=Math.random().toString(36).slice(2),Re="__reactFiber$"+Oe,De="__reactProps$"+Oe,Pe="__reactContainer$"+Oe,Me="__reactEvents$"+Oe,Le="__reactListeners$"+Oe,Ve="__reactHandles$"+Oe,je="__reactResources$"+Oe,Fe="__reactMarker$"+Oe;function Ue(e){delete e[Re],delete e[De],delete e[Me],delete e[Le],delete e[Ve]}function ze(e){var t=e[Re];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pe]||n[Re]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=_h(e);null!==e;){if(n=e[Re])return n;e=_h(e)}return t}n=(e=n).parentNode}return null}function qe(e){if(e=e[Re]||e[Pe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Be(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function $e(e){var t=e[je];return t||(t=e[je]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function He(e){e[Fe]=!0}var We=new Set,Ge={};function Ke(e,t){Qe(e,t),Qe(e+"Capture",t)}function Qe(e,t){for(Ge[e]=t,e=0;e<t.length;e++)We.add(t[e])}var Ye,Xe,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(i=t,Y.call(et,i)||!Y.call(Ze,i)&&(Je.test(i)?et[i]=!0:(Ze[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Ye)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ye=t&&t[1]||"",Xe=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ye+e+Xe}var st=!1;function ot(e,t){if(!e||st)return"";st=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(o){r=o}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&r&&"string"===typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{st=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function at(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=at(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ht(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function dt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function mt(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,i,s,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?yt(e,o,ct(t)):null!=n?yt(e,o,ct(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ct(a):e.removeAttribute("name")}function vt(e,t,n,r,i,s,o,a){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function yt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function _t(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function bt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function wt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(D(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function xt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Tt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function kt(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Tt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function St(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&kt(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&kt(e,s,t[s])}function Ct(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function It(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Nt=null;function Ot(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Rt=null,Dt=null;function Pt(e){var t=qe(e);if(t&&(e=t.stateNode)){var n=e[De]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[De]||null;if(!i)throw Error(o(90));gt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&dt(r)}break e;case"textarea":bt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&_t(e,!!n.multiple,t,!1)}}}var Mt=!1;function Lt(e,t,n){if(Mt)return e(t,n);Mt=!0;try{return e(t)}finally{if(Mt=!1,(null!==Rt||null!==Dt)&&(zc(),Rt&&(t=Rt,e=Dt,Dt=Rt=null,Pt(t),e)))for(t=0;t<e.length;t++)Pt(e[t])}}function Vt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[De]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var jt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ft=!1;if(jt)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){Ft=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch(Dd){Ft=!1}var zt=null,qt=null,Bt=null;function $t(){if(Bt)return Bt;var e,t,n=qt,r=n.length,i="value"in zt?zt.value:zt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Bt=i.slice(e,1<t?1-t:void 0)}function Ht(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Wt(){return!0}function Gt(){return!1}function Kt(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Wt:Gt,this.isPropagationStopped=Gt,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Wt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Wt)},persist:function(){},isPersistent:Wt}),t}var Qt,Yt,Xt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Kt(Jt),en=d({},Jt,{view:0,detail:0}),tn=Kt(en),nn=d({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xt&&(Xt&&"mousemove"===e.type?(Qt=e.screenX-Xt.screenX,Yt=e.screenY-Xt.screenY):Yt=Qt=0,Xt=e),Qt)},movementY:function(e){return"movementY"in e?e.movementY:Yt}}),rn=Kt(nn),sn=Kt(d({},nn,{dataTransfer:0})),on=Kt(d({},en,{relatedTarget:0})),an=Kt(d({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Kt(d({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Kt(d({},Jt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=dn[e])&&!!t[e]}function pn(){return fn}var mn=Kt(d({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ht(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?hn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Ht(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ht(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Kt(d({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),vn=Kt(d({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),yn=Kt(d({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),_n=Kt(d({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),bn=Kt(d({},Jt,{newState:0,oldState:0})),wn=[9,13,27,32],xn=jt&&"CompositionEvent"in window,Tn=null;jt&&"documentMode"in document&&(Tn=document.documentMode);var kn=jt&&"TextEvent"in window&&!Tn,Sn=jt&&(!xn||Tn&&8<Tn&&11>=Tn),Cn=String.fromCharCode(32),En=!1;function An(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function In(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Nn=!1;var On={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!On[e.type]:"textarea"===t}function Dn(e,t,n,r){Rt?Dt?Dt.push(r):Dt=[r]:Rt=r,0<(t=$u(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Pn=null,Mn=null;function Ln(e){Lu(e,0)}function Vn(e){if(dt(Be(e)))return e}function jn(e,t){if("change"===e)return t}var Fn=!1;if(jt){var Un;if(jt){var zn="oninput"in document;if(!zn){var qn=document.createElement("div");qn.setAttribute("oninput","return;"),zn="function"===typeof qn.oninput}Un=zn}else Un=!1;Fn=Un&&(!document.documentMode||9<document.documentMode)}function Bn(){Pn&&(Pn.detachEvent("onpropertychange",$n),Mn=Pn=null)}function $n(e){if("value"===e.propertyName&&Vn(Mn)){var t=[];Dn(t,Mn,e,Ot(e)),Lt(Ln,t)}}function Hn(e,t,n){"focusin"===e?(Bn(),Mn=n,(Pn=t).attachEvent("onpropertychange",$n)):"focusout"===e&&Bn()}function Wn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Vn(Mn)}function Gn(e,t){if("click"===e)return Vn(t)}function Kn(e,t){if("input"===e||"change"===e)return Vn(t)}var Qn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Yn(e,t){if(Qn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Y.call(t,i)||!Qn(e[i],t[i]))return!1}return!0}function Xn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,r=Xn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Xn(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=jt&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,sr=null,or=!1;function ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;or||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},sr&&Yn(sr,r)||(sr=r,0<(r=$u(ir,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},hr={};function dr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in hr)return ur[e]=n[t];return e}jt&&(hr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var fr=dr("animationend"),pr=dr("animationiteration"),mr=dr("animationstart"),gr=dr("transitionrun"),vr=dr("transitionstart"),yr=dr("transitioncancel"),_r=dr("transitionend"),br=new Map,wr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xr(e,t){br.set(e,t),Ke(t,[e])}wr.push("scrollEnd");var Tr=new WeakMap;function kr(e,t){if("object"===typeof e&&null!==e){var n=Tr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Tr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Sr=[],Cr=0,Er=0;function Ar(){for(var e=Cr,t=Er=Cr=0;t<e;){var n=Sr[t];Sr[t++]=null;var r=Sr[t];Sr[t++]=null;var i=Sr[t];Sr[t++]=null;var s=Sr[t];if(Sr[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==s&&Rr(n,i,s)}}function Ir(e,t,n,r){Sr[Cr++]=e,Sr[Cr++]=t,Sr[Cr++]=n,Sr[Cr++]=r,Er|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Nr(e,t,n,r){return Ir(e,t,n,r),Dr(e)}function Or(e,t){return Ir(e,null,null,t),Dr(e)}function Rr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-fe(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Dr(e){if(50<Rc)throw Rc=0,Dc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Pr={};function Mr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(e,t,n,r){return new Mr(e,t,n,r)}function Vr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function jr(e,t){var n=e.alternate;return null===n?((n=Lr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Fr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ur(e,t,n,r,i,s){var a=0;if(r=e,"function"===typeof e)Vr(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,q.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case E:return(e=Lr(31,n,t,i)).elementType=E,e.lanes=s,e;case g:return zr(n.children,i,s,t);case v:a=8,i|=24;break;case y:return(e=Lr(12,n,t,2|i)).elementType=y,e.lanes=s,e;case T:return(e=Lr(13,n,t,i)).elementType=T,e.lanes=s,e;case k:return(e=Lr(19,n,t,i)).elementType=k,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:case w:a=10;break e;case b:a=9;break e;case x:a=11;break e;case S:a=14;break e;case C:a=16,r=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=Lr(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function zr(e,t,n,r){return(e=Lr(7,e,r,t)).lanes=n,e}function qr(e,t,n){return(e=Lr(6,e,null,t)).lanes=n,e}function Br(e,t,n){return(t=Lr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var $r=[],Hr=0,Wr=null,Gr=0,Kr=[],Qr=0,Yr=null,Xr=1,Jr="";function Zr(e,t){$r[Hr++]=Gr,$r[Hr++]=Wr,Wr=e,Gr=t}function ei(e,t,n){Kr[Qr++]=Xr,Kr[Qr++]=Jr,Kr[Qr++]=Yr,Yr=e;var r=Xr;e=Jr;var i=32-fe(r)-1;r&=~(1<<i),n+=1;var s=32-fe(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xr=1<<32-fe(t)+i|n<<i|r,Jr=s+e}else Xr=1<<s|n<<i|r,Jr=e}function ti(e){null!==e.return&&(Zr(e,1),ei(e,1,0))}function ni(e){for(;e===Wr;)Wr=$r[--Hr],$r[Hr]=null,Gr=$r[--Hr],$r[Hr]=null;for(;e===Yr;)Yr=Kr[--Qr],Kr[Qr]=null,Jr=Kr[--Qr],Kr[Qr]=null,Xr=Kr[--Qr],Kr[Qr]=null}var ri=null,ii=null,si=!1,oi=null,ai=!1,li=Error(o(519));function ci(e){throw mi(kr(Error(o(418,"")),e)),li}function ui(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Re]=e,t[De]=r,n){case"dialog":Vu("cancel",t),Vu("close",t);break;case"iframe":case"object":case"embed":Vu("load",t);break;case"video":case"audio":for(n=0;n<Pu.length;n++)Vu(Pu[n],t);break;case"source":Vu("error",t);break;case"img":case"image":case"link":Vu("error",t),Vu("load",t);break;case"details":Vu("toggle",t);break;case"input":Vu("invalid",t),vt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ht(t);break;case"select":Vu("invalid",t);break;case"textarea":Vu("invalid",t),wt(t,r.value,r.defaultValue,r.children),ht(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Yu(t.textContent,n)?(null!=r.popover&&(Vu("beforetoggle",t),Vu("toggle",t)),null!=r.onScroll&&Vu("scroll",t),null!=r.onScrollEnd&&Vu("scrollend",t),null!=r.onClick&&(t.onclick=Xu),t=!0):t=!1,t||ci(e)}function hi(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(ai=!1);case 27:case 3:return void(ai=!0);default:ri=ri.return}}function di(e){if(e!==ri)return!1;if(!si)return hi(e),si=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||oh(e.type,e.memoizedProps)),t=!t),t&&ii&&ci(e),hi(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=vh(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,fh(e.type)?(e=yh,yh=null,ii=e):ii=n):ii=ri?vh(e.stateNode.nextSibling):null;return!0}function fi(){ii=ri=null,si=!1}function pi(){var e=oi;return null!==e&&(null===_c?_c=e:_c.push.apply(_c,e),oi=null),e}function mi(e){null===oi?oi=[e]:oi.push(e)}var gi=F(null),vi=null,yi=null;function _i(e,t,n){z(gi,t._currentValue),t._currentValue=n}function bi(e){e._currentValue=gi.current,U(gi)}function wi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xi(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var a=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),wi(s.return,n,e),r||(a=null);break e}s=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(o(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),wi(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function Ti(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=i.type;Qn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===H.current){if(null===(a=i.alternate))throw Error(o(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Kh):e=[Kh])}i=i.return}null!==e&&xi(t,e,n,r),t.flags|=262144}function ki(e){for(e=e.firstContext;null!==e;){if(!Qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Si(e){vi=e,yi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ci(e){return Ai(vi,e)}function Ei(e,t){return null===vi&&Si(e),Ai(e,t)}function Ai(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===yi){if(null===e)throw Error(o(308));yi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else yi=yi.next=t;return n}var Ii="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ni=r.unstable_scheduleCallback,Oi=r.unstable_NormalPriority,Ri={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Di(){return{controller:new Ii,data:new Map,refCount:0}}function Pi(e){e.refCount--,0===e.refCount&&Ni(Oi,function(){e.controller.abort()})}var Mi=null,Li=0,Vi=0,ji=null;function Fi(){if(0===--Li&&null!==Mi){null!==ji&&(ji.status="fulfilled");var e=Mi;Mi=null,Vi=0,ji=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Ui=P.S;P.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Mi){var n=Mi=[];Li=0,Vi=Iu(),ji={status:"pending",value:void 0,then:function(e){n.push(e)}}}Li++,t.then(Fi,Fi)}(0,t),null!==Ui&&Ui(e,t)};var zi=F(null);function qi(){var e=zi.current;return null!==e?e:rc.pooledCache}function Bi(e,t){z(zi,null===t?zi.current:t.pool)}function $i(){var e=qi();return null===e?null:{parent:Ri._currentValue,pool:e}}var Hi=Error(o(460)),Wi=Error(o(474)),Gi=Error(o(542)),Ki={then:function(){}};function Qi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Yi(){}function Xi(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Yi,Yi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e;default:if("string"===typeof t.status)t.then(Yi,Yi);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e}throw Ji=t,Hi}}var Ji=null;function Zi(){if(null===Ji)throw Error(o(459));var e=Ji;return Ji=null,e}function es(e){if(e===Hi||e===Gi)throw Error(o(483))}var ts=!1;function ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function is(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ss(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Dr(e),Rr(e,null,n),t}return Ir(e,r,t,n),Dr(e)}function os(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ee(e,n)}}function as(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ls=!1;function cs(){if(ls){if(null!==ji)throw ji}}function us(e,t,n,r){ls=!1;var i=e.updateQueue;ts=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var f=-536870913&a.lane,p=f!==a.lane;if(p?(sc&f)===f:(r&f)===f){0!==f&&f===Vi&&(ls=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,g=a;f=t;var v=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){h=m.call(v,h,f);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=g.payload)?m.call(v,h,f):m)||void 0===f)break e;h=d({},h,f);break e;case 2:ts=!0}}null!==(f=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,o|=f;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),fc|=o,e.lanes=o,e.memoizedState=h}}function hs(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function ds(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)hs(n[e],t)}var fs=F(null),ps=F(0);function ms(e,t){z(ps,e=hc),z(fs,t),hc=e|t.baseLanes}function gs(){z(ps,hc),z(fs,fs.current)}function vs(){hc=ps.current,U(fs),U(ps)}var ys=0,_s=null,bs=null,ws=null,xs=!1,Ts=!1,ks=!1,Ss=0,Cs=0,Es=null,As=0;function Is(){throw Error(o(321))}function Ns(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qn(e[n],t[n]))return!1;return!0}function Os(e,t,n,r,i,s){return ys=s,_s=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=null===e||null===e.memoizedState?Wo:Go,ks=!1,s=n(r,i),ks=!1,Ts&&(s=Ds(t,n,r,i)),Rs(e),s}function Rs(e){P.H=Ho;var t=null!==bs&&null!==bs.next;if(ys=0,ws=bs=_s=null,xs=!1,Cs=0,Es=null,t)throw Error(o(300));null===e||Ea||null!==(e=e.dependencies)&&ki(e)&&(Ea=!0)}function Ds(e,t,n,r){_s=e;var i=0;do{if(Ts&&(Es=null),Cs=0,Ts=!1,25<=i)throw Error(o(301));if(i+=1,ws=bs=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}P.H=Ko,s=t(n,r)}while(Ts);return s}function Ps(){var e=P.H,t=e.useState()[0];return t="function"===typeof t.then?Us(t):t,e=e.useState()[0],(null!==bs?bs.memoizedState:null)!==e&&(_s.flags|=1024),t}function Ms(){var e=0!==Ss;return Ss=0,e}function Ls(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Vs(e){if(xs){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}xs=!1}ys=0,ws=bs=_s=null,Ts=!1,Cs=Ss=0,Es=null}function js(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ws?_s.memoizedState=ws=e:ws=ws.next=e,ws}function Fs(){if(null===bs){var e=_s.alternate;e=null!==e?e.memoizedState:null}else e=bs.next;var t=null===ws?_s.memoizedState:ws.next;if(null!==t)ws=t,bs=e;else{if(null===e){if(null===_s.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(bs=e).memoizedState,baseState:bs.baseState,baseQueue:bs.baseQueue,queue:bs.queue,next:null},null===ws?_s.memoizedState=ws=e:ws=ws.next=e}return ws}function Us(e){var t=Cs;return Cs+=1,null===Es&&(Es=[]),e=Xi(Es,e,t),t=_s,null===(null===ws?t.memoizedState:ws.next)&&(t=t.alternate,P.H=null===t||null===t.memoizedState?Wo:Go),e}function zs(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Us(e);if(e.$$typeof===w)return Ci(e)}throw Error(o(438,String(e)))}function qs(e){var t=null,n=_s.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=_s.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},_s.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=A;return t.index++,n}function Bs(e,t){return"function"===typeof t?t(e):t}function $s(e){return Hs(Fs(),bs,e)}function Hs(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=a=null,c=null,u=t=i.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(sc&d)===d:(ys&d)===d){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===Vi&&(h=!0);else{if((ys&f)===f){u=u.next,f===Vi&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,a=s):c=c.next=d,_s.lanes|=f,fc|=f}d=u.action,ks&&n(s,d),s=u.hasEagerState?u.eagerState:n(s,d)}else f={lane:d,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,a=s):c=c.next=f,_s.lanes|=d,fc|=d;u=u.next}while(null!==u&&u!==t);if(null===c?a=s:c.next=l,!Qn(s,e.memoizedState)&&(Ea=!0,h&&null!==(n=ji)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=c,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ws(e){var t=Fs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);Qn(s,t.memoizedState)||(Ea=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Gs(e,t,n){var r=_s,i=Fs(),s=si;if(s){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!Qn((bs||i).memoizedState,n);if(a&&(i.memoizedState=n,Ea=!0),i=i.queue,vo(2048,8,Ys.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==ws&&1&ws.memoizedState.tag){if(r.flags|=2048,po(9,{destroy:void 0,resource:void 0},Qs.bind(null,r,i,n,t),null),null===rc)throw Error(o(349));s||0!==(124&ys)||Ks(r,t,n)}return n}function Ks(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=_s.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},_s.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Qs(e,t,n,r){t.value=n,t.getSnapshot=r,Xs(t)&&Js(e)}function Ys(e,t,n){return n(function(){Xs(t)&&Js(e)})}function Xs(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qn(e,n)}catch(r){return!0}}function Js(e){var t=Or(e,2);null!==t&&Lc(t,e,2)}function Zs(e){var t=js();if("function"===typeof e){var n=e;if(e=n(),ks){de(!0);try{n()}finally{de(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:e},t}function eo(e,t,n,r){return e.baseState=n,Hs(e,bs,"function"===typeof r?r:Bs)}function to(e,t,n,r,i){if(qo(e))throw Error(o(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==P.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,no(t,s)):(s.next=n.next,t.pending=n.next=s)}}function no(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=P.T,o={};P.T=o;try{var a=n(i,r),l=P.S;null!==l&&l(o,a),ro(e,t,a)}catch(c){so(e,t,c)}finally{P.T=s}}else try{ro(e,t,s=n(i,r))}catch(u){so(e,t,u)}}function ro(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){io(e,t,n)},function(n){return so(e,t,n)}):io(e,t,n)}function io(e,t,n){t.status="fulfilled",t.value=n,oo(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,no(e,n)))}function so(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,oo(t),t=t.next}while(t!==r)}e.action=null}function oo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ao(e,t){return t}function lo(e,t){if(si){var n=rc.formState;if(null!==n){e:{var r=_s;if(si){if(ii){t:{for(var i=ii,s=ai;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=vh(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){ii=vh(i.nextSibling),r="F!"===i.data;break e}}ci(r)}r=!1}r&&(t=n[0])}}return(n=js()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:t},n.queue=r,n=Fo.bind(null,_s,r),r.dispatch=n,r=Zs(!1),s=zo.bind(null,_s,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=js()).queue=i,n=to.bind(null,_s,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function co(e){return uo(Fs(),bs,e)}function uo(e,t,n){if(t=Hs(e,t,ao)[0],e=$s(Bs)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Us(t)}catch(o){if(o===Hi)throw Gi;throw o}else r=t;var i=(t=Fs()).queue,s=i.dispatch;return n!==t.memoizedState&&(_s.flags|=2048,po(9,{destroy:void 0,resource:void 0},ho.bind(null,i,n),null)),[r,s,e]}function ho(e,t){e.action=t}function fo(e){var t=Fs(),n=bs;if(null!==n)return uo(t,n,e);Fs(),t=t.memoizedState;var r=(n=Fs()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function po(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=_s.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},_s.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function mo(){return Fs().memoizedState}function go(e,t,n,r){var i=js();r=void 0===r?null:r,_s.flags|=e,i.memoizedState=po(1|t,{destroy:void 0,resource:void 0},n,r)}function vo(e,t,n,r){var i=Fs();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==bs&&null!==r&&Ns(r,bs.memoizedState.deps)?i.memoizedState=po(t,s,n,r):(_s.flags|=e,i.memoizedState=po(1|t,s,n,r))}function yo(e,t){go(8390656,8,e,t)}function _o(e,t){vo(2048,8,e,t)}function bo(e,t){return vo(4,2,e,t)}function wo(e,t){return vo(4,4,e,t)}function xo(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function To(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,vo(4,4,xo.bind(null,t,e),n)}function ko(){}function So(e,t){var n=Fs();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Ns(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=Fs();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Ns(t,r[1]))return r[0];if(r=e(),ks){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r}function Eo(e,t,n){return void 0===n||0!==(1073741824&ys)?e.memoizedState=t:(e.memoizedState=n,e=Mc(),_s.lanes|=e,fc|=e,n)}function Ao(e,t,n,r){return Qn(n,t)?n:null!==fs.current?(e=Eo(e,n,r),Qn(e,t)||(Ea=!0),e):0===(42&ys)?(Ea=!0,e.memoizedState=n):(e=Mc(),_s.lanes|=e,fc|=e,t)}function Io(e,t,n,r,i){var s=M.p;M.p=0!==s&&8>s?s:8;var o=P.T,a={};P.T=a,zo(e,!1,t,n);try{var l=i(),c=P.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Uo(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Pc());else Uo(e,t,r,Pc())}catch(u){Uo(e,t,{then:function(){},status:"rejected",reason:u},Pc())}finally{M.p=s,P.T=o}}function No(){}function Oo(e,t,n,r){if(5!==e.tag)throw Error(o(476));var i=Ro(e).queue;Io(e,i,t,L,null===n?No:function(){return Do(e),n(r)})}function Ro(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:L},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Do(e){Uo(e,Ro(e).next.queue,{},Pc())}function Po(){return Ci(Kh)}function Mo(){return Fs().memoizedState}function Lo(){return Fs().memoizedState}function Vo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Pc(),r=ss(t,e=is(n),n);return null!==r&&(Lc(r,t,n),os(r,t,n)),t={cache:Di()},void(e.payload=t)}t=t.return}}function jo(e,t,n){var r=Pc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},qo(e)?Bo(t,n):null!==(n=Nr(e,t,n,r))&&(Lc(n,e,r),$o(n,t,r))}function Fo(e,t,n){Uo(e,t,n,Pc())}function Uo(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(qo(e))Bo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Qn(a,o))return Ir(e,t,i,0),null===rc&&Ar(),!1}catch(l){}if(null!==(n=Nr(e,t,i,r)))return Lc(n,e,r),$o(n,t,r),!0}return!1}function zo(e,t,n,r){if(r={lane:2,revertLane:Iu(),action:r,hasEagerState:!1,eagerState:null,next:null},qo(e)){if(t)throw Error(o(479))}else null!==(t=Nr(e,n,r,2))&&Lc(t,e,2)}function qo(e){var t=e.alternate;return e===_s||null!==t&&t===_s}function Bo(e,t){Ts=xs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $o(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ee(e,n)}}var Ho={readContext:Ci,use:zs,useCallback:Is,useContext:Is,useEffect:Is,useImperativeHandle:Is,useLayoutEffect:Is,useInsertionEffect:Is,useMemo:Is,useReducer:Is,useRef:Is,useState:Is,useDebugValue:Is,useDeferredValue:Is,useTransition:Is,useSyncExternalStore:Is,useId:Is,useHostTransitionStatus:Is,useFormState:Is,useActionState:Is,useOptimistic:Is,useMemoCache:Is,useCacheRefresh:Is},Wo={readContext:Ci,use:zs,useCallback:function(e,t){return js().memoizedState=[e,void 0===t?null:t],e},useContext:Ci,useEffect:yo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,go(4194308,4,xo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return go(4194308,4,e,t)},useInsertionEffect:function(e,t){go(4,2,e,t)},useMemo:function(e,t){var n=js();t=void 0===t?null:t;var r=e();if(ks){de(!0);try{e()}finally{de(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=js();if(void 0!==n){var i=n(t);if(ks){de(!0);try{n(t)}finally{de(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=jo.bind(null,_s,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},js().memoizedState=e},useState:function(e){var t=(e=Zs(e)).queue,n=Fo.bind(null,_s,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:ko,useDeferredValue:function(e,t){return Eo(js(),e,t)},useTransition:function(){var e=Zs(!1);return e=Io.bind(null,_s,e.queue,!0,!1),js().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=_s,i=js();if(si){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===rc)throw Error(o(349));0!==(124&sc)||Ks(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,yo(Ys.bind(null,r,s,e),[e]),r.flags|=2048,po(9,{destroy:void 0,resource:void 0},Qs.bind(null,r,s,n,t),null),n},useId:function(){var e=js(),t=rc.identifierPrefix;if(si){var n=Jr;t="\xab"+t+"R"+(n=(Xr&~(1<<32-fe(Xr)-1)).toString(32)+n),0<(n=Ss++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=As++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Po,useFormState:lo,useActionState:lo,useOptimistic:function(e){var t=js();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=zo.bind(null,_s,!0,n),n.dispatch=t,[e,t]},useMemoCache:qs,useCacheRefresh:function(){return js().memoizedState=Vo.bind(null,_s)}},Go={readContext:Ci,use:zs,useCallback:So,useContext:Ci,useEffect:_o,useImperativeHandle:To,useInsertionEffect:bo,useLayoutEffect:wo,useMemo:Co,useReducer:$s,useRef:mo,useState:function(){return $s(Bs)},useDebugValue:ko,useDeferredValue:function(e,t){return Ao(Fs(),bs.memoizedState,e,t)},useTransition:function(){var e=$s(Bs)[0],t=Fs().memoizedState;return["boolean"===typeof e?e:Us(e),t]},useSyncExternalStore:Gs,useId:Mo,useHostTransitionStatus:Po,useFormState:co,useActionState:co,useOptimistic:function(e,t){return eo(Fs(),0,e,t)},useMemoCache:qs,useCacheRefresh:Lo},Ko={readContext:Ci,use:zs,useCallback:So,useContext:Ci,useEffect:_o,useImperativeHandle:To,useInsertionEffect:bo,useLayoutEffect:wo,useMemo:Co,useReducer:Ws,useRef:mo,useState:function(){return Ws(Bs)},useDebugValue:ko,useDeferredValue:function(e,t){var n=Fs();return null===bs?Eo(n,e,t):Ao(n,bs.memoizedState,e,t)},useTransition:function(){var e=Ws(Bs)[0],t=Fs().memoizedState;return["boolean"===typeof e?e:Us(e),t]},useSyncExternalStore:Gs,useId:Mo,useHostTransitionStatus:Po,useFormState:fo,useActionState:fo,useOptimistic:function(e,t){var n=Fs();return null!==bs?eo(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:qs,useCacheRefresh:Lo},Qo=null,Yo=0;function Xo(e){var t=Yo;return Yo+=1,null===Qo&&(Qo=[]),Xi(Qo,e,t)}function Jo(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Zo(e,t){if(t.$$typeof===f)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ea(e){return(0,e._init)(e._payload)}function ta(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=jr(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=qr(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===g?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===C&&ea(s)===t.type)?(Jo(t=i(t,n.props),n),t.return=e,t):(Jo(t=Ur(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Br(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=zr(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=qr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Jo(n=Ur(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=Br(t,e.mode,n)).return=e,t;case C:return d(e,t=(0,t._init)(t._payload),n)}if(D(t)||N(t))return(t=zr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return d(e,Xo(t),n);if(t.$$typeof===w)return d(e,Ei(e,t),n);Zo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?c(e,t,n,r):null;case m:return n.key===i?u(e,t,n,r):null;case C:return f(e,t,n=(i=n._init)(n._payload),r)}if(D(n)||N(n))return null!==i?null:h(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,Xo(n),r);if(n.$$typeof===w)return f(e,t,Ei(e,n),r);Zo(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case m:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case C:return v(e,t,n,r=(0,r._init)(r._payload),i)}if(D(r)||N(r))return h(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return v(e,t,n,Xo(r),i);if(r.$$typeof===w)return v(e,t,n,Ei(t,r),i);Zo(t,r)}return null}function y(l,c,u,h){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var _=u.key;null!==c;){if(c.key===_){if((_=u.type)===g){if(7===c.tag){n(l,c.sibling),(h=i(c,u.props.children)).return=l,l=h;break e}}else if(c.elementType===_||"object"===typeof _&&null!==_&&_.$$typeof===C&&ea(_)===c.type){n(l,c.sibling),Jo(h=i(c,u.props),u),h.return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((h=zr(u.props.children,l.mode,h,u.key)).return=l,l=h):(Jo(h=Ur(u.type,u.key,u.props,null,l.mode,h),u),h.return=l,l=h)}return a(l);case m:e:{for(_=u.key;null!==c;){if(c.key===_){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(h=i(c,u.children||[])).return=l,l=h;break e}n(l,c);break}t(l,c),c=c.sibling}(h=Br(u,l.mode,h)).return=l,l=h}return a(l);case C:return y(l,c,u=(_=u._init)(u._payload),h)}if(D(u))return function(i,o,a,l){for(var c=null,u=null,h=o,p=o=0,m=null;null!==h&&p<a.length;p++){h.index>p?(m=h,h=null):m=h.sibling;var g=f(i,h,a[p],l);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(i,h),o=s(g,o,p),null===u?c=g:u.sibling=g,u=g,h=m}if(p===a.length)return n(i,h),si&&Zr(i,p),c;if(null===h){for(;p<a.length;p++)null!==(h=d(i,a[p],l))&&(o=s(h,o,p),null===u?c=h:u.sibling=h,u=h);return si&&Zr(i,p),c}for(h=r(h);p<a.length;p++)null!==(m=v(h,i,p,a[p],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?p:m.key),o=s(m,o,p),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach(function(e){return t(i,e)}),si&&Zr(i,p),c}(l,c,u,h);if(N(u)){if("function"!==typeof(_=N(u)))throw Error(o(150));return function(i,a,l,c){if(null==l)throw Error(o(151));for(var u=null,h=null,p=a,m=a=0,g=null,y=l.next();null!==p&&!y.done;m++,y=l.next()){p.index>m?(g=p,p=null):g=p.sibling;var _=f(i,p,y.value,c);if(null===_){null===p&&(p=g);break}e&&p&&null===_.alternate&&t(i,p),a=s(_,a,m),null===h?u=_:h.sibling=_,h=_,p=g}if(y.done)return n(i,p),si&&Zr(i,m),u;if(null===p){for(;!y.done;m++,y=l.next())null!==(y=d(i,y.value,c))&&(a=s(y,a,m),null===h?u=y:h.sibling=y,h=y);return si&&Zr(i,m),u}for(p=r(p);!y.done;m++,y=l.next())null!==(y=v(p,i,m,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),a=s(y,a,m),null===h?u=y:h.sibling=y,h=y);return e&&p.forEach(function(e){return t(i,e)}),si&&Zr(i,m),u}(l,c,u=_.call(u),h)}if("function"===typeof u.then)return y(l,c,Xo(u),h);if(u.$$typeof===w)return y(l,c,Ei(l,u),h);Zo(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(h=i(c,u)).return=l,l=h):(n(l,c),(h=qr(u,l.mode,h)).return=l,l=h),a(l)):n(l,c)}return function(e,t,n,r){try{Yo=0;var i=y(e,t,n,r);return Qo=null,i}catch(o){if(o===Hi||o===Gi)throw o;var s=Lr(29,o,null,e.mode);return s.lanes=r,s.return=e,s}}}var na=ta(!0),ra=ta(!1),ia=F(null),sa=null;function oa(e){var t=e.alternate;z(ua,1&ua.current),z(ia,e),null===sa&&(null===t||null!==fs.current||null!==t.memoizedState)&&(sa=e)}function aa(e){if(22===e.tag){if(z(ua,ua.current),z(ia,e),null===sa){var t=e.alternate;null!==t&&null!==t.memoizedState&&(sa=e)}}else la()}function la(){z(ua,ua.current),z(ia,ia.current)}function ca(e){U(ia),sa===e&&(sa=null),U(ua)}var ua=F(0);function ha(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gh(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function da(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:d({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fa={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Pc(),i=is(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Lc(t,e,r),os(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Pc(),i=is(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Lc(t,e,r),os(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Pc(),r=is(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ss(e,r,n))&&(Lc(t,e,n),os(t,e,n))}};function pa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!Yn(n,r)||!Yn(i,s))}function ma(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fa.enqueueReplaceState(t,t.state,null)}function ga(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=d({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var va="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function ya(e){va(e)}function _a(e){console.error(e)}function ba(e){va(e)}function wa(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function xa(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Ta(e,t,n){return(n=is(n)).tag=3,n.payload={element:null},n.callback=function(){wa(e,t)},n}function ka(e){return(e=is(e)).tag=3,e}function Sa(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){xa(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){xa(t,n,r),"function"!==typeof i&&(null===kc?kc=new Set([this]):kc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ca=Error(o(461)),Ea=!1;function Aa(e,t,n,r){t.child=null===e?ra(t,null,n,r):na(t,e.child,n,r)}function Ia(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var o={};for(var a in r)"ref"!==a&&(o[a]=r[a])}else o=r;return Si(t),r=Os(e,t,n,o,s,i),a=Ms(),null===e||Ea?(si&&a&&ti(t),t.flags|=1,Aa(e,t,r,i),t.child):(Ls(e,t,i),Qa(e,t,i))}function Na(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Vr(s)||void 0!==s.defaultProps||null!==n.compare?((e=Ur(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Oa(e,t,s,r,i))}if(s=e.child,!Ya(e,i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:Yn)(o,r)&&e.ref===t.ref)return Qa(e,t,i)}return t.flags|=1,(e=jr(s,r)).ref=t.ref,e.return=t,t.child=e}function Oa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Yn(s,r)&&e.ref===t.ref){if(Ea=!1,t.pendingProps=r=s,!Ya(e,i))return t.lanes=e.lanes,Qa(e,t,i);0!==(131072&e.flags)&&(Ea=!0)}}return Ma(e,t,n,r,i)}function Ra(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,s=0;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return Da(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Da(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Bi(0,null!==s?s.cachePool:null),null!==s?ms(t,s):gs(),aa(t)}else null!==s?(Bi(0,s.cachePool),ms(t,s),la(),t.memoizedState=null):(null!==e&&Bi(0,null),gs(),la());return Aa(e,t,i,n),t.child}function Da(e,t,n,r){var i=qi();return i=null===i?null:{parent:Ri._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Bi(0,null),gs(),aa(t),null!==e&&Ti(e,t,r,!0),null}function Pa(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ma(e,t,n,r,i){return Si(t),n=Os(e,t,n,r,void 0,i),r=Ms(),null===e||Ea?(si&&r&&ti(t),t.flags|=1,Aa(e,t,n,i),t.child):(Ls(e,t,i),Qa(e,t,i))}function La(e,t,n,r,i,s){return Si(t),t.updateQueue=null,n=Ds(t,r,n,i),Rs(e),r=Ms(),null===e||Ea?(si&&r&&ti(t),t.flags|=1,Aa(e,t,n,s),t.child):(Ls(e,t,s),Qa(e,t,s))}function Va(e,t,n,r,i){if(Si(t),null===t.stateNode){var s=Pr,o=n.contextType;"object"===typeof o&&null!==o&&(s=Ci(o)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=fa,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},ns(t),o=n.contextType,s.context="object"===typeof o&&null!==o?Ci(o):Pr,s.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(da(t,n,o,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(o=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),o!==s.state&&fa.enqueueReplaceState(s,s.state,null),us(t,r,s,i),cs(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=ga(n,a);s.props=l;var c=s.context,u=n.contextType;o=Pr,"object"===typeof u&&null!==u&&(o=Ci(u));var h=n.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a||c!==o)&&ma(t,s,r,o),ts=!1;var d=t.memoizedState;s.state=d,us(t,r,s,i),cs(),c=t.memoizedState,a||d!==c||ts?("function"===typeof h&&(da(t,n,h,r),c=t.memoizedState),(l=ts||pa(t,n,l,r,d,c,o))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=o,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,rs(e,t),u=ga(n,o=t.memoizedProps),s.props=u,h=t.pendingProps,d=s.context,c=n.contextType,l=Pr,"object"===typeof c&&null!==c&&(l=Ci(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==h||d!==l)&&ma(t,s,r,l),ts=!1,d=t.memoizedState,s.state=d,us(t,r,s,i),cs();var f=t.memoizedState;o!==h||d!==f||ts||null!==e&&null!==e.dependencies&&ki(e.dependencies)?("function"===typeof a&&(da(t,n,a,r),f=t.memoizedState),(u=ts||pa(t,n,u,r,d,f,l)||null!==e&&null!==e.dependencies&&ki(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Pa(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=na(t,e.child,null,i),t.child=na(t,null,n,i)):Aa(e,t,n,i),t.memoizedState=s.state,e=t.child):e=Qa(e,t,i),e}function ja(e,t,n,r){return fi(),t.flags|=256,Aa(e,t,n,r),t.child}var Fa={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ua(e){return{baseLanes:e,cachePool:$i()}}function za(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function qa(e,t,n){var r,i=t.pendingProps,s=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&ua.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(si){if(s?oa(t):la(),si){var l,c=ii;if(l=c){e:{for(l=c,c=ai;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=vh(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Yr?{id:Xr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},(l=Lr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ri=t,ii=null,l=!0):l=!1}l||ci(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gh(c)?t.lanes=32:t.lanes=536870912,null;ca(t)}return c=i.children,i=i.fallback,s?(la(),c=$a({mode:"hidden",children:c},s=t.mode),i=zr(i,s,n,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(s=t.child).memoizedState=Ua(n),s.childLanes=za(e,r,n),t.memoizedState=Fa,i):(oa(t),Ba(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(oa(t),t.flags&=-257,t=Ha(e,t,n)):null!==t.memoizedState?(la(),t.child=e.child,t.flags|=128,t=null):(la(),s=i.fallback,c=t.mode,i=$a({mode:"visible",children:i.children},c),(s=zr(s,c,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,na(t,e.child,null,n),(i=t.child).memoizedState=Ua(n),i.childLanes=za(e,r,n),t.memoizedState=Fa,t=s);else if(oa(t),gh(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(o(419))).stack="",i.digest=r,mi({value:i,source:null,stack:null}),t=Ha(e,t,n)}else if(Ea||Ti(e,t,n,!1),r=0!==(n&e.childLanes),Ea||r){if(null!==(r=rc)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:Ae(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Or(e,i),Lc(r,e,i),Ca;"$?"===c.data||Gc(),t=Ha(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=vh(c.nextSibling),ri=t,si=!0,oi=null,ai=!1,null!==e&&(Kr[Qr++]=Xr,Kr[Qr++]=Jr,Kr[Qr++]=Yr,Xr=e.id,Jr=e.overflow,Yr=t),(t=Ba(t,i.children)).flags|=4096);return t}return s?(la(),s=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=jr(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?s=jr(u,s):(s=zr(s,c,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,null===(c=e.child.memoizedState)?c=Ua(n):(null!==(l=c.cachePool)?(u=Ri._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=$i(),c={baseLanes:c.baseLanes|n,cachePool:l}),s.memoizedState=c,s.childLanes=za(e,r,n),t.memoizedState=Fa,i):(oa(t),e=(n=e.child).sibling,(n=jr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Ba(e,t){return(t=$a({mode:"visible",children:t},e.mode)).return=e,e.child=t}function $a(e,t){return(e=Lr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ha(e,t,n){return na(t,e.child,null,n),(e=Ba(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wa(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),wi(e.return,t,n)}function Ga(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ka(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Aa(e,t,r.children,n),0!==(2&(r=ua.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wa(e,n,t);else if(19===e.tag)Wa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(z(ua,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ha(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ga(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ha(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ga(t,!0,n,null,s);break;case"together":Ga(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),fc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ti(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=jr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=jr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ya(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!ki(e))}function Xa(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ea=!0;else{if(!Ya(e,n)&&0===(128&t.flags))return Ea=!1,function(e,t,n){switch(t.tag){case 3:W(t,t.stateNode.containerInfo),_i(0,Ri,e.memoizedState.cache),fi();break;case 27:case 5:K(t);break;case 4:W(t,t.stateNode.containerInfo);break;case 10:_i(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(oa(t),t.flags|=128,null):0!==(n&t.child.childLanes)?qa(e,t,n):(oa(t),null!==(e=Qa(e,t,n))?e.sibling:null);oa(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ti(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Ka(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),z(ua,ua.current),r)break;return null;case 22:case 23:return t.lanes=0,Ra(e,t,n);case 24:_i(0,Ri,e.memoizedState.cache)}return Qa(e,t,n)}(e,t,n);Ea=0!==(131072&e.flags)}else Ea=!1,si&&0!==(1048576&t.flags)&&ei(t,Gr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===x){t.tag=11,t=Ia(null,t,r,e,n);break e}if(i===S){t.tag=14,t=Na(null,t,r,e,n);break e}}throw t=R(r)||r,Error(o(306,t,""))}Vr(r)?(e=ga(r,e),t.tag=1,t=Va(null,t,r,e,n)):(t.tag=0,t=Ma(null,t,r,e,n))}return t;case 0:return Ma(e,t,t.type,t.pendingProps,n);case 1:return Va(e,t,r=t.type,i=ga(r,t.pendingProps),n);case 3:e:{if(W(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,rs(e,t),us(t,r,null,n);var a=t.memoizedState;if(r=a.cache,_i(0,Ri,r),r!==s.cache&&xi(t,[Ri],n,!0),cs(),r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=ja(e,t,r,n);break e}if(r!==i){mi(i=kr(Error(o(424)),t)),t=ja(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=vh(e.firstChild),ri=t,si=!0,oi=null,ai=!0,n=ra(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===i){t=Qa(e,t,n);break e}Aa(e,t,r,n)}t=t.child}return t;case 26:return Pa(e,t),null===e?(n=Ah(t.type,null,t.pendingProps,null))?t.memoizedState=n:si||(n=t.type,e=t.pendingProps,(r=rh($.current).createElement(n))[Re]=t,r[De]=e,eh(r,n,e),He(r),t.stateNode=r):t.memoizedState=Ah(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return K(t),null===e&&si&&(r=t.stateNode=bh(t.type,t.pendingProps,$.current),ri=t,ai=!0,i=ii,fh(t.type)?(yh=i,ii=vh(r.firstChild)):ii=i),Aa(e,t,t.pendingProps.children,n),Pa(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&si&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Fe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=vh(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,ai))?(t.stateNode=r,ri=t,ii=vh(r.firstChild),ai=!1,i=!0):i=!1),i||ci(t)),K(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,r=s.children,oh(i,s)?r=null:null!==a&&oh(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=Os(e,t,Ps,null,null,n),Kh._currentValue=i),Pa(e,t),Aa(e,t,r,n),t.child;case 6:return null===e&&si&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vh(e.nextSibling)))return null}return e}(n,t.pendingProps,ai))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||ci(t)),null;case 13:return qa(e,t,n);case 4:return W(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=na(t,null,r,n):Aa(e,t,r,n),t.child;case 11:return Ia(e,t,t.type,t.pendingProps,n);case 7:return Aa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Aa(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,_i(0,t.type,r.value),Aa(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Si(t),r=r(i=Ci(i)),t.flags|=1,Aa(e,t,r,n),t.child;case 14:return Na(e,t,t.type,t.pendingProps,n);case 15:return Oa(e,t,t.type,t.pendingProps,n);case 19:return Ka(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=$a(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=jr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Ra(e,t,n);case 24:return Si(t),r=Ci(Ri),null===e?(null===(i=qi())&&(i=rc,s=Di(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},ns(t),_i(0,Ri,i)):(0!==(e.lanes&n)&&(rs(e,t),us(t,null,null,n),cs()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),_i(0,Ri,r)):(r=s.cache,_i(0,Ri,r),r!==i.cache&&xi(t,[Ri],n,!0))),Aa(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Ja(e){e.flags|=4}function Za(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!zh(t)){if(null!==(t=ia.current)&&((4194048&sc)===sc?null!==sa:(62914560&sc)!==sc&&0===(536870912&sc)||t!==sa))throw Ji=Ki,Wi;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Te():536870912,e.lanes|=t,vc|=t)}function tl(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),bi(Ri),G(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(di(t)?Ja(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,pi())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Ja(t),null!==n?(nl(t),Za(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ja(t),nl(t),Za(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Ja(t),nl(t),t.flags&=-16777217),null;case 27:Q(t),n=$.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ja(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return nl(t),null}e=q.current,di(t)?ui(t):(e=bh(i,r,n),t.stateNode=e,Ja(t))}return nl(t),null;case 5:if(Q(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ja(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return nl(t),null}if(e=q.current,di(t))ui(t);else{switch(i=rh($.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[Re]=t,e[De]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(eh(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ja(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Ja(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=$.current,di(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[Re]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Yu(e.nodeValue,n)))||ci(t)}else(e=rh(e).createTextNode(r))[Re]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[Re]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),i=!1}else i=pi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(ca(t),t):(ca(t),null)}if(ca(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return G(),null===e&&Uu(t.stateNode.containerInfo),nl(t),null;case 10:return bi(t.type),nl(t),null;case 19:if(U(ua),null===(i=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)tl(i,!1);else{if(0!==dc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ha(e))){for(t.flags|=128,tl(i,!1),e=s.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Fr(n,e),n=n.sibling;return z(ua,1&ua.current|2),t.child}e=e.sibling}null!==i.tail&&te()>xc&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ha(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!si)return nl(t),null}else 2*te()-i.renderingStartTime>xc&&536870912!==n&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=ua.current,z(ua,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return ca(t),vs(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&U(zi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),bi(Ri),nl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function il(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return bi(Ri),G(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 13:if(ca(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(ua),null;case 4:return G(),null;case 10:return bi(t.type),null;case 22:case 23:return ca(t),vs(),null!==e&&U(zi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return bi(Ri),null;default:return null}}function sl(e,t){switch(ni(t),t.tag){case 3:bi(Ri),G();break;case 26:case 27:case 5:Q(t);break;case 4:G();break;case 13:ca(t);break;case 19:U(ua);break;case 10:bi(t.type);break;case 22:case 23:ca(t),vs(),null!==e&&U(zi);break;case 24:bi(Ri)}}function ol(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,o=n.inst;r=s(),o.destroy=r}n=n.next}while(n!==i)}}catch(a){uu(t,t.return,a)}}function al(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var o=r.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,i=t;var l=n,c=a;try{c()}catch(u){uu(i,l,u)}}}r=r.next}while(r!==s)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{ds(t,n)}catch(r){uu(e,e.return,r)}}}function cl(e,t,n){n.props=ga(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){uu(e,t,r)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){uu(e,t,i)}}function hl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){uu(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){uu(e,t,s)}else n.current=null}function dl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){uu(e,e.return,i)}}function fl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,l=null,c=null,u=null,h=null;for(p in n){var d=n[p];if(n.hasOwnProperty(p)&&null!=d)switch(p){case"checked":case"value":break;case"defaultValue":c=d;default:r.hasOwnProperty(p)||Ju(e,t,p,null,r,d)}}for(var f in r){var p=r[f];if(d=n[f],r.hasOwnProperty(f)&&(null!=p||null!=d))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":h=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==d&&Ju(e,t,f,p,r,d)}}return void gt(e,a,l,c,u,h,s,i);case"select":for(s in p=a=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(s)||Ju(e,t,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==c&&Ju(e,t,i,s,r,c)}return t=l,n=a,r=p,void(null!=f?_t(e,!!n,f,!1):!!r!==!!n&&(null!=t?_t(e,!!n,t,!0):_t(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Ju(e,t,l,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(null!=i||null!=s))switch(a){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:i!==s&&Ju(e,t,a,i,r,s)}return void bt(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Ju(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Ju(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&Ju(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:Ju(e,t,u,f,r,p)}return;default:if(Ct(t)){for(var v in n)f=n[v],n.hasOwnProperty(v)&&void 0!==f&&!r.hasOwnProperty(v)&&Zu(e,t,v,void 0,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||void 0===f&&void 0===p||Zu(e,t,h,f,r,p);return}}for(var y in n)f=n[y],n.hasOwnProperty(y)&&null!=f&&!r.hasOwnProperty(y)&&Ju(e,t,y,null,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||null==f&&null==p||Ju(e,t,d,f,r,p)}(r,e.type,n,t),r[De]=t}catch(i){uu(e,e.return,i)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&fh(e.type)||4===e.tag}function ml(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&fh(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xu));else if(4!==r&&(27===r&&fh(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&fh(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function yl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);eh(t,r,n),t[Re]=e,t[De]=n}catch(s){uu(e,e.return,s)}}var _l=!1,bl=!1,wl=!1,xl="function"===typeof WeakSet?WeakSet:Set,Tl=null;function kl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Vl(e,n),4&r&&ol(5,n);break;case 1:if(Vl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){uu(n,n.return,o)}else{var i=ga(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){uu(n,n.return,a)}}64&r&&ll(n),512&r&&ul(n,n.return);break;case 3:if(Vl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{ds(e,t)}catch(o){uu(n,n.return,o)}}break;case 27:null===t&&4&r&&yl(n);case 26:case 5:Vl(e,n),null===t&&4&r&&dl(n),512&r&&ul(n,n.return);break;case 12:Vl(e,n);break;case 13:Vl(e,n),4&r&&Nl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=pu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||_l)){t=null!==t&&null!==t.memoizedState||bl,i=_l;var s=bl;_l=r,(bl=t)&&!s?Fl(e,n,0!==(8772&n.subtreeFlags)):Vl(e,n),_l=i,bl=s}break;case 30:break;default:Vl(e,n)}}function Sl(e){var t=e.alternate;null!==t&&(e.alternate=null,Sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ue(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Cl=null,El=!1;function Al(e,t,n){for(n=n.child;null!==n;)Il(e,t,n),n=n.sibling}function Il(e,t,n){if(he&&"function"===typeof he.onCommitFiberUnmount)try{he.onCommitFiberUnmount(ue,n)}catch(s){}switch(n.tag){case 26:bl||hl(n,t),Al(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:bl||hl(n,t);var r=Cl,i=El;fh(n.type)&&(Cl=n.stateNode,El=!1),Al(e,t,n),wh(n.stateNode),Cl=r,El=i;break;case 5:bl||hl(n,t);case 6:if(r=Cl,i=El,Cl=null,Al(e,t,n),El=i,null!==(Cl=r))if(El)try{(9===Cl.nodeType?Cl.body:"HTML"===Cl.nodeName?Cl.ownerDocument.body:Cl).removeChild(n.stateNode)}catch(o){uu(n,t,o)}else try{Cl.removeChild(n.stateNode)}catch(o){uu(n,t,o)}break;case 18:null!==Cl&&(El?(ph(9===(e=Cl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Ed(e)):ph(Cl,n.stateNode));break;case 4:r=Cl,i=El,Cl=n.stateNode.containerInfo,El=!0,Al(e,t,n),Cl=r,El=i;break;case 0:case 11:case 14:case 15:bl||al(2,n,t),bl||al(4,n,t),Al(e,t,n);break;case 1:bl||(hl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),Al(e,t,n);break;case 21:Al(e,t,n);break;case 22:bl=(r=bl)||null!==n.memoizedState,Al(e,t,n),bl=r;break;default:Al(e,t,n)}}function Nl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ed(e)}catch(n){uu(t,t.return,n)}}function Ol(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new xl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new xl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){var r=mu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Rl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(fh(l.type)){Cl=l.stateNode,El=!1;break e}break;case 5:Cl=l.stateNode,El=!1;break e;case 3:case 4:Cl=l.stateNode.containerInfo,El=!0;break e}l=l.return}if(null===Cl)throw Error(o(160));Il(s,a,i),Cl=null,El=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Pl(t,e),t=t.sibling}var Dl=null;function Pl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rl(t,e),Ml(e),4&r&&(al(3,e,e.return),ol(3,e),al(5,e,e.return));break;case 1:Rl(t,e),Ml(e),512&r&&(bl||null===n||hl(n,n.return)),64&r&&_l&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Dl;if(Rl(t,e),Ml(e),512&r&&(bl||null===n||hl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[Fe]||s[Re]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),eh(s,r,n),s[Re]=e,He(s),r=s;break e;case"link":var a=Fh("link","href",i).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}eh(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(a=Fh("meta","content",i).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}eh(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(o(468,r))}s[Re]=e,He(s),r=s}e.stateNode=r}else Uh(i,e.type,e.stateNode);else e.stateNode=Ph(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?Uh(i,e.type,e.stateNode):Ph(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&fl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Rl(t,e),Ml(e),512&r&&(bl||null===n||hl(n,n.return)),null!==n&&4&r&&fl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Rl(t,e),Ml(e),512&r&&(bl||null===n||hl(n,n.return)),32&e.flags){i=e.stateNode;try{xt(i,"")}catch(p){uu(e,e.return,p)}}4&r&&null!=e.stateNode&&fl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(wl=!0);break;case 6:if(Rl(t,e),Ml(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){uu(e,e.return,p)}}break;case 3:if(jh=null,i=Dl,Dl=kh(t.containerInfo),Rl(t,e),Dl=i,Ml(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ed(t.containerInfo)}catch(p){uu(e,e.return,p)}wl&&(wl=!1,Ll(e));break;case 4:r=Dl,Dl=kh(e.stateNode.containerInfo),Rl(t,e),Ml(e),Dl=r;break;case 12:default:Rl(t,e),Ml(e);break;case 13:Rl(t,e),Ml(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(wc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Ol(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=_l,h=bl;if(_l=u||i,bl=h||c,Rl(t,e),bl=h,_l=u,Ml(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||_l||bl||jl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,i)"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var d=c.memoizedProps.style,f=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){uu(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(p){uu(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Ol(e,n))));break;case 19:Rl(t,e),Ml(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Ol(e,r)));case 30:case 21:}}function Ml(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(pl(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var i=n.stateNode;vl(e,ml(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(xt(s,""),n.flags&=-33),vl(e,ml(e),s);break;case 3:case 4:var a=n.stateNode.containerInfo;gl(e,ml(e),a);break;default:throw Error(o(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ll(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ll(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Vl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)kl(e,t.alternate,t),t=t.sibling}function jl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:al(4,t,t.return),jl(t);break;case 1:hl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),jl(t);break;case 27:wh(t.stateNode);case 26:case 5:hl(t,t.return),jl(t);break;case 22:null===t.memoizedState&&jl(t);break;default:jl(t)}e=e.sibling}}function Fl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:Fl(i,s,n),ol(4,s);break;case 1:if(Fl(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){uu(r,r.return,c)}if(null!==(i=(r=s).updateQueue)){var a=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)hs(l[i],a)}catch(c){uu(r,r.return,c)}}n&&64&o&&ll(s),ul(s,s.return);break;case 27:yl(s);case 26:case 5:Fl(i,s,n),n&&null===r&&4&o&&dl(s),ul(s,s.return);break;case 12:Fl(i,s,n);break;case 13:Fl(i,s,n),n&&4&o&&Nl(i,s);break;case 22:null===s.memoizedState&&Fl(i,s,n),ul(s,s.return);break;case 30:break;default:Fl(i,s,n)}t=t.sibling}}function Ul(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Pi(n))}function zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Pi(e))}function ql(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Bl(e,t,n,r),t=t.sibling}function Bl(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:ql(e,t,n,r),2048&i&&ol(9,t);break;case 1:case 13:default:ql(e,t,n,r);break;case 3:ql(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Pi(e)));break;case 12:if(2048&i){ql(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else ql(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,o=t.alternate,null!==t.memoizedState?2&s._visibility?ql(e,t,n,r):Hl(e,t):2&s._visibility?ql(e,t,n,r):(s._visibility|=2,$l(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&Ul(o,t);break;case 24:ql(e,t,n,r),2048&i&&zl(t.alternate,t)}}function $l(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,o=t,a=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:$l(s,o,a,l,i),ol(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?$l(s,o,a,l,i):Hl(s,o):(u._visibility|=2,$l(s,o,a,l,i)),i&&2048&c&&Ul(o.alternate,o);break;case 24:$l(s,o,a,l,i),i&&2048&c&&zl(o.alternate,o);break;default:$l(s,o,a,l,i)}t=t.sibling}}function Hl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Hl(n,r),2048&i&&Ul(r.alternate,r);break;case 24:Hl(n,r),2048&i&&zl(r.alternate,r);break;default:Hl(n,r)}t=t.sibling}}var Wl=8192;function Gl(e){if(e.subtreeFlags&Wl)for(e=e.child;null!==e;)Kl(e),e=e.sibling}function Kl(e){switch(e.tag){case 26:Gl(e),e.flags&Wl&&null!==e.memoizedState&&function(e,t,n){if(null===qh)throw Error(o(475));var r=qh;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Ih(n.href),s=e.querySelector(Nh(i));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=$h.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,void He(s);s=e.ownerDocument||e,n=Oh(n),(i=xh.get(i))&&Lh(n,i),He(s=s.createElement("link"));var a=s;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),eh(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=$h.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Dl,e.memoizedState,e.memoizedProps);break;case 5:default:Gl(e);break;case 3:case 4:var t=Dl;Dl=kh(e.stateNode.containerInfo),Gl(e),Dl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Wl,Wl=16777216,Gl(e),Wl=t):Gl(e))}}function Ql(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Yl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Tl=r,Zl(r,e)}Ql(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Xl(e),e=e.sibling}function Xl(e){switch(e.tag){case 0:case 11:case 15:Yl(e),2048&e.flags&&al(9,e,e.return);break;case 3:case 12:default:Yl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Jl(e)):Yl(e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Tl=r,Zl(r,e)}Ql(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:al(8,t,t.return),Jl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Jl(t));break;default:Jl(t)}e=e.sibling}}function Zl(e,t){for(;null!==Tl;){var n=Tl;switch(n.tag){case 0:case 11:case 15:al(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Pi(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Tl=r;else e:for(n=e;null!==Tl;){var i=(r=Tl).sibling,s=r.return;if(Sl(r),r===n){Tl=null;break e}if(null!==i){i.return=s,Tl=i;break e}Tl=s}}}var ec={getCacheForType:function(e){var t=Ci(Ri),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,rc=null,ic=null,sc=0,oc=0,ac=null,lc=!1,cc=!1,uc=!1,hc=0,dc=0,fc=0,pc=0,mc=0,gc=0,vc=0,yc=null,_c=null,bc=!1,wc=0,xc=1/0,Tc=null,kc=null,Sc=0,Cc=null,Ec=null,Ac=0,Ic=0,Nc=null,Oc=null,Rc=0,Dc=null;function Pc(){if(0!==(2&nc)&&0!==sc)return sc&-sc;if(null!==P.T){return 0!==Vi?Vi:Iu()}return Ne()}function Mc(){0===gc&&(gc=0===(536870912&sc)||si?xe():536870912);var e=ia.current;return null!==e&&(e.flags|=32),gc}function Lc(e,t,n){(e!==rc||2!==oc&&9!==oc)&&null===e.cancelPendingCommit||(Bc(e,0),Uc(e,sc,gc,!1)),Se(e,n),0!==(2&nc)&&e===rc||(e===rc&&(0===(2&nc)&&(pc|=n),4===dc&&Uc(e,sc,gc,!1)),xu(e))}function Vc(e,t,n){if(0!==(6&nc))throw Error(o(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||be(e,t),i=r?function(e,t){var n=nc;nc|=2;var r=Hc(),i=Wc();rc!==e||sc!==t?(Tc=null,xc=te()+500,Bc(e,t)):cc=be(e,t);e:for(;;)try{if(0!==oc&&null!==ic){t=ic;var s=ac;t:switch(oc){case 1:oc=0,ac=null,Zc(e,t,s,1);break;case 2:case 9:if(Qi(s)){oc=0,ac=null,Jc(t);break}t=function(){2!==oc&&9!==oc||rc!==e||(oc=7),xu(e)},s.then(t,t);break e;case 3:oc=7;break e;case 4:oc=5;break e;case 7:Qi(s)?(oc=0,ac=null,Jc(t)):(oc=0,ac=null,Zc(e,t,s,7));break;case 5:var a=null;switch(ic.tag){case 26:a=ic.memoizedState;case 5:case 27:var l=ic;if(!a||zh(a)){oc=0,ac=null;var c=l.sibling;if(null!==c)ic=c;else{var u=l.return;null!==u?(ic=u,eu(u)):ic=null}break t}}oc=0,ac=null,Zc(e,t,s,5);break;case 6:oc=0,ac=null,Zc(e,t,s,6);break;case 8:qc(),dc=6;break e;default:throw Error(o(462))}}Yc();break}catch(h){$c(e,h)}return yi=vi=null,P.H=r,P.A=i,nc=n,null!==ic?0:(rc=null,sc=0,Ar(),dc)}(e,t):Kc(e,t,!0),s=r;;){if(0===i){cc&&!r&&Uc(e,t,0,!1);break}if(n=e.current.alternate,!s||Fc(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=yc;var c=l.current.memoizedState.isDehydrated;if(c&&(Bc(l,a).flags|=256),2!==(a=Kc(l,a,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=s,pc|=s,i=4;break e}s=_c,_c=i,null!==s&&(null===_c?_c=s:_c.push.apply(_c,s))}i=a}if(s=!1,2!==i)continue}}if(1===i){Bc(e,0),Uc(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Uc(r,t,gc,!lc);break e;case 2:_c=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(i=wc+300-te())){if(Uc(r,t,gc,!lc),0!==_e(r,0,!0))break e;r.timeoutHandle=lh(jc.bind(null,r,n,_c,Tc,bc,t,gc,pc,vc,lc,s,2,-0,0),i)}else jc(r,n,_c,Tc,bc,t,gc,pc,vc,lc,s,0,-0,0)}break}i=Kc(e,t,!1),s=!1}xu(e)}function jc(e,t,n,r,i,s,a,l,c,u,h,d,f,p){if(e.timeoutHandle=-1,(8192&(d=t.subtreeFlags)||16785408===(16785408&d))&&(qh={stylesheets:null,count:0,unsuspend:Bh},Kl(t),null!==(d=function(){if(null===qh)throw Error(o(475));var e=qh;return e.stylesheets&&0===e.count&&Wh(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Wh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=d(nu.bind(null,e,t,s,n,r,i,a,l,c,h,1,f,p)),void Uc(e,s,a,!u);nu(e,t,s,n,r,i,a,l,c)}function Fc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Qn(s(),i))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Uc(e,t,n,r){t&=~mc,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-fe(i),o=1<<s;r[s]=-1,i&=~o}0!==n&&Ce(e,n,t)}function zc(){return 0!==(6&nc)||(Tu(0,!1),!1)}function qc(){if(null!==ic){if(0===oc)var e=ic.return;else yi=vi=null,Vs(e=ic),Qo=null,Yo=0,e=ic;for(;null!==e;)sl(e.alternate,e),e=e.return;ic=null}}function Bc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ch(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),qc(),rc=e,ic=n=jr(e.current,null),sc=t,oc=0,ac=null,lc=!1,cc=be(e,t),uc=!1,vc=gc=mc=pc=fc=dc=0,_c=yc=null,bc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-fe(r),s=1<<i;t|=e[i],r&=~s}return hc=t,Ar(),n}function $c(e,t){_s=null,P.H=Ho,t===Hi||t===Gi?(t=Zi(),oc=3):t===Wi?(t=Zi(),oc=4):oc=t===Ca?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,ac=t,null===ic&&(dc=1,wa(e,kr(t,e.current)))}function Hc(){var e=P.H;return P.H=Ho,null===e?Ho:e}function Wc(){var e=P.A;return P.A=ec,e}function Gc(){dc=4,lc||(4194048&sc)!==sc&&null!==ia.current||(cc=!0),0===(134217727&fc)&&0===(134217727&pc)||null===rc||Uc(rc,sc,gc,!1)}function Kc(e,t,n){var r=nc;nc|=2;var i=Hc(),s=Wc();rc===e&&sc===t||(Tc=null,Bc(e,t)),t=!1;var o=dc;e:for(;;)try{if(0!==oc&&null!==ic){var a=ic,l=ac;switch(oc){case 8:qc(),o=6;break e;case 3:case 2:case 9:case 6:null===ia.current&&(t=!0);var c=oc;if(oc=0,ac=null,Zc(e,a,l,c),n&&cc){o=0;break e}break;default:c=oc,oc=0,ac=null,Zc(e,a,l,c)}}Qc(),o=dc;break}catch(u){$c(e,u)}return t&&e.shellSuspendCounter++,yi=vi=null,nc=r,P.H=i,P.A=s,null===ic&&(rc=null,sc=0,Ar()),o}function Qc(){for(;null!==ic;)Xc(ic)}function Yc(){for(;null!==ic&&!Z();)Xc(ic)}function Xc(e){var t=Xa(e.alternate,e,hc);e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function Jc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=La(n,t,t.pendingProps,t.type,void 0,sc);break;case 11:t=La(n,t,t.pendingProps,t.type.render,t.ref,sc);break;case 5:Vs(t);default:sl(n,t),t=Xa(n,t=ic=Fr(t,hc),hc)}e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function Zc(e,t,n,r){yi=vi=null,Vs(t),Qo=null,Yo=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ti(t,n,i,!0),null!==(n=ia.current)){switch(n.tag){case 13:return null===sa?Gc():null===n.alternate&&0===dc&&(dc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Ki?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),hu(e,r,i)),!1;case 22:return n.flags|=65536,r===Ki?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),hu(e,r,i)),!1}throw Error(o(435,n.tag))}return hu(e,r,i),Gc(),!1}if(si)return null!==(t=ia.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==li&&mi(kr(e=Error(o(422),{cause:r}),n))):(r!==li&&mi(kr(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=kr(r,n),as(e,i=Ta(e.stateNode,r,i)),4!==dc&&(dc=2)),!1;var s=Error(o(520),{cause:r});if(s=kr(s,n),null===yc?yc=[s]:yc.push(s),4!==dc&&(dc=2),null===t)return!0;r=kr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,as(n,e=Ta(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===kc||!kc.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,Sa(i=ka(i),e,n,r),as(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,sc))return dc=1,wa(e,kr(n,e.current)),void(ic=null)}catch(s){if(null!==i)throw ic=i,s;return dc=1,wa(e,kr(n,e.current)),void(ic=null)}32768&t.flags?(si||1===r?e=!0:cc||0!==(536870912&sc)?e=!1:(lc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ia.current)&&13===r.tag&&(r.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=rl(t.alternate,t,hc);if(null!==n)return void(ic=n);if(null!==(t=t.sibling))return void(ic=t);ic=t=e}while(null!==t);0===dc&&(dc=5)}function tu(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(ic=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ic=e);ic=e=n}while(null!==e);dc=6,ic=null}function nu(e,t,n,r,i,s,a,l,c){e.cancelPendingCommit=null;do{au()}while(0!==Sc);if(0!==(6&nc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-fe(n),h=1<<u;a[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var f=d[u];null!==f&&(f.lane&=-536870913)}n&=~h}0!==r&&Ce(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(o&~t))}(e,n,s|=Er,a,l,c),e===rc&&(ic=rc=null,sc=0),Ec=t,Cc=e,Ac=n,Ic=s,Nc=i,Oc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,X(se,function(){return lu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=P.T,P.T=null,i=M.p,M.p=2,a=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,th=nd,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(g){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==s||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nh={focusedElem:e,selectionRange:n},nd=!1,Tl=t;null!==Tl;)if(e=(t=Tl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,Tl=e;else for(;null!==Tl;){switch(s=(t=Tl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var m=ga(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(v){uu(n,n.return,v)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))mh(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":mh(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,Tl=e;break}Tl=t.return}}(e,t)}finally{nc=a,M.p=i,P.T=r}}Sc=1,ru(),iu(),su()}}function ru(){if(1===Sc){Sc=0;var e=Cc,t=Ec,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=P.T,P.T=null;var r=M.p;M.p=2;var i=nc;nc|=4;try{Pl(t,e);var s=nh,o=er(e.containerInfo),a=s.focusedElem,l=s.selectionRange;if(o!==a&&a&&a.ownerDocument&&Zn(a.ownerDocument.documentElement,a)){if(null!==l&&tr(a)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var h=a.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var f=d.getSelection(),p=a.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(o=g,g=m,m=o);var v=Jn(a,m),y=Jn(a,g);if(v&&y&&(1!==f.rangeCount||f.anchorNode!==v.node||f.anchorOffset!==v.offset||f.focusNode!==y.node||f.focusOffset!==y.offset)){var _=h.createRange();_.setStart(v.node,v.offset),f.removeAllRanges(),m>g?(f.addRange(_),f.extend(y.node,y.offset)):(_.setEnd(y.node,y.offset),f.addRange(_))}}}}for(h=[],f=a;f=f.parentNode;)1===f.nodeType&&h.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<h.length;a++){var b=h[a];b.element.scrollLeft=b.left,b.element.scrollTop=b.top}}nd=!!th,nh=th=null}finally{nc=i,M.p=r,P.T=n}}e.current=t,Sc=2}}function iu(){if(2===Sc){Sc=0;var e=Cc,t=Ec,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=P.T,P.T=null;var r=M.p;M.p=2;var i=nc;nc|=4;try{kl(e,t.alternate,t)}finally{nc=i,M.p=r,P.T=n}}Sc=3}}function su(){if(4===Sc||3===Sc){Sc=0,ee();var e=Cc,t=Ec,n=Ac,r=Oc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Sc=5:(Sc=0,Ec=Cc=null,ou(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(kc=null),Ie(n),t=t.stateNode,he&&"function"===typeof he.onCommitFiberRoot)try{he.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=P.T,i=M.p,M.p=2,P.T=null;try{for(var s=e.onRecoverableError,o=0;o<r.length;o++){var a=r[o];s(a.value,{componentStack:a.stack})}}finally{P.T=t,M.p=i}}0!==(3&Ac)&&au(),xu(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Dc?Rc++:(Rc=0,Dc=e):Rc=0,Tu(0,!1)}}function ou(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Pi(t)))}function au(e){return ru(),iu(),su(),lu()}function lu(){if(5!==Sc)return!1;var e=Cc,t=Ic;Ic=0;var n=Ie(Ac),r=P.T,i=M.p;try{M.p=32>n?32:n,P.T=null,n=Nc,Nc=null;var s=Cc,a=Ac;if(Sc=0,Ec=Cc=null,Ac=0,0!==(6&nc))throw Error(o(331));var l=nc;if(nc|=4,Xl(s.current),Bl(s,s.current,a,n),nc=l,Tu(0,!1),he&&"function"===typeof he.onPostCommitFiberRoot)try{he.onPostCommitFiberRoot(ue,s)}catch(c){}return!0}finally{M.p=i,P.T=r,ou(e,t)}}function cu(e,t,n){t=kr(n,t),null!==(e=ss(e,t=Ta(e.stateNode,t,2),2))&&(Se(e,2),xu(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===kc||!kc.has(r))){e=kr(n,e),null!==(r=ss(t,n=ka(2),2))&&(Sa(n,r,t,e),Se(r,2),xu(r));break}}t=t.return}}function hu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(uc=!0,i.add(n),e=du.bind(null,e,t,n),t.then(e,e))}function du(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(sc&n)===n&&(4===dc||3===dc&&(62914560&sc)===sc&&300>te()-wc?0===(2&nc)&&Bc(e,0):mc|=n,vc===sc&&(vc=0)),xu(e)}function fu(e,t){0===t&&(t=Te()),null!==(e=Or(e,t))&&(Se(e,t),xu(e))}function pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),fu(e,n)}function mu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),fu(e,n)}var gu=null,vu=null,yu=!1,_u=!1,bu=!1,wu=0;function xu(e){e!==vu&&null===e.next&&(null===vu?gu=vu=e:vu=vu.next=e),_u=!0,yu||(yu=!0,hh(function(){0!==(6&nc)?X(re,ku):Su()}))}function Tu(e,t){if(!bu&&_u){bu=!0;do{for(var n=!1,r=gu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var o=r.suspendedLanes,a=r.pingedLanes;s=(1<<31-fe(42|e)+1)-1,s=201326741&(s&=i&~(o&~a))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Au(r,s))}else s=sc,0===(3&(s=_e(r,r===rc?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||be(r,s)||(n=!0,Au(r,s));r=r.next}}while(n);bu=!1}}function ku(){Su()}function Su(){_u=yu=!1;var e=0;0!==wu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ah&&(ah=e,!0);return ah=null,!1}()&&(e=wu),wu=0);for(var t=te(),n=null,r=gu;null!==r;){var i=r.next,s=Cu(r,t);0===s?(r.next=null,null===n?gu=i:n.next=i,null===i&&(vu=n)):(n=r,(0!==e||0!==(3&s))&&(_u=!0)),r=i}Tu(e,!1)}function Cu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var o=31-fe(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=we(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(n=sc,n=_e(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===oc||9===oc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&J(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||be(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&J(r),Ie(n)){case 2:case 8:n=ie;break;case 32:default:n=se;break;case 268435456:n=ae}return r=Eu.bind(null,e),n=X(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&J(r),e.callbackPriority=2,e.callbackNode=null,2}function Eu(e,t){if(0!==Sc&&5!==Sc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(au()&&e.callbackNode!==n)return null;var r=sc;return 0===(r=_e(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Vc(e,r,t),Cu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Eu.bind(null,e):null)}function Au(e,t){if(au())return null;Vc(e,t,!0)}function Iu(){return 0===wu&&(wu=xe()),wu}function Nu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:It(""+e)}function Ou(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ru=0;Ru<wr.length;Ru++){var Du=wr[Ru];xr(Du.toLowerCase(),"on"+(Du[0].toUpperCase()+Du.slice(1)))}xr(fr,"onAnimationEnd"),xr(pr,"onAnimationIteration"),xr(mr,"onAnimationStart"),xr("dblclick","onDoubleClick"),xr("focusin","onFocus"),xr("focusout","onBlur"),xr(gr,"onTransitionRun"),xr(vr,"onTransitionStart"),xr(yr,"onTransitionCancel"),xr(_r,"onTransitionEnd"),Qe("onMouseEnter",["mouseout","mouseover"]),Qe("onMouseLeave",["mouseout","mouseover"]),Qe("onPointerEnter",["pointerout","pointerover"]),Qe("onPointerLeave",["pointerout","pointerover"]),Ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pu));function Lu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(u){va(u)}i.currentTarget=null,s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(u){va(u)}i.currentTarget=null,s=l}}}}function Vu(e,t){var n=t[Me];void 0===n&&(n=t[Me]=new Set);var r=e+"__bubble";n.has(r)||(zu(t,e,2,!1),n.add(r))}function ju(e,t,n){var r=0;t&&(r|=4),zu(n,e,r,t)}var Fu="_reactListening"+Math.random().toString(36).slice(2);function Uu(e){if(!e[Fu]){e[Fu]=!0,We.forEach(function(t){"selectionchange"!==t&&(Mu.has(t)||ju(t,!1,e),ju(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fu]||(t[Fu]=!0,ju("selectionchange",!1,t))}}function zu(e,t,n,r){switch(cd(t)){case 2:var i=rd;break;case 8:i=id;break;default:i=sd}n=i.bind(null,t,n,e),i=void 0,!Ft||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qu(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===i)return;o=o.return}for(;null!==a;){if(null===(o=ze(a)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=s=o;continue e}a=a.parentNode}}r=r.return}Lt(function(){var r=s,i=Ot(n),o=[];e:{var a=br.get(e);if(void 0!==a){var c=Zt,u=e;switch(e){case"keypress":if(0===Ht(n))break e;case"keydown":case"keyup":c=mn;break;case"focusin":u="focus",c=on;break;case"focusout":u="blur",c=on;break;case"beforeblur":case"afterblur":c=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=vn;break;case fr:case pr:case mr:c=an;break;case _r:c=yn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=_n;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=bn}var h=0!==(4&t),d=!h&&("scroll"===e||"scrollend"===e),f=h?null!==a?a+"Capture":null:a;h=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Vt(m,f))&&h.push(Bu(m,g,p)),d)break;m=m.return}0<h.length&&(a=new c(a,u,null,n,i),o.push({event:a,listeners:h}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===Nt||!(u=n.relatedTarget||n.fromElement)||!ze(u)&&!u[Pe])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?ze(u):null)&&(d=l(u),h=u.tag,u!==d||5!==h&&27!==h&&6!==h)&&(u=null)):(c=null,u=r),c!==u)){if(h=rn,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(h=gn,g="onPointerLeave",f="onPointerEnter",m="pointer"),d=null==c?a:Be(c),p=null==u?a:Be(u),(a=new h(g,m+"leave",c,n,i)).target=d,a.relatedTarget=p,g=null,ze(i)===r&&((h=new h(f,m+"enter",u,n,i)).target=p,h.relatedTarget=d,g=h),d=g,c&&u)e:{for(f=u,m=0,p=h=c;p;p=Hu(p))m++;for(p=0,g=f;g;g=Hu(g))p++;for(;0<m-p;)h=Hu(h),m--;for(;0<p-m;)f=Hu(f),p--;for(;m--;){if(h===f||null!==f&&h===f.alternate)break e;h=Hu(h),f=Hu(f)}h=null}else h=null;null!==c&&Wu(o,a,c,h,!1),null!==u&&null!==d&&Wu(o,d,u,h,!0)}if("select"===(c=(a=r?Be(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var v=jn;else if(Rn(a))if(Fn)v=Kn;else{v=Wn;var y=Hn}else!(c=a.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&Ct(r.elementType)&&(v=jn):v=Gn;switch(v&&(v=v(e,r))?Dn(o,v,n,i):(y&&y(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&yt(a,"number",a.value)),y=r?Be(r):window,e){case"focusin":(Rn(y)||"true"===y.contentEditable)&&(rr=y,ir=r,sr=null);break;case"focusout":sr=ir=rr=null;break;case"mousedown":or=!0;break;case"contextmenu":case"mouseup":case"dragend":or=!1,ar(o,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":ar(o,n,i)}var _;if(xn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Nn?An(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Sn&&"ko"!==n.locale&&(Nn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Nn&&(_=$t()):(qt="value"in(zt=i)?zt.value:zt.textContent,Nn=!0)),0<(y=$u(r,b)).length&&(b=new cn(b,e,null,n,i),o.push({event:b,listeners:y}),_?b.data=_:null!==(_=In(n))&&(b.data=_))),(_=kn?function(e,t){switch(e){case"compositionend":return In(t);case"keypress":return 32!==t.which?null:(En=!0,Cn);case"textInput":return(e=t.data)===Cn&&En?null:e;default:return null}}(e,n):function(e,t){if(Nn)return"compositionend"===e||!xn&&An(e,t)?(e=$t(),Bt=qt=zt=null,Nn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(b=$u(r,"onBeforeInput")).length&&(y=new cn("onBeforeInput","beforeinput",null,n,i),o.push({event:y,listeners:b}),y.data=_)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Nu((i[De]||null).action),o=r.submitter;o&&null!==(t=(t=o[De]||null)?Nu(t.formAction):o.getAttribute("formAction"))&&(s=t,o=null);var a=new Zt("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==wu){var e=o?Ou(i,o):new FormData(i);Oo(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(a.preventDefault(),e=o?Ou(i,o):new FormData(i),Oo(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(o,e,r,n,i)}Lu(o,t)})}function Bu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $u(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Vt(e,n))&&r.unshift(Bu(e,i,s)),null!=(i=Vt(e,t))&&r.push(Bu(e,i,s))),3===e.tag)return r;e=e.return}return[]}function Hu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Wu(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,i?null!=(c=Vt(n,s))&&o.unshift(Bu(n,c,l)):i||null!=(c=Vt(n,s))&&o.push(Bu(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Gu=/\r\n?/g,Ku=/\u0000|\uFFFD/g;function Qu(e){return("string"===typeof e?e:""+e).replace(Gu,"\n").replace(Ku,"")}function Yu(e,t){return t=Qu(t),Qu(e)===t}function Xu(){}function Ju(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||xt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&xt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":St(e,r,s);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&Ju(e,t,"name",i.name,i,null),Ju(e,t,"formEncType",i.formEncType,i,null),Ju(e,t,"formMethod",i.formMethod,i,null),Ju(e,t,"formTarget",i.formTarget,i,null)):(Ju(e,t,"encType",i.encType,i,null),Ju(e,t,"method",i.method,i,null),Ju(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Xu);break;case"onScroll":null!=r&&Vu("scroll",e);break;case"onScrollEnd":null!=r&&Vu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=It(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Vu("beforetoggle",e),Vu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Et.get(n)||n,r)}}function Zu(e,t,n,r,i,s){switch(n){case"style":St(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?xt(e,r):("number"===typeof r||"bigint"===typeof r)&&xt(e,""+r);break;case"onScroll":null!=r&&Vu("scroll",e);break;case"onScrollEnd":null!=r&&Vu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Xu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ge.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[De]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function eh(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Vu("error",e),Vu("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ju(e,t,r,a,n,null)}}return s&&Ju(e,t,"srcSet",n.srcSet,n,null),void(i&&Ju(e,t,"src",n.src,n,null));case"input":Vu("invalid",e);var l=r=a=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(null!=h)switch(i){case"name":s=h;break;case"type":a=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(o(137,t));break;default:Ju(e,t,i,h,n,null)}}return vt(e,r,l,c,u,a,s,!1),void ht(e);case"select":for(s in Vu("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Ju(e,t,s,l,n,null)}return t=r,n=a,e.multiple=!!i,void(null!=t?_t(e,!!i,t,!1):null!=n&&_t(e,!!i,n,!0));case"textarea":for(a in Vu("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:Ju(e,t,a,l,n,null)}return wt(e,i,s,r),void ht(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Ju(e,t,c,i,n,null);return;case"dialog":Vu("beforetoggle",e),Vu("toggle",e),Vu("cancel",e),Vu("close",e);break;case"iframe":case"object":Vu("load",e);break;case"video":case"audio":for(i=0;i<Pu.length;i++)Vu(Pu[i],e);break;case"image":Vu("error",e),Vu("load",e);break;case"details":Vu("toggle",e);break;case"embed":case"source":case"link":Vu("error",e),Vu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ju(e,t,u,i,n,null)}return;default:if(Ct(t)){for(h in n)n.hasOwnProperty(h)&&(void 0!==(i=n[h])&&Zu(e,t,h,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Ju(e,t,l,i,n,null))}var th=null,nh=null;function rh(e){return 9===e.nodeType?e:e.ownerDocument}function ih(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function oh(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ah=null;var lh="function"===typeof setTimeout?setTimeout:void 0,ch="function"===typeof clearTimeout?clearTimeout:void 0,uh="function"===typeof Promise?Promise:void 0,hh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof uh?function(e){return uh.resolve(null).then(e).catch(dh)}:lh;function dh(e){setTimeout(function(){throw e})}function fh(e){return"head"===e}function ph(e,t){var n=t,r=0,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<r&&8>r){n=r;var o=e.ownerDocument;if(1&n&&wh(o.documentElement),2&n&&wh(o.body),4&n)for(wh(n=o.head),o=n.firstChild;o;){var a=o.nextSibling,l=o.nodeName;o[Fe]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=a}}if(0===i)return e.removeChild(s),void Ed(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);Ed(t)}function mh(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":mh(n),Ue(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gh(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var yh=null;function _h(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function bh(e,t,n){switch(t=rh(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function wh(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ue(e)}var xh=new Map,Th=new Set;function kh(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Sh=M.d;M.d={f:function(){var e=Sh.f(),t=zc();return e||t},r:function(e){var t=qe(e);null!==t&&5===t.tag&&"form"===t.type?Do(t):Sh.r(e)},D:function(e){Sh.D(e),Eh("dns-prefetch",e,null)},C:function(e,t){Sh.C(e,t),Eh("preconnect",e,t)},L:function(e,t,n){Sh.L(e,t,n);var r=Ch;if(r&&e&&t){var i='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+mt(n.imageSizes)+'"]')):i+='[href="'+mt(e)+'"]';var s=i;switch(t){case"style":s=Ih(e);break;case"script":s=Rh(e)}xh.has(s)||(e=d({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),xh.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Nh(s))||"script"===t&&r.querySelector(Dh(s))||(eh(t=r.createElement("link"),"link",e),He(t),r.head.appendChild(t)))}},m:function(e,t){Sh.m(e,t);var n=Ch;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Rh(e)}if(!xh.has(s)&&(e=d({rel:"modulepreload",href:e},t),xh.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Dh(s)))return}eh(r=n.createElement("link"),"link",e),He(r),n.head.appendChild(r)}}},X:function(e,t){Sh.X(e,t);var n=Ch;if(n&&e){var r=$e(n).hoistableScripts,i=Rh(e),s=r.get(i);s||((s=n.querySelector(Dh(i)))||(e=d({src:e,async:!0},t),(t=xh.get(i))&&Vh(e,t),He(s=n.createElement("script")),eh(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){Sh.S(e,t,n);var r=Ch;if(r&&e){var i=$e(r).hoistableStyles,s=Ih(e);t=t||"default";var o=i.get(s);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(Nh(s)))a.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},n),(n=xh.get(s))&&Lh(e,n);var l=o=r.createElement("link");He(l),eh(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Mh(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:a},i.set(s,o)}}},M:function(e,t){Sh.M(e,t);var n=Ch;if(n&&e){var r=$e(n).hoistableScripts,i=Rh(e),s=r.get(i);s||((s=n.querySelector(Dh(i)))||(e=d({src:e,async:!0,type:"module"},t),(t=xh.get(i))&&Vh(e,t),He(s=n.createElement("script")),eh(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Ch="undefined"===typeof document?null:document;function Eh(e,t,n){var r=Ch;if(r&&"string"===typeof t&&t){var i=mt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Th.has(i)||(Th.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(eh(t=r.createElement("link"),"link",e),He(t),r.head.appendChild(t)))}}function Ah(e,t,n,r){var i,s,a,l,c=(c=$.current)?kh(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Ih(n.href),(r=(n=$e(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Ih(n.href);var u=$e(c).hoistableStyles,h=u.get(e);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=c.querySelector(Nh(e)))&&!u._p&&(h.instance=u,h.state.loading=5),xh.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},xh.set(e,n),u||(i=c,s=e,a=n,l=h.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),eh(s,"link",a),He(s),i.head.appendChild(s))))),t&&null===r)throw Error(o(528,""));return h}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Rh(n),(r=(n=$e(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Ih(e){return'href="'+mt(e)+'"'}function Nh(e){return'link[rel="stylesheet"]['+e+"]"}function Oh(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function Rh(e){return'[src="'+mt(e)+'"]'}function Dh(e){return"script[async]"+e}function Ph(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,He(r),r;var i=d({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return He(r=(e.ownerDocument||e).createElement("style")),eh(r,"style",i),Mh(r,n.precedence,e),t.instance=r;case"stylesheet":i=Ih(n.href);var s=e.querySelector(Nh(i));if(s)return t.state.loading|=4,t.instance=s,He(s),s;r=Oh(n),(i=xh.get(i))&&Lh(r,i),He(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),eh(s,"link",r),t.state.loading|=4,Mh(s,n.precedence,e),t.instance=s;case"script":return s=Rh(n.src),(i=e.querySelector(Dh(s)))?(t.instance=i,He(i),i):(r=n,(i=xh.get(s))&&Vh(r=d({},n),i),He(i=(e=e.ownerDocument||e).createElement("script")),eh(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Mh(r,n.precedence,e));return t.instance}function Mh(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===t)s=a;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Lh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Vh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var jh=null;function Fh(e,t,n){if(null===jh){var r=new Map,i=jh=new Map;i.set(n,r)}else(r=(i=jh).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[Fe]||s[Re]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var o=s.getAttribute(t)||"";o=e+o;var a=r.get(o);a?a.push(s):r.set(o,[s])}}return r}function Uh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function zh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var qh=null;function Bh(){}function $h(){if(this.count--,0===this.count)if(this.stylesheets)Wh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Hh=null;function Wh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Hh=new Map,t.forEach(Gh,e),Hh=null,$h.call(e))}function Gh(e,t){if(!(4&t.state.loading)){var n=Hh.get(e);if(n)var r=n.get(null);else{n=new Map,Hh.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var o=i[s];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=t.instance).getAttribute("data-precedence"),(s=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=$h.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Kh={$$typeof:w,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function Qh(e,t,n,r,i,s,o,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ke(0),this.hiddenUpdates=ke(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Yh(e,t,n,r,i,s,o,a,l,c,u,h){return e=new Qh(e,t,n,o,a,l,c,h),t=1,!0===s&&(t|=24),s=Lr(3,null,null,t),e.current=s,s.stateNode=e,(t=Di()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},ns(s),e}function Xh(e){return e?e=Pr:Pr}function Jh(e,t,n,r,i,s){i=Xh(i),null===r.context?r.context=i:r.pendingContext=i,(r=is(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=ss(e,r,t))&&(Lc(n,0,t),os(n,e,t))}function Zh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function ed(e,t){Zh(e,t),(e=e.alternate)&&Zh(e,t)}function td(e){if(13===e.tag){var t=Or(e,67108864);null!==t&&Lc(t,0,67108864),ed(e,67108864)}}var nd=!0;function rd(e,t,n,r){var i=P.T;P.T=null;var s=M.p;try{M.p=2,sd(e,t,n,r)}finally{M.p=s,P.T=i}}function id(e,t,n,r){var i=P.T;P.T=null;var s=M.p;try{M.p=8,sd(e,t,n,r)}finally{M.p=s,P.T=i}}function sd(e,t,n,r){if(nd){var i=od(r);if(null===i)qu(e,t,r,ad,n),yd(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return hd=_d(hd,e,t,n,r,i),!0;case"dragenter":return dd=_d(dd,e,t,n,r,i),!0;case"mouseover":return fd=_d(fd,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return pd.set(s,_d(pd.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,md.set(s,_d(md.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(yd(e,r),4&t&&-1<vd.indexOf(e)){for(;null!==i;){var s=qe(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var o=ye(s.pendingLanes);if(0!==o){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-fe(o);a.entanglements[1]|=l,o&=~l}xu(s),0===(6&nc)&&(xc=te()+500,Tu(0,!1))}}break;case 13:null!==(a=Or(s,2))&&Lc(a,0,2),zc(),ed(s,2)}if(null===(s=od(r))&&qu(e,t,r,ad,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else qu(e,t,r,null,n)}}function od(e){return ld(e=Ot(e))}var ad=null;function ld(e){if(ad=null,null!==(e=ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ad=e,null}function cd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case se:case oe:return 32;case ae:return 268435456;default:return 32}default:return 32}}var ud=!1,hd=null,dd=null,fd=null,pd=new Map,md=new Map,gd=[],vd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yd(e,t){switch(e){case"focusin":case"focusout":hd=null;break;case"dragenter":case"dragleave":dd=null;break;case"mouseover":case"mouseout":fd=null;break;case"pointerover":case"pointerout":pd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":md.delete(t.pointerId)}}function _d(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=qe(t))&&td(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function bd(e){var t=ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=M.p;try{return M.p=e,t()}finally{M.p=n}}(e.priority,function(){if(13===n.tag){var e=Pc();e=Ae(e);var t=Or(n,e);null!==t&&Lc(t,0,e),ed(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function wd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=od(e.nativeEvent);if(null!==n)return null!==(t=qe(n))&&td(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Nt=r,n.target.dispatchEvent(r),Nt=null,t.shift()}return!0}function xd(e,t,n){wd(e)&&n.delete(t)}function Td(){ud=!1,null!==hd&&wd(hd)&&(hd=null),null!==dd&&wd(dd)&&(dd=null),null!==fd&&wd(fd)&&(fd=null),pd.forEach(xd),md.forEach(xd)}function kd(e,t){e.blockedOn===t&&(e.blockedOn=null,ud||(ud=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Td)))}var Sd=null;function Cd(e){Sd!==e&&(Sd=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Sd===e&&(Sd=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===ld(r||n))continue;break}var s=qe(n);null!==s&&(e.splice(t,3),t-=3,Oo(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Ed(e){function t(t){return kd(t,e)}null!==hd&&kd(hd,e),null!==dd&&kd(dd,e),null!==fd&&kd(fd,e),pd.forEach(t),md.forEach(t);for(var n=0;n<gd.length;n++){var r=gd[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<gd.length&&null===(n=gd[0]).blockedOn;)bd(n),null===n.blockedOn&&gd.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],o=i[De]||null;if("function"===typeof s)o||Cd(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(i=s,o=s[De]||null)a=o.formAction;else if(null!==ld(i))continue}else a=o.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),Cd(n)}}}function Ad(e){this._internalRoot=e}function Id(e){this._internalRoot=e}Id.prototype.render=Ad.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Jh(t.current,Pc(),e,t,null,null)},Id.prototype.unmount=Ad.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Jh(e.current,2,null,e,null,null),zc(),t[Pe]=null}},Id.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ne();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gd.length&&0!==t&&t<gd[n].priority;n++);gd.splice(n,0,e),0===n&&bd(e)}};var Nd=i.version;if("19.1.0"!==Nd)throw Error(o(527,Nd,"19.1.0"));M.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return u(i),e;if(s===r)return u(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Od={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rd.isDisabled&&Rd.supportsFiber)try{ue=Rd.inject(Od),he=Rd}catch(Pd){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var n=!1,r="",i=ya,s=_a,l=ba;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Yh(e,1,!1,null,0,n,r,i,s,l,0,null),e[Pe]=t.current,Uu(e),new Ad(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(o(299));var r=!1,i="",s=ya,l=_a,c=ba,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Yh(e,1,!0,t,0,r,i,s,l,c,0,u)).context=Xh(null),n=t.current,(i=is(r=Ae(r=Pc()))).callback=null,ss(n,i,r),n=r,t.current.lanes=n,Se(t,n),xu(t),e[Pe]=t.current,Uu(e),new Id(t)},t.version="19.1.0"},43:(e,t,n)=>{"use strict";e.exports=n(288)},45:(e,t,n)=>{var r=n(738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},79:e=>{e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},122:(e,t,n)=>{var r=n(79);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},156:e=>{e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,s,o,a=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports},288:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=_.prototype=new y;b.constructor=_,m(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x={H:null,A:null,T:null,S:null,V:null},T=Object.prototype.hasOwnProperty;function k(e,t,r,i,s,o){return r=o.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:o}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(){}function I(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case d:return I((u=e._init)(e._payload),t,i,s,o)}}if(u)return o=o(e),u=""===s?"."+E(e,0):s,w(o)?(i="",null!=u&&(i=u.replace(C,"$&/")+"/"),I(o,t,i,"",function(e){return e})):null!=o&&(S(o)&&(l=o,c=i+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+u,o=k(l.type,c,void 0,0,0,l.props)),t.push(o)),1;u=0;var h,p=""===s?".":s+":";if(w(e))for(var m=0;m<e.length;m++)u+=I(s=e[m],t,i,a=p+E(s,m),o);else if("function"===typeof(m=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=f&&h[f]||h["@@iterator"])?h:null))for(e=m.call(e),m=0;!(s=e.next()).done;)u+=I(s=s.value,t,i,a=p+E(s,m++),o);else if("object"===a){if("function"===typeof e.then)return I(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(A,A):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function N(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function D(){}t.Children={map:N,forEach:function(e,t,n){N(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return N(e,function(){t++}),t},toArray:function(e){return N(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return x.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!T.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var o=Array(s),a=0;a<s;a++)o[a]=arguments[a+2];r.children=o}return k(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)T.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return k(e,s,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=x.T,n={};x.T=n;try{var r=e(),i=x.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(D,R)}catch(s){R(s)}finally{x.T=t}},t.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},t.use=function(e){return x.H.use(e)},t.useActionState=function(e,t,n){return x.H.useActionState(e,t,n)},t.useCallback=function(e,t){return x.H.useCallback(e,t)},t.useContext=function(e){return x.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return x.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=x.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return x.H.useId()},t.useImperativeHandle=function(e,t,n){return x.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return x.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return x.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return x.H.useMemo(e,t)},t.useOptimistic=function(e,t){return x.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return x.H.useReducer(e,t,n)},t.useRef=function(e){return x.H.useRef(e)},t.useState=function(e){return x.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return x.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return x.H.useTransition()},t.version="19.1.0"},383:e=>{e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},391:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{var r=n(736);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},672:(e,t,n)=>{"use strict";var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},715:(e,t,n)=>{var r=n(987),i=n(156),s=n(122),o=n(752);e.exports=function(e,t){return r(e)||i(e,t)||s(e,t)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},736:(e,t,n)=>{var r=n(738).default,i=n(45);e.exports=function(e){var t=i(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},752:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},799:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element");function r(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}Symbol.for("react.fragment"),t.jsx=r,t.jsxs=r},853:(e,t,n)=>{"use strict";e.exports=n(896)},896:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v=!1,y="function"===typeof setTimeout?setTimeout:null,_="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,k||(k=!0,T());else{var t=r(u);null!==t&&R(x,t.startTime-e)}}var T,k=!1,S=-1,C=5,E=-1;function A(){return!!v||!(t.unstable_now()-E<C)}function I(){if(v=!1,k){var e=t.unstable_now();E=e;var n=!0;try{e:{m=!1,g&&(g=!1,_(S),S=-1),p=!0;var s=f;try{t:{for(w(e),d=r(c);null!==d&&!(d.expirationTime>e&&A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){d.callback=a,w(e),n=!0;break t}d===r(c)&&i(c),w(e)}else i(c);d=r(c)}if(null!==d)n=!0;else{var l=r(u);null!==l&&R(x,l.startTime-e),n=!1}}break e}finally{d=null,f=s,p=!1}n=void 0}}finally{n?T():k=!1}}}if("function"===typeof b)T=function(){b(I)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,O=N.port2;N.port1.onmessage=I,T=function(){O.postMessage(null)}}else T=function(){y(I,0)};function R(e,n){S=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){v=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(_(S),S=-1):g=!0,R(x,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,k||(k=!0,T()))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},960:(e,t,n)=>{"use strict";e.exports=n(799)},987:e=>{e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},998:function(e,t,n){!function(e,t,n,r){"use strict";var i=function(e,t,n){return{endTime:t,insertTime:n,type:"exponentialRampToValue",value:e}},s=function(e,t,n){return{endTime:t,insertTime:n,type:"linearRampToValue",value:e}},o=function(e,t){return{startTime:t,type:"setValue",value:e}},a=function(e,t,n){return{duration:n,startTime:t,type:"setValueCurve",values:e}},l=function(e,t,n){var r=n.startTime,i=n.target,s=n.timeConstant;return i+(t-i)*Math.exp((r-e)/s)},c=function(e){return"exponentialRampToValue"===e.type},u=function(e){return"linearRampToValue"===e.type},h=function(e){return c(e)||u(e)},d=function(e){return"setValue"===e.type},f=function(e){return"setValueCurve"===e.type},p=function(e,t,n,r){var i=e[t];return void 0===i?r:h(i)||d(i)?i.value:f(i)?i.values[i.values.length-1]:l(n,p(e,t-1,i.startTime,r),i)},m=function(e,t,n,r,i){return void 0===n?[r.insertTime,i]:h(n)?[n.endTime,n.value]:d(n)?[n.startTime,n.value]:f(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,p(e,t-1,n.startTime,i)]},g=function(e){return"cancelAndHold"===e.type},v=function(e){return"cancelScheduledValues"===e.type},y=function(e){return g(e)||v(e)?e.cancelTime:c(e)||u(e)?e.endTime:e.startTime},_=function(e,t,n,r){var i=r.endTime,s=r.value;return n===s?s:0<n&&0<s||n<0&&s<0?n*Math.pow(s/n,(e-t)/(i-t)):0},b=function(e,t,n,r){return n+(e-t)/(r.endTime-t)*(r.value-n)},w=function(e,t){var n=Math.floor(t),r=Math.ceil(t);return n===r?e[n]:(1-(t-n))*e[n]+(1-(r-t))*e[r]},x=function(e,t){var n=t.duration,r=t.startTime,i=t.values,s=(e-r)/n*(i.length-1);return w(i,s)},T=function(e){return"setTarget"===e.type},k=function(){function e(t){n(this,e),this._automationEvents=[],this._currenTime=0,this._defaultValue=t}return r(e,[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(e){var t=y(e);if(g(e)||v(e)){var n=this._automationEvents.findIndex(function(n){return v(e)&&f(n)?n.startTime+n.duration>=t:y(n)>=t}),r=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),g(e)){var l=this._automationEvents[this._automationEvents.length-1];if(void 0!==r&&h(r)){if(void 0!==l&&T(l))throw new Error("The internal list is malformed.");var d=void 0===l?r.insertTime:f(l)?l.startTime+l.duration:y(l),p=void 0===l?this._defaultValue:f(l)?l.values[l.values.length-1]:l.value,m=c(r)?_(t,d,p,r):b(t,d,p,r),w=c(r)?i(m,t,this._currenTime):s(m,t,this._currenTime);this._automationEvents.push(w)}if(void 0!==l&&T(l)&&this._automationEvents.push(o(this.getValue(t),t)),void 0!==l&&f(l)&&l.startTime+l.duration>t){var x=t-l.startTime,k=(l.values.length-1)/l.duration,S=Math.max(2,1+Math.ceil(x*k)),C=x/(S-1)*k,E=l.values.slice(0,S);if(C<1)for(var A=1;A<S;A+=1){var I=C*A%1;E[A]=l.values[A-1]*(1-I)+l.values[A]*I}this._automationEvents[this._automationEvents.length-1]=a(E,l.startTime,x)}}}else{var N=this._automationEvents.findIndex(function(e){return y(e)>t}),O=-1===N?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[N-1];if(void 0!==O&&f(O)&&y(O)+O.duration>t)return!1;var R=c(e)?i(e.value,e.endTime,this._currenTime):u(e)?s(e.value,t,this._currenTime):e;if(-1===N)this._automationEvents.push(R);else{if(f(e)&&t+e.duration>y(this._automationEvents[N]))return!1;this._automationEvents.splice(N,0,R)}}return!0}},{key:"flush",value:function(e){var t=this._automationEvents.findIndex(function(t){return y(t)>e});if(t>1){var n=this._automationEvents.slice(t-1),r=n[0];T(r)&&n.unshift(o(p(this._automationEvents,t-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(e){if(0===this._automationEvents.length)return this._defaultValue;var n=this._automationEvents.findIndex(function(t){return y(t)>e}),r=this._automationEvents[n],i=(-1===n?this._automationEvents.length:n)-1,s=this._automationEvents[i];if(void 0!==s&&T(s)&&(void 0===r||!h(r)||r.insertTime>e))return l(e,p(this._automationEvents,i-1,s.startTime,this._defaultValue),s);if(void 0!==s&&d(s)&&(void 0===r||!h(r)))return s.value;if(void 0!==s&&f(s)&&(void 0===r||!h(r)||s.startTime+s.duration>e))return e<s.startTime+s.duration?x(e,s):s.values[s.values.length-1];if(void 0!==s&&h(s)&&(void 0===r||!h(r)))return s.value;if(void 0!==r&&c(r)){var o=m(this._automationEvents,i,s,r,this._defaultValue),a=t(o,2),g=a[0],v=a[1];return _(e,g,v,r)}if(void 0!==r&&u(r)){var w=m(this._automationEvents,i,s,r,this._defaultValue),k=t(w,2),S=k[0],C=k[1];return b(e,S,C,r)}return this._defaultValue}}])}(),S=function(e){return{cancelTime:e,type:"cancelAndHold"}},C=function(e){return{cancelTime:e,type:"cancelScheduledValues"}},E=function(e,t){return{endTime:t,type:"exponentialRampToValue",value:e}},A=function(e,t){return{endTime:t,type:"linearRampToValue",value:e}},I=function(e,t,n){return{startTime:t,target:e,timeConstant:n,type:"setTarget"}};e.AutomationEventList=k,e.createCancelAndHoldAutomationEvent=S,e.createCancelScheduledValuesAutomationEvent=C,e.createExponentialRampToValueAutomationEvent=E,e.createLinearRampToValueAutomationEvent=A,e.createSetTargetAutomationEvent=I,e.createSetValueAutomationEvent=o,e.createSetValueCurveAutomationEvent=a}(t,n(715),n(383),n(579))}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".b56b09e5.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="hanyunbin.github.io:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],c=0;if(o.some(t=>0!==e[t])){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkhanyunbin_github_io=self.webpackChunkhanyunbin_github_io||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=n(43),t=n(391);const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==a||null==l)throw new s;const c=t<<2|o>>4;if(r.push(c),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==l){const e=a<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class s extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(e){return function(e){const t=r(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},a=function(e){try{return i.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const c=()=>{try{return l().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&a(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},u=e=>c()?.emulatorHosts?.[e],h=()=>c()?.config,d=e=>c()?.[`_${e}`];class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function p(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function m(e){return(await fetch(e,{credentials:"include"})).ok}const g={};let v=!1;function y(e,t){if("undefined"===typeof window||"undefined"===typeof document||!p(window.location.host)||g[e]===t||g[e]||v)return;function n(e){return`__firebase__banner__${e}`}g[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(g))g[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{v=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function _(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function b(){const e=c()?.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function w(){return!b()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function x(){try{return"object"===typeof indexedDB}catch(e){return!1}}class T extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,T.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,k.prototype.create)}}class k{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(S,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new T(n,s,t)}}const S=/\{\$([^}]+)}/g;function C(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(E(n)&&E(s)){if(!C(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function E(e){return null!==e&&"object"===typeof e}function A(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function I(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function N(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class O{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=R),void 0===r.error&&(r.error=R),void 0===r.complete&&(r.complete=R);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function R(){}function D(e){return e&&e._delegate?e._delegate:e}class P{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const M="[DEFAULT]";class L{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new f;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(n)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:M})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===M?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return this.component?this.component.multipleInstances?e:M:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class V{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new L(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const j=[];var F;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(F||(F={}));const U={debug:F.DEBUG,verbose:F.VERBOSE,info:F.INFO,warn:F.WARN,error:F.ERROR,silent:F.SILENT},z=F.INFO,q={[F.DEBUG]:"log",[F.VERBOSE]:"log",[F.INFO]:"info",[F.WARN]:"warn",[F.ERROR]:"error"},B=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=q[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class ${constructor(e){this.name=e,this._logLevel=z,this._logHandler=B,this._userLogHandler=null,j.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in F))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?U[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,F.DEBUG,...t),this._logHandler(this,F.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,F.VERBOSE,...t),this._logHandler(this,F.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,F.INFO,...t),this._logHandler(this,F.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,F.WARN,...t),this._logHandler(this,F.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,F.ERROR,...t),this._logHandler(this,F.ERROR,...t)}}let H,W;const G=new WeakMap,K=new WeakMap,Q=new WeakMap,Y=new WeakMap,X=new WeakMap;let J={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return K.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Q.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return te(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Z(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(W||(W=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ne(this),n),te(G.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return te(e.apply(ne(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(ne(this),t,...r);return Q.set(s,t.sort?t.sort():[t]),te(s)}}function ee(e){return"function"===typeof e?Z(e):(e instanceof IDBTransaction&&function(e){if(K.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});K.set(e,t)}(e),t=e,(H||(H=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,J):e);var t}function te(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(te(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&G.set(t,e)}).catch(()=>{}),X.set(t,e),t}(e);if(Y.has(e))return Y.get(e);const t=ee(e);return t!==e&&(Y.set(e,t),X.set(t,e)),t}const ne=e=>X.get(e);const re=["get","getKey","getAll","getAllKeys","count"],ie=["put","add","delete","clear"],se=new Map;function oe(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(se.get(t))return se.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ie.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!re.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return se.set(t,s),s}J=(e=>({...e,get:(t,n,r)=>oe(t,n)||e.get(t,n,r),has:(t,n)=>!!oe(t,n)||e.has(t,n)}))(J);class ae{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===t?.type}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const le="@firebase/app",ce="0.14.0",ue=new $("@firebase/app"),he="@firebase/app-compat",de="@firebase/analytics-compat",fe="@firebase/analytics",pe="@firebase/app-check-compat",me="@firebase/app-check",ge="@firebase/auth",ve="@firebase/auth-compat",ye="@firebase/database",_e="@firebase/data-connect",be="@firebase/database-compat",we="@firebase/functions",xe="@firebase/functions-compat",Te="@firebase/installations",ke="@firebase/installations-compat",Se="@firebase/messaging",Ce="@firebase/messaging-compat",Ee="@firebase/performance",Ae="@firebase/performance-compat",Ie="@firebase/remote-config",Ne="@firebase/remote-config-compat",Oe="@firebase/storage",Re="@firebase/storage-compat",De="@firebase/firestore",Pe="@firebase/ai",Me="@firebase/firestore-compat",Le="firebase",Ve="[DEFAULT]",je={[le]:"fire-core",[he]:"fire-core-compat",[fe]:"fire-analytics",[de]:"fire-analytics-compat",[me]:"fire-app-check",[pe]:"fire-app-check-compat",[ge]:"fire-auth",[ve]:"fire-auth-compat",[ye]:"fire-rtdb",[_e]:"fire-data-connect",[be]:"fire-rtdb-compat",[we]:"fire-fn",[xe]:"fire-fn-compat",[Te]:"fire-iid",[ke]:"fire-iid-compat",[Se]:"fire-fcm",[Ce]:"fire-fcm-compat",[Ee]:"fire-perf",[Ae]:"fire-perf-compat",[Ie]:"fire-rc",[Ne]:"fire-rc-compat",[Oe]:"fire-gcs",[Re]:"fire-gcs-compat",[De]:"fire-fst",[Me]:"fire-fst-compat",[Pe]:"fire-vertex","fire-js":"fire-js",[Le]:"fire-js-all"},Fe=new Map,Ue=new Map,ze=new Map;function qe(e,t){try{e.container.addComponent(t)}catch(n){ue.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Be(e){const t=e.name;if(ze.has(t))return ue.debug(`There were multiple attempts to register component ${t}.`),!1;ze.set(t,e);for(const n of Fe.values())qe(n,e);for(const n of Ue.values())qe(n,e);return!0}function $e(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function He(e){return null!==e&&void 0!==e&&void 0!==e.settings}const We=new k("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Ge{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new P("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw We.create("app-deleted",{appName:this._name})}}const Ke="12.0.0";function Qe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r={name:Ve,automaticDataCollectionEnabled:!0,...t},i=r.name;if("string"!==typeof i||!i)throw We.create("bad-app-name",{appName:String(i)});if(n||(n=h()),!n)throw We.create("no-options");const s=Fe.get(i);if(s){if(C(n,s.options)&&C(r,s.config))return s;throw We.create("duplicate-app",{appName:i})}const o=new V(i);for(const l of ze.values())o.addComponent(l);const a=new Ge(n,r,o);return Fe.set(i,a),a}function Ye(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve;const t=Fe.get(e);if(!t&&e===Ve&&h())return Qe();if(!t)throw We.create("no-app",{appName:e});return t}function Xe(e,t,n){let r=je[e]??e;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const e=[`Unable to register library "${r}" with version "${t}":`];return i&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&e.push("and"),s&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void ue.warn(e.join(" "))}Be(new P(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}const Je="firebase-heartbeat-store";let Ze=null;function et(){return Ze||(Ze=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=te(o);return r&&o.addEventListener("upgradeneeded",e=>{r(te(o.result),e.oldVersion,e.newVersion,te(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Je)}catch(n){console.warn(n)}}}).catch(e=>{throw We.create("idb-open",{originalErrorMessage:e.message})})),Ze}async function tt(e,t){try{const n=(await et()).transaction(Je,"readwrite"),r=n.objectStore(Je);await r.put(t,nt(e)),await n.done}catch(n){if(n instanceof T)ue.warn(n.message);else{const e=We.create("idb-set",{originalErrorMessage:n?.message});ue.warn(e.message)}}}function nt(e){return`${e.name}!${e.options.appId}`}class rt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new st(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=it();if(null==this._heartbeatsCache?.heartbeats&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){ue.warn(e)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats||0===this._heartbeatsCache.heartbeats.length)return"";const e=it(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),ot(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ot(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=o(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return ue.warn(e),""}}}function it(){return(new Date).toISOString().substring(0,10)}class st{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!x()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await et()).transaction(Je),n=await t.objectStore(Je).get(nt(e));return await t.done,n}catch(t){if(t instanceof T)ue.warn(t.message);else{const e=We.create("idb-get",{originalErrorMessage:t?.message});ue.warn(e.message)}}}(this.app);return e?.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return tt(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return tt(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function ot(e){return o(JSON.stringify({version:2,heartbeats:e})).length}var at;at="",Be(new P("platform-logger",e=>new ae(e),"PRIVATE")),Be(new P("heartbeat",e=>new rt(e),"PRIVATE")),Xe(le,ce,at),Xe(le,ce,"esm2020"),Xe("fire-js","");Xe("firebase","12.0.0","app");function lt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ct=lt,ut=new k("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ht=new $("@firebase/auth");function dt(e){if(ht.logLevel<=F.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ht.error(`Auth (${Ke}): ${e}`,...n)}}function ft(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw vt(e,...n)}function pt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return vt(e,...n)}function mt(e,t,n){const r={...ct(),[t]:n};return new k("auth","Firebase",r).create(t,{appName:e.name})}function gt(e){return mt(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return ut.create(e,...n)}function yt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw vt(t,...r)}}function _t(e){const t="INTERNAL ASSERTION FAILED: "+e;throw dt(t),new Error(t)}function bt(e,t){e||_t(t)}function wt(){return"undefined"!==typeof self&&self.location?.href||""}function xt(){return"http:"===Tt()||"https:"===Tt()}function Tt(){return"undefined"!==typeof self&&self.location?.protocol||null}function kt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(xt()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class St{constructor(e,t){this.shortDelay=e,this.longDelay=t,bt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return kt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ct(e,t){bt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Et{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void _t("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void _t("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void _t("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const At={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},It=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Nt=new St(3e4,6e4);function Ot(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function Rt(e,t,n,r){return Dt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=A({key:e.config.apiKey,...s}).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l={method:t,headers:a,...i};return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&p(e.emulatorConfig.host)&&(l.credentials="include"),Et.fetch()(await Mt(e,e.config.apiHost,n,o),l)})}async function Dt(e,t,n){e._canInitEmulator=!1;const r={...At,...t};try{const t=new Vt(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw jt(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw jt(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw jt(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw jt(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw mt(e,a,o);ft(e,a)}}catch(i){if(i instanceof T)throw i;ft(e,"network-request-failed",{message:String(i)})}}async function Pt(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Rt(e,t,n,r,i);return"mfaPendingCredential"in s&&ft(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function Mt(e,t,n,r){const i=`${t}${n}?${r}`,s=e,o=s.config.emulator?Ct(e.config,i):`${e.config.apiScheme}://${i}`;if(It.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function Lt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Vt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(pt(this.auth,"network-request-failed")),Nt.get())})}}function jt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=pt(e,t,r);return i.customData._tokenResponse=n,i}function Ft(e){return void 0!==e&&void 0!==e.enterprise}class Ut{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Lt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function zt(e,t){return Rt(e,"GET","/v2/recaptchaConfig",Ot(e,t))}async function qt(e,t){return Rt(e,"POST","/v1/accounts:lookup",t)}function Bt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function $t(e){return 1e3*Number(e)}function Ht(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return dt("JWT malformed, contained fewer than 3 sections"),null;try{const e=a(n);return e?JSON.parse(e):(dt("Failed to decode base64 JWT payload"),null)}catch(i){return dt("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Wt(e){const t=Ht(e);return yt(t,"internal-error"),yt("undefined"!==typeof t.exp,"internal-error"),yt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Gt(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof T&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Kt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e?.code&&this.schedule(!0))}this.schedule()}}class Qt{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bt(this.lastLoginAt),this.creationTime=Bt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Yt(e){const t=e.auth,n=await e.getIdToken(),r=await Gt(e,qt(t,{idToken:n}));yt(r?.users.length,t,"internal-error");const i=r.users[0];e._notifyReloadListener(i);const s=i.providerUserInfo?.length?Xt(i.providerUserInfo):[],o=(a=e.providerData,l=s,[...a.filter(e=>!l.some(t=>t.providerId===e.providerId)),...l]);var a,l;const c=e.isAnonymous,u=!(e.email&&i.passwordHash)&&!o?.length,h=!!c&&u,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Qt(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,d)}function Xt(e){return e.map(e=>{let{providerId:t,...n}=e;return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Jt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){yt(e.idToken,"internal-error"),yt("undefined"!==typeof e.idToken,"internal-error"),yt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Wt(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){yt(0!==e.length,"internal-error");const t=Wt(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(yt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Dt(e,{},async()=>{const n=A({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=await Mt(e,r,"/v1/token",`key=${i}`),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:o,body:n};return e.emulatorConfig&&p(e.emulatorConfig.host)&&(a.credentials="include"),Et.fetch()(s,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Jt;return n&&(yt("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(yt("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(yt("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Jt,this.toJSON())}_performRefresh(){return _t("not implemented")}}function Zt(e,t){yt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class en{constructor(e){let{uid:t,auth:n,stsTokenManager:r,...i}=e;this.providerId="firebase",this.proactiveRefresh=new Kt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Qt(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Gt(this,this.stsTokenManager.getToken(this.auth,e));return yt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=D(e),r=await n.getIdToken(t),i=Ht(r);yt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Bt($t(i.auth_time)),issuedAtTime:Bt($t(i.iat)),expirationTime:Bt($t(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}(this,e)}reload(){return async function(e){const t=D(e);await Yt(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(yt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new en({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){yt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Yt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(He(this.auth.app))return Promise.reject(gt(this.auth));const e=await this.getIdToken();return await Gt(this,async function(e,t){return Rt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,r=t.email??void 0,i=t.phoneNumber??void 0,s=t.photoURL??void 0,o=t.tenantId??void 0,a=t._redirectEventId??void 0,l=t.createdAt??void 0,c=t.lastLoginAt??void 0,{uid:u,emailVerified:h,isAnonymous:d,providerData:f,stsTokenManager:p}=t;yt(u&&p,e,"internal-error");const m=Jt.fromJSON(this.name,p);yt("string"===typeof u,e,"internal-error"),Zt(n,e.name),Zt(r,e.name),yt("boolean"===typeof h,e,"internal-error"),yt("boolean"===typeof d,e,"internal-error"),Zt(i,e.name),Zt(s,e.name),Zt(o,e.name),Zt(a,e.name),Zt(l,e.name),Zt(c,e.name);const g=new en({uid:u,auth:e,email:r,emailVerified:h,displayName:n,isAnonymous:d,photoURL:s,phoneNumber:i,tenantId:o,stsTokenManager:m,createdAt:l,lastLoginAt:c});return f&&Array.isArray(f)&&(g.providerData=f.map(e=>({...e}))),a&&(g._redirectEventId=a),g}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Jt;r.updateFromServerResponse(t);const i=new en({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Yt(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];yt(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Xt(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!i?.length,o=new Jt;o.updateFromIdToken(n);const a=new en({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Qt(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(a,l),a}}const tn=new Map;function nn(e){bt(e instanceof Function,"Expected a class definition");let t=tn.get(e);return t?(bt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,tn.set(e,t),t)}class rn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}rn.type="NONE";const sn=rn;function on(e,t,n){return`firebase:${e}:${t}:${n}`}class an{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=on(this.userKey,r.apiKey,i),this.fullPersistenceKey=on("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await qt(this.auth,{idToken:e}).catch(()=>{});return t?en._fromGetAccountInfoResponse(this.auth,t,e):null}return en._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new an(nn(sn),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||nn(sn);const s=on(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){let n;if("string"===typeof t){const r=await qt(e,{idToken:t}).catch(()=>{});if(!r)break;n=await en._fromGetAccountInfoResponse(e,r,t)}else n=en._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch{}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch{}})),new an(i,e,n)):new an(i,e,n)}}function ln(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(dn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(cn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(pn(t))return"Blackberry";if(mn(t))return"Webos";if(un(t))return"Safari";if((t.includes("chrome/")||hn(t))&&!t.includes("edge/"))return"Chrome";if(fn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===n?.length)return n[1]}return"Other"}function cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/firefox\//i.test(e)}function un(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:_()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/crios\//i.test(e)}function dn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/iemobile/i.test(e)}function fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/android/i.test(e)}function pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/blackberry/i.test(e)}function mn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/webos/i.test(e)}function gn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function vn(){return function(){const e=_();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function yn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_();return gn(e)||fn(e)||mn(e)||pn(e)||/windows phone/i.test(e)||dn(e)}function _n(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ln(_());break;case"Worker":t=`${ln(_())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ke}/${r}`}class bn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}class wn{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),void 0!==t.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),void 0!==t.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),void 0!==t.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),void 0!==t.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class xn{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kn(this),this.idTokenSubscription=new kn(this),this.beforeStateQueue=new bn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ut,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=nn(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await an.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(n){}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await qt(this,{idToken:e}),n=await en._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(He(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const t=this.redirectUser?._redirectEventId,i=n?._redirectEventId,s=await this.tryRedirectSignIn(e);t&&t!==i||!s?.user||(n=s.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return yt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Yt(e)}catch(t){if("auth/network-request-failed"!==t?.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(He(this.app))return Promise.reject(gt(this));const t=e?D(e):null;return t&&yt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&yt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return He(this.app)?Promise.reject(gt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return He(this.app)?Promise.reject(gt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(nn(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Rt(e,"GET","/v2/passwordPolicy",Ot(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new wn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new k("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Rt(e,"POST","/v2/accounts:revokeToken",Ot(e,t))}(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&nn(e)||this._popupRedirectResolver;yt(t,this,"argument-error"),this.redirectPersistenceManager=await an.create(this,[nn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(yt(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return yt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_n(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await(this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if(He(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await(this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken());return e?.error&&function(e){if(ht.logLevel<=F.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];ht.warn(`Auth (${Ke}): ${e}`,...n)}}(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Tn(e){return D(e)}class kn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new O(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return yt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Sn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Cn(e){return Sn.loadJS(e)}function En(e){return`__${e}${Math.floor(1e6*Math.random())}`}class An{constructor(){this.enterprise=new In}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class In{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Nn="NO_RECAPTCHA";class On{constructor(e){this.type="recaptcha-enterprise",this.auth=Tn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Ft(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Nn)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new An).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{zt(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Ut(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&Ft(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Sn.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Cn(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Rn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new On(e);let o;if(i)o=Nn;else try{o=await s.verify(n)}catch(l){o=await s.verify(n,!0)}const a={...t};if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Dn(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Rn(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Rn(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){if(e._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const i=await Rn(e,t,n);return r(e,i).catch(async i=>{if("AUDIT"===e._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await Rn(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Rn(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Pn(e){const t=Tn(e),n=await zt(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Ut(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new On(t).verify()}}function Mn(e,t,n){const r=Tn(e);yt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,s=Ln(t),{host:o,port:a}=function(e){const t=Ln(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Vn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Vn(t)}}}(t),l=null===a?"":`:${a}`,c={url:`${s}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return yt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void yt(C(c,r.config.emulator)&&C(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,p(o)?(m(`${s}//${o}${l}`),y("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Ln(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Vn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class jn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _t("not implemented")}_getIdTokenResponse(e){return _t("not implemented")}_linkToIdToken(e,t){return _t("not implemented")}_getReauthenticationResolver(e){return _t("not implemented")}}async function Fn(e,t){return Rt(e,"POST","/v1/accounts:signUp",t)}async function Un(e,t){return Pt(e,"POST","/v1/accounts:signInWithPassword",Ot(e,t))}class zn extends jn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new zn(e,t,"password")}static _fromEmailAndCode(e,t){return new zn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Dn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Un,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithEmailLink",Ot(e,t))}(e,{email:this._email,oobCode:this._password});default:ft(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Dn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Fn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithEmailLink",Ot(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ft(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function qn(e,t){return Pt(e,"POST","/v1/accounts:signInWithIdp",Ot(e,t))}class Bn extends jn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Bn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ft("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,...i}=t;if(!n||!r)return null;const s=new Bn(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return qn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,qn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,qn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=A(t)}return e}}async function $n(e,t){return Rt(e,"POST","/v1/accounts:sendVerificationCode",Ot(e,t))}const Hn={USER_NOT_FOUND:"user-not-found"};class Wn extends jn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Wn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Wn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithPhoneNumber",Ot(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Pt(e,"POST","/v1/accounts:signInWithPhoneNumber",Ot(e,t));if(n.temporaryProof)throw jt(e,"account-exists-with-different-credential",n);return n}(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return async function(e,t){return Pt(e,"POST","/v1/accounts:signInWithPhoneNumber",Ot(e,{...t,operation:"REAUTH"}),Hn)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Wn({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Gn{constructor(e){const t=I(N(e)),n=t.apiKey??null,r=t.oobCode??null,i=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(t.mode??null);yt(n&&r&&i,"argument-error"),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=function(e){const t=I(N(e)).link,n=t?I(N(t)).deep_link_id:null,r=I(N(e)).deep_link_id;return(r?I(N(r)).link:null)||r||n||t||e}(e);try{return new Gn(t)}catch{return null}}}class Kn{constructor(){this.providerId=Kn.PROVIDER_ID}static credential(e,t){return zn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Gn.parseLink(t);return yt(n,"argument-error"),zn._fromEmailAndCode(e,n.code,n.tenantId)}}Kn.PROVIDER_ID="password",Kn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Kn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Qn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Yn extends Qn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Xn extends Yn{constructor(){super("facebook.com")}static credential(e){return Bn._fromParams({providerId:Xn.PROVIDER_ID,signInMethod:Xn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xn.credentialFromTaggedObject(e)}static credentialFromError(e){return Xn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Xn.credential(t.oauthAccessToken)}catch{return null}}}Xn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Xn.PROVIDER_ID="facebook.com";class Jn extends Yn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Bn._fromParams({providerId:Jn.PROVIDER_ID,signInMethod:Jn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Jn.credentialFromTaggedObject(e)}static credentialFromError(e){return Jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Jn.credential(n,r)}catch{return null}}}Jn.GOOGLE_SIGN_IN_METHOD="google.com",Jn.PROVIDER_ID="google.com";class Zn extends Yn{constructor(){super("github.com")}static credential(e){return Bn._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Zn.credential(t.oauthAccessToken)}catch{return null}}}Zn.GITHUB_SIGN_IN_METHOD="github.com",Zn.PROVIDER_ID="github.com";class er extends Yn{constructor(){super("twitter.com")}static credential(e,t){return Bn._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return er.credential(n,r)}catch{return null}}}async function tr(e,t){return Pt(e,"POST","/v1/accounts:signUp",Ot(e,t))}er.TWITTER_SIGN_IN_METHOD="twitter.com",er.PROVIDER_ID="twitter.com";class nr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await en._fromIdTokenResponse(e,n,r),s=rr(n);return new nr({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=rr(n);return new nr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function rr(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class ir extends T{constructor(e,t,n,r){super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,ir.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new ir(e,t,n,r)}}function sr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw ir._fromErrorAndOperation(e,n,t,r);throw n})}async function or(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Gt(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return nr._forOperation(e,"link",r)}async function ar(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(He(r.app))return Promise.reject(gt(r));const i="reauthenticate";try{const s=await Gt(e,sr(r,i,t,e),n);yt(s.idToken,r,"internal-error");const o=Ht(s.idToken);yt(o,r,"internal-error");const{sub:a}=o;return yt(e.uid===a,r,"user-mismatch"),nr._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===s?.code&&ft(r,"user-mismatch"),s}}async function lr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(He(e.app))return Promise.reject(gt(e));const r="signIn",i=await sr(e,r,t),s=await nr._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function cr(e,t){return Rt(e,"POST","/v2/accounts/mfaEnrollment:start",Ot(e,t))}new WeakMap;const ur="__sak";class hr{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ur,"1"),this.storage.removeItem(ur),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class dr extends hr{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=yn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);vn()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}dr.type="LOCAL";const fr=dr;function pr(e){const t=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function mr(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class gr{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(navigator.cookieEnabled??!0))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=mr(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return e?.value}return pr(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=mr(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=mr(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=pr(n);const i=setInterval(()=>{const e=pr(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}gr.type="COOKIE";class vr extends hr{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vr.type="SESSION";const yr=vr;class _r{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new _r(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!s?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function br(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}_r.receivers=[];class wr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=br("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function xr(){return window}function Tr(){return"undefined"!==typeof xr().WorkerGlobalScope&&"function"===typeof xr().importScripts}const kr="firebaseLocalStorageDb",Sr="firebaseLocalStorage",Cr="fbase_key";class Er{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ar(e,t){return e.transaction([Sr],t?"readwrite":"readonly").objectStore(Sr)}function Ir(){const e=indexedDB.open(kr,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Sr,{keyPath:Cr})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Sr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(kr);return new Er(e).toPromise()}(),t(await Ir()))})})}async function Nr(e,t,n){const r=Ar(e,!0).put({[Cr]:t,value:n});return new Er(r).toPromise()}function Or(e,t){const n=Ar(e,!0).delete(t);return new Er(n).toPromise()}class Rr{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Ir()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Tr()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_r._getInstance(Tr()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await async function(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}(),!this.activeServiceWorker)return;this.sender=new wr(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&(navigator?.serviceWorker?.controller||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ir();return await Nr(e,ur,"1"),await Or(e,ur),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Nr(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Ar(e,!1).get(t),r=await new Er(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Or(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Ar(e,!1).getAll();return new Er(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Rr.type="LOCAL";const Dr=Rr;function Pr(e,t){return Rt(e,"POST","/v2/accounts/mfaSignIn:start",Ot(e,t))}En("rcb"),new St(3e4,6e4);const Mr="recaptcha";async function Lr(e,t,n){if(!e._getRecaptchaConfig())try{await Pn(e)}catch(r){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(r="string"===typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){yt("enroll"===t.type,e,"internal-error");const i={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Dn(e,i,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Nn){yt(n?.type===Mr,e,"argument-error");return cr(e,await Vr(e,t,n))}return cr(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{yt("signin"===t.type,e,"internal-error");const i=r.multiFactorHint?.uid||r.multiFactorUid;yt(i,e,"missing-multi-factor-info");const s={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Dn(e,s,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Nn){yt(n?.type===Mr,e,"argument-error");return Pr(e,await Vr(e,t,n))}return Pr(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"},i=Dn(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Nn){yt(n?.type===Mr,e,"argument-error");return $n(e,await Vr(e,t,n))}return $n(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).sessionInfo}}finally{n?._reset()}}async function Vr(e,t,n){yt(n.type===Mr,e,"argument-error");const r=await n.verify();yt("string"===typeof r,e,"argument-error");const i={...t};if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class jr{constructor(e){this.providerId=jr.PROVIDER_ID,this.auth=Tn(e)}verifyPhoneNumber(e,t){return Lr(this.auth,e,D(t))}static credential(e,t){return Wn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return jr.credentialFromTaggedObject(t)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Wn._fromTokenResponse(n,r):null}}function Fr(e,t){return t?nn(t):(yt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}jr.PROVIDER_ID="phone",jr.PHONE_SIGN_IN_METHOD="phone";class Ur extends jn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zr(e){return lr(e.auth,new Ur(e),e.bypassAuthState)}function qr(e){const{auth:t,user:n}=e;return yt(n,t,"internal-error"),ar(n,new Ur(e),e.bypassAuthState)}async function Br(e){const{auth:t,user:n}=e;return yt(n,t,"internal-error"),or(n,new Ur(e),e.bypassAuthState)}class $r{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zr;case"linkViaPopup":case"linkViaRedirect":return Br;case"reauthViaPopup":case"reauthViaRedirect":return qr;default:ft(this.auth,"internal-error")}}resolve(e){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Hr=new St(2e3,1e4);class Wr extends $r{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Wr.currentPopupAction&&Wr.currentPopupAction.cancel(),Wr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return yt(e,this.auth,"internal-error"),e}async onExecution(){bt(1===this.filter.length,"Popup operations only handle one event");const e=br();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(pt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(pt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Wr.currentPopupAction=null}pollUserCancellation(){const e=()=>{this.authWindow?.window?.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pt(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Hr.get())};e()}}Wr.currentPopupAction=null;const Gr=new Map;class Kr extends $r{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Gr.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Xr(t),r=Yr(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Gr.set(this.auth._key(),e)}return this.bypassAuthState||Gr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Qr(e,t){Gr.set(e._key(),t)}function Yr(e){return nn(e._redirectPersistence)}function Xr(e){return on("pendingRedirect",e.config.apiKey,e.name)}async function Jr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(He(e.app))return Promise.reject(gt(e));const r=Tn(e),i=Fr(r,t),s=new Kr(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class Zr{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ti(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!ti(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(pt(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ei(e))}saveEventToCache(e){this.cachedEventUids.add(ei(e)),this.lastProcessedEventTime=Date.now()}}function ei(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function ti(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===n?.code}const ni=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ri=/^https?/;async function ii(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Rt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(si(n))return}catch{}ft(e,"unauthorized-domain")}function si(e){const t=wt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!ri.test(n))return!1;if(ni.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const oi=new St(3e4,6e4);function ai(){const e=xr().___jsl;if(e?.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function li(e){return new Promise((t,n)=>{function r(){ai(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ai(),n(pt(e,"network-request-failed"))},timeout:oi.get()})}if(xr().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else{if(!xr().gapi?.load){const t=En("iframefcb");return xr()[t]=()=>{gapi.load?r():n(pt(e,"network-request-failed"))},Cn(`${Sn.gapiScript}?onload=${t}`).catch(e=>n(e))}r()}}).catch(e=>{throw ci=null,e})}let ci=null;const ui=new St(5e3,15e3),hi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},di=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fi(e){const t=e.config;yt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ct(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:Ke},i=di.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${A(r).slice(1)}`}async function pi(e){const t=await function(e){return ci=ci||li(e),ci}(e),n=xr().gapi;return yt(n,e,"internal-error"),t.open({where:document.body,url:fi(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hi,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=pt(e,"network-request-failed"),s=xr().setTimeout(()=>{r(i)},ui.get());function o(){xr().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const mi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class gi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function vi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l={...mi,width:r.toString(),height:i.toString(),top:s,left:o},c=_().toLowerCase();n&&(a=hn(c)?"_blank":n),cn(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){return gn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:_())&&!!window.navigator?.standalone}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new gi(null);const h=window.open(t||"",a,u);yt(h,e,"popup-blocked");try{h.focus()}catch(d){}return new gi(h)}const yi="__/auth/handler",_i="emulator/auth/handler",bi=encodeURIComponent("fac");async function wi(e,t,n,r,i,s){yt(e.config.authDomain,e,"auth-domain-config-required"),yt(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Ke,eventId:i};if(t instanceof Qn){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Yn){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${bi}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${yi}`;return Ct(t,_i)}(e)}?${A(a).slice(1)}${c}`}const xi="webStorageSupport";const Ti=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yr,this._completeRedirectFn=Jr,this._overrideRedirectResult=Qr}async _openPopup(e,t,n,r){bt(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");return vi(e,await wi(e,t,n,wt(),r),br())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){xr().location.href=e}(await wi(e,t,n,wt(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(bt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await pi(e),n=new Zr(e);return t.register("authEvent",t=>{yt(t?.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xi,{type:xi},n=>{const r=n?.[0]?.[xi];void 0!==r&&t(!!r),ft(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ii(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yn()||un()||gn()}};var ki="@firebase/auth",Si="1.11.0";class Ci{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){yt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ei=d("authIdTokenMaxAge")||300;let Ai=null;var Ii;Sn={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=pt("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(document.getElementsByTagName("head")?.[0]??document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Ii="Browser",Be(new P("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;yt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Ii,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_n(Ii)},c=new xn(r,i,s,l);return function(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(nn);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Be(new P("auth-internal",e=>(e=>new Ci(e))(Tn(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Xe(ki,Si,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ii)),Xe(ki,Si,"esm2020");var Ni,Oi,Ri="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Di={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var i={};function s(e){return-128<=e&&128>e?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=4294967296;return new r(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new r(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(a,a);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var i=y(n,1),s=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=s.add(r);0>=c.l(e)&&(i=i.add(n),s=c),r=y(r,1),n=y(n,1)}return t=f(e,i.j(t)),new m(i,t)}for(i=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(s=o(n)).j(t);h(c)||0<c.l(e);)c=(s=o(n-=r)).j(t);u(s)&&(s=l),i=i.add(s),e=f(e,c)}return new m(i,e)}function v(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.i(i)<<1|e.i(i-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],o=0;o<i;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new r(s,e.h)}(e=r.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,r="";;){var i=g(n,t).g,s=((0<(n=f(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var o=i+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);i=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var l=this.i(i)>>>16,f=65535&this.i(i),m=e.i(s)>>>16,g=65535&e.i(s);n[2*i+2*s]+=f*g,p(n,2*i+2*s),n[2*i+2*s+1]+=l*g,p(n,2*i+2*s+1),n[2*i+2*s+1]+=f*m,p(n,2*i+2*s+1),n[2*i+2*s+2]+=l*m,p(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)&e.i(i);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)|e.i(i);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.i(i)^e.i(i);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Oi=Di.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=o,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=o(Math.pow(n,8)),i=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),i=i.j(l).add(o(c))):i=(i=i.j(r)).add(o(c))}return i},Ni=Di.Integer=r}).apply("undefined"!==typeof Ri?Ri:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Pi,Mi,Li,Vi,ji,Fi,Ui,zi,qi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Bi={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof qi&&qi];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function _(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function x(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function T(e){i.setTimeout(()=>{throw e},0)}function k(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var S=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new C,e=>e.reset());class C{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let E,A=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=S.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},N=()=>{const e=i.Promise.resolve(void 0);E=()=>{e.then(O)}};var O=()=>{for(var e;e=k();){try{e.h.call(e.g)}catch(n){T(n)}var t=S;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}A=!1};function R(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function M(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}h(M,D);var L={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var V="closure_listenable_"+(1e6*Math.random()|0),j=0;function F(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++j,this.da=this.fa=!1}function U(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function q(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(U(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function B(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}z.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=B(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new F(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var $="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,n,r,i){if(r&&r.once)return K(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W(e,t[s],n,r,i);return null}return n=te(n),e&&e[V]?e.K(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!1,r,i)}function G(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=Z(e);if(l||(e[$]=l=new z(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)P||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(X(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function K(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,r,i);return null}return n=te(n),e&&e[V]?e.L(t,n,o(r)?!!r.capture:!!r,i):G(e,t,n,!0,r,i)}function Q(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=te(n),e&&e[V]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=B(s=e.g[t],n,r,i))&&(U(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=B(t,n,r,i)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[V])q(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(X(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(q(n,e),0==n.h&&(n.src=null,t[$]=null)):U(e)}}}function X(e){return e in H?H[e]:H[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new M(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[$])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var i=t;w(t=new D(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=ie(o,r,!0,t)&&i}if(i=ie(o=t.g=e,r,!0,t)&&i,i=ie(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=ie(o=t.g=n[s],r,!1,t)&&i}function ie(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&q(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function oe(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,oe(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,R),ne.prototype[V]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Q(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)U(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ae extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}h(le,R);var ce=[];function ue(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&Y(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=i.JSON.stringify,de=i.JSON.parse,fe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){D.call(this,"d")}function _e(){D.call(this,"c")}h(ye,D),h(_e,D);var be={},we=null;function xe(){return we=we||new ne}function Te(e){D.call(this,be.La,e)}function ke(e){const t=xe();re(t,new Te(t))}function Se(e,t){D.call(this,be.STAT_EVENT,e),this.stat=t}function Ce(e){const t=xe();re(t,new Se(t,e))}function Ee(e,t){D.call(this,be.Ma,e),this.size=t}function Ae(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ie(){this.g=!0}function Ne(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return he(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}be.La="serverreachability",h(Te,D),be.STAT_EVENT="statevent",h(Se,D),be.Ma="timingevent",h(Ee,D),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var Oe,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Pe(){}function Me(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}h(Pe,pe),Pe.prototype.g=function(){return new XMLHttpRequest},Pe.prototype.i=function(){return{}},Oe=new Pe;var Ve={},je={};function Fe(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ue(e,null)}function Ue(e,t){e.F=Date.now(),Be(e),e.A=ot(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),St(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ce[0]=i.toString()),i=ce);for(var s=0;s<i.length;s++){var o=W(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?_(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ke(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function qe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?je:(n=Number(t.substring(n,r)),isNaN(n)?Ve:(r+=1)+n>t.length?je:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.S=Date.now()+e.I,$e(e,e.I)}function $e(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ae(c(e.ba,e),t)}function He(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||ln(e.j,e)}function Ge(e){He(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ke(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),Yt(n)}rn(n),Ce(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ae(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=dn(r,r.J?r.ia:null,r.W),o.K){tt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(He(a),Be(a)),r.g=o}else nn(r);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Qt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}ke()}catch(u){}}Me.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Ht(e)?t.j():this.Y(e)},Me.prototype.Y=function(e){try{if(e==this.g)e:{const d=Ht(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=d||7==t||ke(),He(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Wt(this.g);e="";var s=r.length,o=4==Ht(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),We(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ce(12),Ge(this),We(this);break e}Ne(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ke(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=qe(this,a),e==je){4==d&&(this.s=4,Ce(14),n=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}if(e==Ve){this.s=4,Ce(15),Ne(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ne(this.i,this.l,e,null),Ke(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Ce(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,Ce(11))}}else Ne(this.i,this.l,a,"[Invalid Chunked Response]"),Ge(this),We(this)}else Ne(this.i,this.l,a,null),Ke(this,a);4==d&&Ge(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&2<=Ht(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(p(e[r]))continue;var n=x(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Ce(12)):(this.s=0,Ce(13)),Ge(this),We(this)}}}catch(d){}},Me.prototype.cancel=function(){this.J=!0,Ge(this)},Me.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(ke(),Ce(17)),Ge(this),this.s=2,We(this)):$e(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var it=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(it))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(xt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Tt(this,t),St(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,_t)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var mt,gt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,_t=/[#\?@]/g,bt=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Tt(e,t){xt(e),t=Ct(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function kt(e,t){return xt(e),t=Ct(e,t),e.g.has(t)}function St(e,t,n){Tt(e,t),0<n.length&&(e.i=null,e.g.set(Ct(e,t),d(n)),e.h+=n.length)}function Ct(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Et(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function At(){this.g=new fe}function It(e,t,n){const r=n||"";try{rt(e,function(e,n){let i=e;o(e)&&(i=he(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Nt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Ot(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Rt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Dt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Pt(e)}function Pt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Mt(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Mt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Vt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){xt(this),this.i=null,e=Ct(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){xt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){xt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){xt(this);let t=[];if("string"===typeof e)kt(this,e)&&(t=t.concat(this.g.get(Ct(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return xt(this),this.i=null,kt(this,e=Ct(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},h(Nt,pe),Nt.prototype.g=function(){return new Ot(this.l,this.j)},Nt.prototype.i=(mt={},function(){return mt}),h(Ot,ne),(e=Ot.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Pt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Pt(this)),this.g&&(this.readyState=3,Pt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Rt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dt(this):Pt(this),3==this.readyState&&Rt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Dt(this))},e.Qa=function(e){this.g&&(this.response=e,Dt(this))},e.ga=function(){this.g&&Dt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ot.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(Vt,ne);var jt=/^https?$/i,Ft=["POST","PUT"];function Ut(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),Bt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function qt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Ht(e)||2!=e.Z()))if(e.u&&4==Ht(e))se(e.Ea,0,e);else if(re(e,"readystatechange"),4==Ht(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(it)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!jt.test(o?o.toLowerCase():"")}n=s}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var a=2<Ht(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",zt(e)}}finally{Bt(e)}}}function Bt(e,t){if(e.g){$t(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function $t(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function Ht(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Kt(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new At,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Xt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Me(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Be(t)}hn(e)}function Yt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Xt(e){Yt(e),e.u&&(i.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;E||N(),A||(E(),A=!0),I.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=ot(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new Me(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Fe(n,r,t)}function en(e,t){e.H&&y(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{It(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;E||N(),A||(E(),A=!0),I.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ae(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Me(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ue(n,e)}function an(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;re(r=xe(),new Ee(r,n)),Jt(e)}else nn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ae(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new st(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||at(r,"https"),ht(r),t?function(e,t){const n=new Ie;if(i.Image){const r=new Image;r.onload=u(Et,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Et,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Et,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Et,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout(()=>{n.abort(),Et(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Et(0,0,!0,t):Et(0,0,!1,t)}).catch(()=>{clearTimeout(r),Et(0,0,!1,t)})}(r.toString(),n)}else Ce(2);e.G=0,e.l&&e.l.sa(t),hn(e),Xt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var r=n instanceof st?ot(n):new st(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);r&&at(o,r),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Vt(new Nt({eb:n})):new Vt(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Kt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new _n(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){_e.call(this),this.status=1}function _n(e){this.g=e}(e=Vt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Oe.g(),this.v=this.o?me(this.o):me(Oe),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Ut(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Ft,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$t(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Ut(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Bt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bt(this,!0)),Vt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?qt(this):this.bb())},e.bb=function(){qt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Kt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Ce(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=dn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Me(this,this.j,e);let s=this.o;if(this.S&&(s?(s=_(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,i,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Mt(s)))+"&"+t:this.m&&Lt(n,this.m,s)),et(this.h,i),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),i.T=!0,Fe(i,n,null)):Fe(i,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Xe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ae(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ce(10),Yt(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,Yt(this),rn(this),Ce(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},h(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Qt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Jt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,gn.aa.N.call(this)},h(vn,ye),h(yn,_e),h(_n,pn),_n.prototype.ua=function(){re(this.g,"a")},_n.prototype.ta=function(e){re(this.g,new vn(e))},_n.prototype.sa=function(e){re(this.g,new yn)},_n.prototype.ra=function(){re(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,zi=Bi.createWebChannelTransport=function(){return new mn},Ui=Bi.getStatEventTarget=function(){return xe()},Fi=Bi.Event=be,ji=Bi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,Vi=Bi.ErrorCode=Re,De.COMPLETE="complete",Li=Bi.EventType=De,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,Mi=Bi.WebChannel=ge,Bi.FetchXmlHttpFactory=Nt,Vt.prototype.listenOnce=Vt.prototype.L,Vt.prototype.getLastError=Vt.prototype.Ka,Vt.prototype.getLastErrorCode=Vt.prototype.Ba,Vt.prototype.getStatus=Vt.prototype.Z,Vt.prototype.getResponseJson=Vt.prototype.Oa,Vt.prototype.getResponseText=Vt.prototype.oa,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Ha,Pi=Bi.XhrIo=Vt}).apply("undefined"!==typeof qi?qi:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const $i="@firebase/firestore",Hi="4.9.0";class Wi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wi.UNAUTHENTICATED=new Wi(null),Wi.GOOGLE_CREDENTIALS=new Wi("google-credentials-uid"),Wi.FIRST_PARTY=new Wi("first-party-uid"),Wi.MOCK_USER=new Wi("mock-user");let Gi="12.0.0";const Ki=new $("@firebase/firestore");function Qi(){return Ki.logLevel}function Yi(e){if(Ki.logLevel<=F.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Zi);Ki.debug(`Firestore (${Gi}): ${e}`,...i)}}function Xi(e){if(Ki.logLevel<=F.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Zi);Ki.error(`Firestore (${Gi}): ${e}`,...i)}}function Ji(e){if(Ki.logLevel<=F.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Zi);Ki.warn(`Firestore (${Gi}): ${e}`,...i)}}function Zi(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function es(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,ts(e,r,n)}function ts(e,t,n){let r=`FIRESTORE (${Gi}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Xi(r),new Error(r)}function ns(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||ts(t,i,r)}function rs(e,t){return e}const is={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ss extends T{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class os{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class as{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ls{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wi.UNAUTHENTICATED))}shutdown(){}}class cs{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class us{constructor(e){this.t=e,this.currentUser=Wi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ns(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new os;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new os,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{Yi("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Yi("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new os)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Yi("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(ns("string"==typeof t.accessToken,31837,{l:t}),new as(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ns(null===e||"string"==typeof e,2055,{h:e}),new Wi(e)}}class hs{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Wi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ds{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new hs(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Wi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fs{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ps{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,He(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ns(void 0===this.o,3512);const n=e=>{null!=e.error&&Yi("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,Yi("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Yi("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Yi("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fs(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(ns("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new fs(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ms(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class gs{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=ms(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function vs(e,t){return e<t?-1:e>t?1:0}function ys(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return ws(n)===ws(i)?vs(n,i):ws(n)?1:-1}return vs(e.length,t.length)}const _s=55296,bs=57343;function ws(e){const t=e.charCodeAt(0);return t>=_s&&t<=bs}function xs(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const Ts="__name__";class ks{constructor(e,t,n){void 0===t?t=0:t>e.length&&es(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&es(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ks.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ks?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=ks.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return vs(e.length,t.length)}static compareSegments(e,t){const n=ks.isNumericId(e),r=ks.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?ks.extractNumericId(e).compare(ks.extractNumericId(t)):ys(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ni.fromString(e.substring(4,e.length-2))}}class Ss extends ks{construct(e,t,n){return new Ss(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new ss(is.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(e=>e.length>0))}return new Ss(e)}static emptyPath(){return new Ss([])}}const Cs=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Es extends ks{construct(e,t,n){return new Es(e,t,n)}static isValidIdentifier(e){return Cs.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Es.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Ts}static keyField(){return new Es([Ts])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new ss(is.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new ss(is.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new ss(is.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new ss(is.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Es(t)}static emptyPath(){return new Es([])}}class As{constructor(e){this.path=e}static fromPath(e){return new As(Ss.fromString(e))}static fromName(e){return new As(Ss.fromString(e).popFirst(5))}static empty(){return new As(Ss.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Ss.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Ss.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new As(new Ss(e.slice()))}}function Is(e,t,n){if(!n)throw new ss(is.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Ns(e){if(!As.isDocumentKey(e))throw new ss(is.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Os(e){if(As.isDocumentKey(e))throw new ss(is.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Rs(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Ds(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":es(12329,{type:typeof e})}function Ps(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ss(is.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ds(e);throw new ss(is.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Ms(e,t){const n={typeString:e};return t&&(n.value=t),n}function Ls(e,t){if(!Rs(e))throw new ss(is.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==s&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new ss(is.INVALID_ARGUMENT,n);return!0}const Vs=-62135596800,js=1e6;class Fs{static now(){return Fs.fromMillis(Date.now())}static fromDate(e){return Fs.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*js);return new Fs(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ss(is.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ss(is.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Vs)throw new ss(is.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ss(is.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/js}_compareTo(e){return this.seconds===e.seconds?vs(this.nanoseconds,e.nanoseconds):vs(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Fs._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ls(e,Fs._jsonSchema))return new Fs(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Vs;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Fs._jsonSchemaVersion="firestore/timestamp/1.0",Fs._jsonSchema={type:Ms("string",Fs._jsonSchemaVersion),seconds:Ms("number"),nanoseconds:Ms("number")};class Us{static fromTimestamp(e){return new Us(e)}static min(){return new Us(new Fs(0,0))}static max(){return new Us(new Fs(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const zs=-1;class qs{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}qs.UNKNOWN_ID=-1;function Bs(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Us.fromTimestamp(1e9===r?new Fs(n+1,0):new Fs(n,r));return new Hs(i,As.empty(),t)}function $s(e){return new Hs(e.readTime,e.key,zs)}class Hs{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Hs(Us.min(),As.empty(),zs)}static max(){return new Hs(Us.max(),As.empty(),zs)}}function Ws(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=As.comparator(e.documentKey,t.documentKey),0!==n?n:vs(e.largestBatchId,t.largestBatchId))}const Gs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ks{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Qs(e){if(e.code!==is.FAILED_PRECONDITION||e.message!==Gs)throw e;Yi("LocalStore","Unexpectedly lost primary lease")}class Ys{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&es(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ys((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ys?t:Ys.resolve(t)}catch(e){return Ys.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ys.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ys.reject(t)}static resolve(e){return new Ys((t,n)=>{t(e)})}static reject(e){return new Ys((t,n)=>{n(e)})}static waitFor(e){return new Ys((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Ys.resolve(!1);for(const n of e)t=t.next(e=>e?Ys.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Ys((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Ys((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Xs(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Js(e){return"IndexedDbTransactionError"===e.name}class Zs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Zs.ce=-1;const eo=-1;function to(e){return null==e}function no(e){return 0===e&&1/e==-1/0}function ro(e){return"number"==typeof e&&Number.isInteger(e)&&!no(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const io="\x01";function so(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ao(t)),t=oo(e.get(n),t);return ao(t)}function oo(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case io:n+="\x01\x11";break;default:n+=t}}return n}function ao(e){return e+io+"\x01"}const lo="remoteDocuments",co="owner",uo="mutationQueues",ho="mutations";const fo="documentMutations",po="remoteDocumentsV14",mo="remoteDocumentGlobal",go="targets",vo="targetDocuments",yo="targetGlobal",_o="collectionParents",bo="clientMetadata",wo="bundles",xo="namedQueries",To="indexConfiguration",ko="indexState",So="indexEntries",Co="documentOverlays",Eo="globals",Ao=[uo,ho,fo,lo,go,co,yo,vo,bo,mo,_o,wo,xo],Io=[uo,ho,fo,po,go,co,yo,vo,bo,mo,_o,wo,xo,Co],No=Io,Oo=[...No,To,ko,So];function Ro(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Do(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Po(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Mo{constructor(e,t){this.comparator=e,this.root=t||Vo.EMPTY}insert(e,t){return new Mo(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Vo.BLACK,null,null))}remove(e){return new Mo(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vo.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Lo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Lo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Lo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Lo(this.root,e,this.comparator,!0)}}class Lo{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vo{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Vo.RED,this.left=null!=r?r:Vo.EMPTY,this.right=null!=i?i:Vo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Vo(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Vo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Vo.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw es(43730,{key:this.key,value:this.value});if(this.right.isRed())throw es(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw es(27949);return e+(this.isRed()?0:1)}}Vo.EMPTY=null,Vo.RED=!0,Vo.BLACK=!1,Vo.EMPTY=new class{constructor(){this.size=0}get key(){throw es(57766)}get value(){throw es(16141)}get color(){throw es(16727)}get left(){throw es(29726)}get right(){throw es(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new Vo(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jo{constructor(e){this.comparator=e,this.data=new Mo(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fo(this.data.getIterator())}getIteratorFrom(e){return new Fo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof jo))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new jo(this.comparator);return t.data=e,t}}class Fo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Uo{constructor(e){this.fields=e,e.sort(Es.comparator)}static empty(){return new Uo([])}unionWith(e){let t=new jo(Es.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Uo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xs(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class zo extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class qo{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new zo("Invalid base64 string: "+e):e}}(e);return new qo(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new qo(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return vs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}qo.EMPTY_BYTE_STRING=new qo("");const Bo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $o(e){if(ns(!!e,39018),"string"==typeof e){let t=0;const n=Bo.exec(e);if(ns(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ho(e.seconds),nanos:Ho(e.nanos)}}function Ho(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Wo(e){return"string"==typeof e?qo.fromBase64String(e):qo.fromUint8Array(e)}const Go="server_timestamp",Ko="__type__",Qo="__previous_value__",Yo="__local_write_time__";function Xo(e){const t=(e?.mapValue?.fields||{})[Ko]?.stringValue;return t===Go}function Jo(e){const t=e.mapValue.fields[Qo];return Xo(t)?Jo(t):t}function Zo(e){const t=$o(e.mapValue.fields[Yo].timestampValue);return new Fs(t.seconds,t.nanos)}class ea{constructor(e,t,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const ta="(default)";class na{constructor(e,t){this.projectId=e,this.database=t||ta}static empty(){return new na("","")}get isDefaultDatabase(){return this.database===ta}isEqual(e){return e instanceof na&&e.projectId===this.projectId&&e.database===this.database}}const ra="__type__",ia="__max__",sa={mapValue:{fields:{__type__:{stringValue:ia}}}},oa="__vector__",aa="value";function la(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xo(e)?4:Sa(e)?9007199254740991:Ta(e)?10:11:es(28295,{value:e})}function ca(e,t){if(e===t)return!0;const n=la(e);if(n!==la(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Zo(e).isEqual(Zo(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=$o(e.timestampValue),r=$o(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Wo(e.bytesValue).isEqual(Wo(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ho(e.geoPointValue.latitude)===Ho(t.geoPointValue.latitude)&&Ho(e.geoPointValue.longitude)===Ho(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ho(e.integerValue)===Ho(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ho(e.doubleValue),r=Ho(t.doubleValue);return n===r?no(n)===no(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return xs(e.arrayValue.values||[],t.arrayValue.values||[],ca);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ro(n)!==Ro(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ca(n[i],r[i])))return!1;return!0}(e,t);default:return es(52216,{left:e})}}function ua(e,t){return void 0!==(e.values||[]).find(e=>ca(e,t))}function ha(e,t){if(e===t)return 0;const n=la(e),r=la(t);if(n!==r)return vs(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return vs(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ho(e.integerValue||e.doubleValue),r=Ho(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return da(e.timestampValue,t.timestampValue);case 4:return da(Zo(e),Zo(t));case 5:return ys(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Wo(e),r=Wo(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=vs(n[i],r[i]);if(0!==e)return e}return vs(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=vs(Ho(e.latitude),Ho(t.latitude));return 0!==n?n:vs(Ho(e.longitude),Ho(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return fa(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=t.fields||{},i=n[aa]?.arrayValue,s=r[aa]?.arrayValue,o=vs(i?.values?.length||0,s?.values?.length||0);return 0!==o?o:fa(i,s)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===sa.mapValue&&t===sa.mapValue)return 0;if(e===sa.mapValue)return 1;if(t===sa.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=ys(r[o],s[o]);if(0!==e)return e;const t=ha(n[r[o]],i[s[o]]);if(0!==t)return t}return vs(r.length,s.length)}(e.mapValue,t.mapValue);default:throw es(23264,{he:n})}}function da(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return vs(e,t);const n=$o(e),r=$o(t),i=vs(n.seconds,r.seconds);return 0!==i?i:vs(n.nanos,r.nanos)}function fa(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=ha(n[i],r[i]);if(e)return e}return vs(n.length,r.length)}function pa(e){return ma(e)}function ma(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=$o(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Wo(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return As.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ma(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${ma(e.fields[i])}`;return n+"}"}(e.mapValue):es(61005,{value:e})}function ga(e){switch(la(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Jo(e);return t?16+ga(t):16;case 5:return 2*e.stringValue.length;case 6:return Wo(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+ga(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Do(e.fields,(e,n)=>{t+=e.length+ga(n)}),t}(e.mapValue);default:throw es(13486,{value:e})}}function va(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function ya(e){return!!e&&"integerValue"in e}function _a(e){return!!e&&"arrayValue"in e}function ba(e){return!!e&&"nullValue"in e}function wa(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function xa(e){return!!e&&"mapValue"in e}function Ta(e){const t=(e?.mapValue?.fields||{})[ra]?.stringValue;return t===oa}function ka(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Do(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=ka(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ka(e.arrayValue.values[n]);return t}return{...e}}function Sa(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===ia}class Ca{constructor(e){this.value=e}static empty(){return new Ca({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!xa(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ka(t)}setAll(e){let t=Es.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=ka(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());xa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ca(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];xa(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Do(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Ca(ka(this.value))}}function Ea(e){const t=[];return Do(e.fields,(e,n)=>{const r=new Es([e]);if(xa(n)){const e=Ea(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Uo(t)}class Aa{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Aa(e,0,Us.min(),Us.min(),Us.min(),Ca.empty(),0)}static newFoundDocument(e,t,n,r){return new Aa(e,1,t,Us.min(),n,r,0)}static newNoDocument(e,t){return new Aa(e,2,t,Us.min(),Us.min(),Ca.empty(),0)}static newUnknownDocument(e,t){return new Aa(e,3,t,Us.min(),Us.min(),Ca.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Us.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ca.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ca.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Us.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Aa&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Aa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ia{constructor(e,t){this.position=e,this.inclusive=t}}function Na(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?As.comparator(As.fromName(o.referenceValue),n.key):ha(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Oa(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ca(e.position[n],t.position[n]))return!1;return!0}class Ra{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Da(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Pa{}class Ma extends Pa{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ba(e,t,n):"array-contains"===t?new Ga(e,n):"in"===t?new Ka(e,n):"not-in"===t?new Qa(e,n):"array-contains-any"===t?new Ya(e,n):new Ma(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new $a(e,n):new Ha(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(ha(t,this.value)):null!==t&&la(this.value)===la(t)&&this.matchesComparison(ha(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return es(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class La extends Pa{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new La(e,t)}matches(e){return Va(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Va(e){return"and"===e.op}function ja(e){return Fa(e)&&Va(e)}function Fa(e){for(const t of e.filters)if(t instanceof La)return!1;return!0}function Ua(e){if(e instanceof Ma)return e.field.canonicalString()+e.op.toString()+pa(e.value);if(ja(e))return e.filters.map(e=>Ua(e)).join(",");{const t=e.filters.map(e=>Ua(e)).join(",");return`${e.op}(${t})`}}function za(e,t){return e instanceof Ma?function(e,t){return t instanceof Ma&&e.op===t.op&&e.field.isEqual(t.field)&&ca(e.value,t.value)}(e,t):e instanceof La?function(e,t){return t instanceof La&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&za(n,t.filters[r]),!0)}(e,t):void es(19439)}function qa(e){return e instanceof Ma?function(e){return`${e.field.canonicalString()} ${e.op} ${pa(e.value)}`}(e):e instanceof La?function(e){return e.op.toString()+" {"+e.getFilters().map(qa).join(" ,")+"}"}(e):"Filter"}class Ba extends Ma{constructor(e,t,n){super(e,t,n),this.key=As.fromName(n.referenceValue)}matches(e){const t=As.comparator(e.key,this.key);return this.matchesComparison(t)}}class $a extends Ma{constructor(e,t){super(e,"in",t),this.keys=Wa("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ha extends Ma{constructor(e,t){super(e,"not-in",t),this.keys=Wa("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Wa(e,t){return(t.arrayValue?.values||[]).map(e=>As.fromName(e.referenceValue))}class Ga extends Ma{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _a(t)&&ua(t.arrayValue,this.value)}}class Ka extends Ma{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ua(this.value.arrayValue,t)}}class Qa extends Ma{constructor(e,t){super(e,"not-in",t)}matches(e){if(ua(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!ua(this.value.arrayValue,t)}}class Ya extends Ma{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_a(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>ua(this.value.arrayValue,e))}}class Xa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Te=null}}function Ja(e){return new Xa(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Za(e){const t=rs(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Ua(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),to(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>pa(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>pa(e)).join(",")),t.Te=e}return t.Te}function el(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Da(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!za(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Oa(e.startAt,t.startAt)&&Oa(e.endAt,t.endAt)}function tl(e){return As.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class nl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function rl(e,t,n,r,i,s,o,a){return new nl(e,t,n,r,i,s,o,a)}function il(e){return new nl(e)}function sl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ol(e){return null!==e.collectionGroup}function al(e){const t=rs(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new jo(Es.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new Ra(r,n))}),e.has(Es.keyField().canonicalString())||t.Ie.push(new Ra(Es.keyField(),n))}return t.Ie}function ll(e){const t=rs(e);return t.Ee||(t.Ee=cl(t,al(e))),t.Ee}function cl(e,t){if("F"===e.limitType)return Ja(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Ra(e.field,t)});const n=e.endAt?new Ia(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ia(e.startAt.position,e.startAt.inclusive):null;return Ja(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ul(e,t){const n=e.filters.concat([t]);return new nl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function hl(e,t,n){return new nl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function dl(e,t){return el(ll(e),ll(t))&&e.limitType===t.limitType}function fl(e){return`${Za(ll(e))}|lt:${e.limitType}`}function pl(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>qa(e)).join(", ")}]`),to(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>pa(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>pa(e)).join(",")),`Target(${t})`}(ll(e))}; limitType=${e.limitType})`}function ml(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):As.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of al(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Na(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,al(e),t))&&!(e.endAt&&!function(e,t,n){const r=Na(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,al(e),t))}(e,t)}function gl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function vl(e){return(t,n)=>{let r=!1;for(const i of al(e)){const e=yl(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function yl(e,t,n){const r=e.field.isKeyField()?As.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?ha(r,i):es(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return es(19790,{direction:e.dir})}}class _l{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Do(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Po(this.inner)}size(){return this.innerSize}}const bl=new Mo(As.comparator);function wl(){return bl}const xl=new Mo(As.comparator);function Tl(){let e=xl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function kl(e){let t=xl;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Sl(){return El()}function Cl(){return El()}function El(){return new _l(e=>e.toString(),(e,t)=>e.isEqual(t))}const Al=new Mo(As.comparator),Il=new jo(As.comparator);function Nl(){let e=Il;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Ol=new jo(vs);function Rl(){return Ol}function Dl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:no(t)?"-0":t}}function Pl(e){return{integerValue:""+e}}function Ml(e,t){return ro(t)?Pl(t):Dl(e,t)}class Ll{constructor(){this._=void 0}}function Vl(e,t,n){return e instanceof Ul?function(e,t){const n={fields:{[Ko]:{stringValue:Go},[Yo]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Xo(t)&&(t=Jo(t)),t&&(n.fields[Qo]=t),{mapValue:n}}(n,t):e instanceof zl?ql(e,t):e instanceof Bl?$l(e,t):function(e,t){const n=Fl(e,t),r=Wl(n)+Wl(e.Ae);return ya(n)&&ya(e.Ae)?Pl(r):Dl(e.serializer,r)}(e,t)}function jl(e,t,n){return e instanceof zl?ql(e,t):e instanceof Bl?$l(e,t):n}function Fl(e,t){return e instanceof Hl?function(e){return ya(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Ul extends Ll{}class zl extends Ll{constructor(e){super(),this.elements=e}}function ql(e,t){const n=Gl(t);for(const r of e.elements)n.some(e=>ca(e,r))||n.push(r);return{arrayValue:{values:n}}}class Bl extends Ll{constructor(e){super(),this.elements=e}}function $l(e,t){let n=Gl(t);for(const r of e.elements)n=n.filter(e=>!ca(e,r));return{arrayValue:{values:n}}}class Hl extends Ll{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Wl(e){return Ho(e.integerValue||e.doubleValue)}function Gl(e){return _a(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Kl{constructor(e,t){this.version=e,this.transformResults=t}}class Ql{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ql}static exists(e){return new Ql(void 0,e)}static updateTime(e){return new Ql(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yl(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Xl{}function Jl(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new lc(e.key,Ql.none()):new rc(e.key,e.data,Ql.none());{const n=e.data,r=Ca.empty();let i=new jo(Es.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new ic(e.key,r,new Uo(i.toArray()),Ql.none())}}function Zl(e,t,n){e instanceof rc?function(e,t,n){const r=e.value.clone(),i=oc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ic?function(e,t,n){if(!Yl(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=oc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(sc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ec(e,t,n,r){return e instanceof rc?function(e,t,n,r){if(!Yl(e.precondition,t))return n;const i=e.value.clone(),s=ac(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof ic?function(e,t,n,r){if(!Yl(e.precondition,t))return n;const i=ac(e.fieldTransforms,r,t),s=t.data;return s.setAll(sc(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Yl(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function tc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Fl(r.transform,e||null);null!=i&&(null===n&&(n=Ca.empty()),n.set(r.field,i))}return n||null}function nc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&xs(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof zl&&t instanceof zl||e instanceof Bl&&t instanceof Bl?xs(e.elements,t.elements,ca):e instanceof Hl&&t instanceof Hl?ca(e.Ae,t.Ae):e instanceof Ul&&t instanceof Ul}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class rc extends Xl{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ic extends Xl{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function sc(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function oc(e,t,n){const r=new Map;ns(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,jl(o,a,n[i]))}return r}function ac(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Vl(e,s,t))}return r}class lc extends Xl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cc extends Xl{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class uc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Zl(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ec(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ec(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Cl();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Jl(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Us.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Nl())}isEqual(e){return this.batchId===e.batchId&&xs(this.mutations,e.mutations,(e,t)=>nc(e,t))&&xs(this.baseMutations,e.baseMutations,(e,t)=>nc(e,t))}}class hc{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){ns(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=Al;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new hc(e,t,n,r)}}class dc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class fc{constructor(e,t){this.count=e,this.unchangedNames=t}}var pc,mc;function gc(e){switch(e){case is.OK:return es(64938);case is.CANCELLED:case is.UNKNOWN:case is.DEADLINE_EXCEEDED:case is.RESOURCE_EXHAUSTED:case is.INTERNAL:case is.UNAVAILABLE:case is.UNAUTHENTICATED:return!1;case is.INVALID_ARGUMENT:case is.NOT_FOUND:case is.ALREADY_EXISTS:case is.PERMISSION_DENIED:case is.FAILED_PRECONDITION:case is.ABORTED:case is.OUT_OF_RANGE:case is.UNIMPLEMENTED:case is.DATA_LOSS:return!0;default:return es(15467,{code:e})}}function vc(e){if(void 0===e)return Xi("GRPC error has no .code"),is.UNKNOWN;switch(e){case pc.OK:return is.OK;case pc.CANCELLED:return is.CANCELLED;case pc.UNKNOWN:return is.UNKNOWN;case pc.DEADLINE_EXCEEDED:return is.DEADLINE_EXCEEDED;case pc.RESOURCE_EXHAUSTED:return is.RESOURCE_EXHAUSTED;case pc.INTERNAL:return is.INTERNAL;case pc.UNAVAILABLE:return is.UNAVAILABLE;case pc.UNAUTHENTICATED:return is.UNAUTHENTICATED;case pc.INVALID_ARGUMENT:return is.INVALID_ARGUMENT;case pc.NOT_FOUND:return is.NOT_FOUND;case pc.ALREADY_EXISTS:return is.ALREADY_EXISTS;case pc.PERMISSION_DENIED:return is.PERMISSION_DENIED;case pc.FAILED_PRECONDITION:return is.FAILED_PRECONDITION;case pc.ABORTED:return is.ABORTED;case pc.OUT_OF_RANGE:return is.OUT_OF_RANGE;case pc.UNIMPLEMENTED:return is.UNIMPLEMENTED;case pc.DATA_LOSS:return is.DATA_LOSS;default:return es(39323,{code:e})}}(mc=pc||(pc={}))[mc.OK=0]="OK",mc[mc.CANCELLED=1]="CANCELLED",mc[mc.UNKNOWN=2]="UNKNOWN",mc[mc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mc[mc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mc[mc.NOT_FOUND=5]="NOT_FOUND",mc[mc.ALREADY_EXISTS=6]="ALREADY_EXISTS",mc[mc.PERMISSION_DENIED=7]="PERMISSION_DENIED",mc[mc.UNAUTHENTICATED=16]="UNAUTHENTICATED",mc[mc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mc[mc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mc[mc.ABORTED=10]="ABORTED",mc[mc.OUT_OF_RANGE=11]="OUT_OF_RANGE",mc[mc.UNIMPLEMENTED=12]="UNIMPLEMENTED",mc[mc.INTERNAL=13]="INTERNAL",mc[mc.UNAVAILABLE=14]="UNAVAILABLE",mc[mc.DATA_LOSS=15]="DATA_LOSS";let yc=null;function _c(){return new TextEncoder}const bc=new Ni([4294967295,4294967295],0);function wc(e){const t=_c().encode(e),n=new Oi;return n.update(t),new Uint8Array(n.digest())}function xc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Ni([n,r],0),new Ni([i,s],0)]}class Tc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new kc(`Invalid padding: ${t}`);if(n<0)throw new kc(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new kc(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new kc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ni.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(Ni.fromNumber(n)));return 1===r.compare(bc)&&(r=new Ni([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=wc(e),[n,r]=xc(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Tc(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=wc(e),[n,r]=xc(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class kc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Sc{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Cc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Sc(Us.min(),r,new Mo(vs),wl(),Nl())}}class Cc{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Cc(n,t,Nl(),Nl(),Nl())}}class Ec{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class Ac{constructor(e,t){this.targetId=e,this.Ce=t}}class Ic{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qo.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Nc{constructor(){this.ve=0,this.Fe=Dc(),this.Me=qo.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Nl(),t=Nl(),n=Nl();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:es(38017,{changeType:i})}}),new Cc(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Dc()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ns(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Oc{constructor(e){this.Ge=e,this.ze=new Map,this.je=wl(),this.Je=Rc(),this.He=Rc(),this.Ye=new Mo(vs)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:es(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(tl(i))if(0===n){const e=new As(i.path);this.et(t,e,Aa.newNoDocument(e,Us.min()))}else ns(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){const n=this.ut(e),i=n?this.ct(n,e,r):1;if(0!==i){this.it(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}yc?.lt(function(e,t,n,r,i){const s={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(s.bloomFilter={applied:0===i,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),s}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Wo(n).toUint8Array()}catch(e){if(e instanceof zo)return Ji("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Tc(s,r,i)}catch(e){return Ji(e instanceof kc?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.ge?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&tl(i.target)){const t=new As(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,Aa.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=Nl();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new Sc(e,t,this.Ye,this.je,n);return this.je=wl(),this.Je=Rc(),this.He=Rc(),this.Ye=new Mo(vs),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Nc,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new jo(vs),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new jo(vs),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Yi("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Nc),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Rc(){return new Mo(As.comparator)}function Dc(){return new Mo(As.comparator)}const Pc={asc:"ASCENDING",desc:"DESCENDING"},Mc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Lc={and:"AND",or:"OR"};class Vc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function jc(e,t){return e.useProto3Json||to(t)?t:{value:t}}function Fc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Uc(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function zc(e,t){return Fc(e,t.toTimestamp())}function qc(e){return ns(!!e,49232),Us.fromTimestamp(function(e){const t=$o(e);return new Fs(t.seconds,t.nanos)}(e))}function Bc(e,t){return $c(e,t).canonicalString()}function $c(e,t){const n=function(e){return new Ss(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Hc(e){const t=Ss.fromString(e);return ns(hu(t),10190,{key:t.toString()}),t}function Wc(e,t){return Bc(e.databaseId,t.path)}function Gc(e,t){const n=Hc(t);if(n.get(1)!==e.databaseId.projectId)throw new ss(is.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ss(is.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new As(Xc(n))}function Kc(e,t){return Bc(e.databaseId,t)}function Qc(e){const t=Hc(e);return 4===t.length?Ss.emptyPath():Xc(t)}function Yc(e){return new Ss(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Xc(e){return ns(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Jc(e,t,n){return{name:Wc(e,t),fields:n.value.mapValue.fields}}function Zc(e,t){let n;if(t instanceof rc)n={update:Jc(e,t.key,t.value)};else if(t instanceof lc)n={delete:Wc(e,t.key)};else if(t instanceof ic)n={update:Jc(e,t.key,t.data),updateMask:uu(t.fieldMask)};else{if(!(t instanceof cc))return es(16599,{Vt:t.type});n={verify:Wc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Ul)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof zl)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Bl)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Hl)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw es(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:zc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:es(27497)}(e,t.precondition)),n}function eu(e,t){return{documents:[Kc(e,t.path)]}}function tu(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Kc(e,i);const s=function(e){if(0!==e.length)return cu(La.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:au(e.field),direction:iu(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=jc(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function nu(e){let t=Qc(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ns(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=ru(e);return t instanceof La&&ja(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new Ra(lu(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,to(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Ia(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Ia(n,t)}(n.endAt)),rl(t,i,o,s,a,"F",l,c)}function ru(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=lu(e.unaryFilter.field);return Ma.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=lu(e.unaryFilter.field);return Ma.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=lu(e.unaryFilter.field);return Ma.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=lu(e.unaryFilter.field);return Ma.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return es(61313);default:return es(60726)}}(e):void 0!==e.fieldFilter?function(e){return Ma.create(lu(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return es(58110);default:return es(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return La.create(e.compositeFilter.filters.map(e=>ru(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return es(1026)}}(e.compositeFilter.op))}(e):es(30097,{filter:e})}function iu(e){return Pc[e]}function su(e){return Mc[e]}function ou(e){return Lc[e]}function au(e){return{fieldPath:e.canonicalString()}}function lu(e){return Es.fromServerFormat(e.fieldPath)}function cu(e){return e instanceof Ma?function(e){if("=="===e.op){if(wa(e.value))return{unaryFilter:{field:au(e.field),op:"IS_NAN"}};if(ba(e.value))return{unaryFilter:{field:au(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(wa(e.value))return{unaryFilter:{field:au(e.field),op:"IS_NOT_NAN"}};if(ba(e.value))return{unaryFilter:{field:au(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:au(e.field),op:su(e.op),value:e.value}}}(e):e instanceof La?function(e){const t=e.getFilters().map(e=>cu(e));return 1===t.length?t[0]:{compositeFilter:{op:ou(e.op),filters:t}}}(e):es(54877,{filter:e})}function uu(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function hu(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class du{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Us.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Us.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:qo.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new du(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new du(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new du(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new du(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class fu{constructor(e){this.yt=e}}function pu(e){const t=nu({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?hl(t,t.limit,"L"):t}class mu{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ho(e.integerValue));else if("doubleValue"in e){const n=Ho(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),no(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=$o(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Wo(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?Sa(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Ta(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):es(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){const n=e.fields||{};this.Ft(t,53);const r=aa,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(Ho(i)),this.Ot(r,t),this.Ct(n[r],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),As.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}mu.Kt=new mu;class gu{constructor(){this.Cn=new vu}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ys.resolve()}getCollectionParents(e,t){return Ys.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ys.resolve()}deleteFieldIndex(e,t){return Ys.resolve()}deleteAllFieldIndexes(e){return Ys.resolve()}createTargetIndexes(e,t){return Ys.resolve()}getDocumentsMatchingTarget(e,t){return Ys.resolve(null)}getIndexType(e,t){return Ys.resolve(0)}getFieldIndexes(e,t){return Ys.resolve([])}getNextCollectionGroupToUpdate(e){return Ys.resolve(null)}getMinOffset(e,t){return Ys.resolve(Hs.min())}getMinOffsetFromCollectionGroup(e,t){return Ys.resolve(Hs.min())}updateCollectionGroup(e,t,n){return Ys.resolve()}updateIndexEntries(e,t){return Ys.resolve()}}class vu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new jo(Ss.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new jo(Ss.comparator)).toArray()}}new Uint8Array(0);const yu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_u=41943040;class bu{static withCacheSize(e){return new bu(e,bu.DEFAULT_COLLECTION_PERCENTILE,bu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}bu.DEFAULT_COLLECTION_PERCENTILE=10,bu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bu.DEFAULT=new bu(_u,bu.DEFAULT_COLLECTION_PERCENTILE,bu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bu.DISABLED=new bu(-1,0,0);class wu{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new wu(0)}static cr(){return new wu(-1)}}const xu="LruGarbageCollector",Tu=1048576;function ku(e,t){let[n,r]=e,[i,s]=t;const o=vs(n,i);return 0===o?vs(r,s):o}class Su{constructor(e){this.Ir=e,this.buffer=new jo(ku),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ku(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Cu{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Yi(xu,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Js(e)?Yi(xu,"Ignoring IndexedDB error during garbage collection: ",e):await Qs(e)}await this.Vr(3e5)})}}class Eu{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Ys.resolve(Zs.ce);const n=new Su(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Yi("LruGarbageCollector","Garbage collection skipped; disabled"),Ys.resolve(yu)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Yi("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yu):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Yi("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Qi()<=F.DEBUG&&Yi("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-c}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(a-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-a)+"ms\n"+`Total Duration: ${l-c}ms`),Ys.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function Au(e,t){return new Eu(e,t)}class Iu{constructor(){this.changes=new _l(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Aa.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ys.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Nu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ou{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&ec(n.mutation,e,Uo.empty(),Fs.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Nl()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nl();const r=Sl();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Tl();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Sl();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Nl()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=wl();const s=El(),o=El();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof ic)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),ec(o.mutation,t,o.mutation.getFieldMask(),Fs.now())):s.set(t.key,Uo.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>o.set(e,new Nu(t,s.get(e)??null))),o))}recalculateAndSaveOverlays(e,t){const n=El();let r=new Mo((e,t)=>e-t),i=Nl();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||Uo.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Nl()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=Cl();l.forEach(e=>{if(!i.has(e)){const r=Jl(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Ys.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return As.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ol(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Ys.resolve(Sl());let o=zs,a=i;return s.next(t=>Ys.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Ys.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,Nl())).next(e=>({batchId:o,changes:kl(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new As(t)).next(e=>{let t=Tl();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Tl();return this.indexManager.getCollectionParents(e,i).next(o=>Ys.forEach(o,o=>{const a=function(e,t){return new nl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Aa.newInvalidDocument(r)))});let n=Tl();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&ec(s.mutation,r,Uo.empty(),Fs.now()),ml(t,r)&&(n=n.insert(e,r))}),n})}}class Ru{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ys.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:qc(e.createTime)}}(t)),Ys.resolve()}getNamedQuery(e,t){return Ys.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:pu(e.bundledQuery),readTime:qc(e.readTime)}}(t)),Ys.resolve()}}class Du{constructor(){this.overlays=new Mo(As.comparator),this.qr=new Map}getOverlay(e,t){return Ys.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Sl();return Ys.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Ys.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Ys.resolve()}getOverlaysForCollection(e,t,n){const r=Sl(),i=t.length+1,s=new As(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ys.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new Mo((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Sl(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Sl(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Ys.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new dc(t,n));let i=this.qr.get(t);void 0===i&&(i=Nl(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class Pu{constructor(){this.sessionToken=qo.EMPTY_BYTE_STRING}getSessionToken(e){return Ys.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ys.resolve()}}class Mu{constructor(){this.Qr=new jo(Lu.$r),this.Ur=new jo(Lu.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Lu(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Lu(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new As(new Ss([])),n=new Lu(t,e),r=new Lu(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new As(new Ss([])),n=new Lu(t,e),r=new Lu(t,e+1);let i=Nl();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Lu(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Lu{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return As.comparator(e.key,t.key)||vs(e.Yr,t.Yr)}static Kr(e,t){return vs(e.Yr,t.Yr)||As.comparator(e.key,t.key)}}class Vu{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new jo(Lu.$r)}checkEmpty(e){return Ys.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new uc(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Zr=this.Zr.add(new Lu(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ys.resolve(s)}lookupMutationBatch(e,t){return Ys.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Ys.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ys.resolve(0===this.mutationQueue.length?eo:this.tr-1)}getAllMutationBatches(e){return Ys.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Lu(t,0),r=new Lu(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Ys.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new jo(vs);return t.forEach(e=>{const t=new Lu(e,0),r=new Lu(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Ys.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;As.isDocumentKey(i)||(i=i.child(""));const s=new Lu(new As(i),0);let o=new jo(vs);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},s),Ys.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){ns(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Ys.forEach(t.mutations,r=>{const i=new Lu(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Lu(t,0),r=this.Zr.firstAfterOrEqual(n);return Ys.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ys.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ju{constructor(e){this.ri=e,this.docs=new Mo(As.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ys.resolve(n?n.document.mutableCopy():Aa.newInvalidDocument(t))}getEntries(e,t){let n=wl();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Aa.newInvalidDocument(e))}),Ys.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=wl();const s=t.path,o=new As(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Ws($s(o),n)<=0||(r.has(o.key)||ml(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Ys.resolve(i)}getAllFromCollectionGroup(e,t,n,r){es(9500)}ii(e,t){return Ys.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Fu(this)}getSize(e){return Ys.resolve(this.size)}}class Fu extends Iu{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Ys.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Uu{constructor(e){this.persistence=e,this.si=new _l(e=>Za(e),el),this.lastRemoteSnapshotVersion=Us.min(),this.highestTargetId=0,this.oi=0,this._i=new Mu,this.targetCount=0,this.ai=wu.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Ys.resolve()}getLastRemoteSnapshotVersion(e){return Ys.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ys.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ys.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Ys.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new wu(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ys.resolve()}updateTargetData(e,t){return this.Pr(t),Ys.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ys.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Ys.waitFor(i).next(()=>r)}getTargetCount(e){return Ys.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Ys.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Ys.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Ys.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ys.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Ys.resolve(n)}containsKey(e,t){return Ys.resolve(this._i.containsKey(t))}}class zu{constructor(e,t){this.ui={},this.overlays={},this.ci=new Zs(0),this.li=!1,this.li=!0,this.hi=new Pu,this.referenceDelegate=e(this),this.Pi=new Uu(this),this.indexManager=new gu,this.remoteDocumentCache=function(e){return new ju(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new fu(t),this.Ii=new Ru(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Du,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Vu(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Yi("MemoryPersistence","Starting transaction:",e);const r=new qu(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Ys.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class qu extends Ks{constructor(e){super(),this.currentSequenceNumber=e}}class Bu{constructor(e){this.persistence=e,this.Ri=new Mu,this.Vi=null}static mi(e){return new Bu(e)}get fi(){if(this.Vi)return this.Vi;throw es(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Ys.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Ys.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ys.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ys.forEach(this.fi,n=>{const r=As.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Us.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Ys.or([()=>Ys.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class $u{constructor(e,t){this.persistence=e,this.pi=new _l(e=>so(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Au(this,t)}static mi(e,t){return new $u(e,t)}Ei(){}di(e){return Ys.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Ys.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Ys.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,Us.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ys.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ys.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ys.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ys.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ga(e.data.value)),t}br(e,t,n){return Ys.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Ys.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Hu{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=Nl(),r=Nl();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Hu(e,t.fromCache,n,r)}}class Wu{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Gu{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=w()?8:Xs(_())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Wu;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Qi()<=F.DEBUG&&Yi("QueryEngine","SDK will not create cache indexes for query:",pl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ys.resolve()):(Qi()<=F.DEBUG&&Yi("QueryEngine","Query:",pl(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Qi()<=F.DEBUG&&Yi("QueryEngine","The SDK decides to create cache indexes for query:",pl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ll(t))):Ys.resolve())}ys(e,t){if(sl(t))return Ys.resolve(null);let n=ll(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=hl(t,null,"F"),n=ll(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Nl(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,hl(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return sl(t)||r.isEqual(Us.min())?Ys.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?Ys.resolve(null):(Qi()<=F.DEBUG&&Yi("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),pl(t)),this.vs(e,s,t,Bs(r,zs)).next(e=>e))})}Ds(e,t){let n=new jo(vl(e));return t.forEach((t,r)=>{ml(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return Qi()<=F.DEBUG&&Yi("QueryEngine","Using full collection scan to execute query:",pl(t)),this.ps.getDocumentsMatchingQuery(e,t,Hs.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Ku="LocalStore";class Qu{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Mo(vs),this.xs=new _l(e=>Za(e),el),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ou(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Yu(e,t,n,r){return new Qu(e,t,n,r)}async function Xu(e,t){const n=rs(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=Nl();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function Ju(e){const t=rs(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Zu(e,t,n){let r=Nl(),i=Nl();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=wl();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Us.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Yi(Ku,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{ks:r,qs:i}})}function eh(e,t){const n=rs(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=eo),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function th(e,t){const n=rs(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Ys.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new du(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function nh(e,t,n){const r=rs(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Js(e))throw e;Yi(Ku,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function rh(e,t,n){const r=rs(e);let i=Us.min(),s=Nl();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=rs(e),i=r.xs.get(n);return void 0!==i?Ys.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,ll(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:Us.min(),n?s:Nl())).next(e=>(ih(r,gl(t),e),{documents:e,Qs:s})))}function ih(e,t,n){let r=e.Os.get(t)||Us.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class sh{constructor(){this.activeTargetIds=Rl()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class oh{constructor(){this.Mo=new sh,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new sh,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ah{Oo(e){}shutdown(){}}const lh="ConnectivityMonitor";class ch{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Yi(lh,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Yi(lh,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let uh=null;function hh(){return null===uh?uh=268435456+Math.round(2147483648*Math.random()):uh++,"0x"+uh.toString(16)}const dh="RestConnection",fh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ph{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===ta?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,i){const s=hh(),o=this.zo(e,t.toUriEncodedString());Yi(dh,`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,i);const{host:l}=new URL(o),c=p(l);return this.Jo(e,o,a,n,c).then(t=>(Yi(dh,`Received RPC '${e}' ${s}: `,t),t),t=>{throw Ji(dh,`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Gi,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=fh[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class mh{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const gh="WebChannelConnection";class vh extends ph{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=hh();return new Promise((i,o)=>{const a=new Pi;a.setWithCredentials(!0),a.listenOnce(Li.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Vi.NO_ERROR:const t=a.getResponseJson();Yi(gh,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case Vi.TIMEOUT:Yi(gh,`RPC '${e}' ${s} timed out`),o(new ss(is.DEADLINE_EXCEEDED,"Request time out"));break;case Vi.HTTP_ERROR:const n=a.getStatus();if(Yi(gh,`RPC '${e}' ${s} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=e?.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(is).indexOf(t)>=0?t:is.UNKNOWN}(t.status);o(new ss(e,t.message))}else o(new ss(is.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ss(is.UNAVAILABLE,"Connection failed."));break;default:es(9055,{l_:e,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{Yi(gh,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(r);Yi(gh,`RPC '${e}' ${s} sending request:`,r),a.send(t,"POST",l,n,15)})}T_(e,t,n){const r=hh(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=zi(),o=Ui(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Yi(gh,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=s.createWebChannel(c,a);this.I_(u);let h=!1,d=!1;const f=new mh({Yo:t=>{d?Yi(gh,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(h||(Yi(gh,`Opening RPC '${e}' stream ${r} transport.`),u.open(),h=!0),Yi(gh,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Mi.EventType.OPEN,()=>{d||(Yi(gh,`RPC '${e}' stream ${r} transport opened.`),f.o_())}),p(u,Mi.EventType.CLOSE,()=>{d||(d=!0,Yi(gh,`RPC '${e}' stream ${r} transport closed`),f.a_(),this.E_(u))}),p(u,Mi.EventType.ERROR,t=>{d||(d=!0,Ji(gh,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),f.a_(new ss(is.UNAVAILABLE,"The operation could not be completed")))}),p(u,Mi.EventType.MESSAGE,t=>{if(!d){const n=t.data[0];ns(!!n,16349);const i=n,s=i?.error||i[0]?.error;if(s){Yi(gh,`RPC '${e}' stream ${r} received error:`,s);const t=s.status;let n=function(e){const t=pc[e];if(void 0!==t)return vc(t)}(t),i=s.message;void 0===n&&(n=is.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,f.a_(new ss(n,i)),u.close()}else Yi(gh,`RPC '${e}' stream ${r} received:`,n),f.u_(n)}}),p(o,Fi.STAT_EVENT,t=>{t.stat===ji.PROXY?Yi(gh,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===ji.NOPROXY&&Yi(gh,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function yh(){return"undefined"!=typeof document?document:null}function _h(e){return new Vc(e,!0)}class bh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Yi("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const wh="PersistentStream";class xh{constructor(e,t,n,r,i,s,o,a){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bh(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===is.RESOURCE_EXHAUSTED?(Xi(t.toString()),Xi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===is.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new ss(is.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Yi(wh,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Yi(wh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Th extends xh{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:es(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(ns(void 0===t||"string"==typeof t,58123),qo.fromBase64String(t||"")):(ns(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),qo.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?is.UNKNOWN:vc(e.code);return new ss(t,e.message||"")}(o);n=new Ic(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Gc(e,r.document.name),s=qc(r.document.updateTime),o=r.document.createTime?qc(r.document.createTime):Us.min(),a=new Ca({mapValue:{fields:r.document.fields}}),l=Aa.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Ec(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Gc(e,r.document),s=r.readTime?qc(r.readTime):Us.min(),o=Aa.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ec([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Gc(e,r.document),s=r.removedTargetIds||[];n=new Ec([],s,i,null)}else{if(!("filter"in t))return es(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new fc(r,i),o=e.targetId;n=new Ac(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Us.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Us.min():t.readTime?qc(t.readTime):Us.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Yc(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=tl(r)?{documents:eu(e,r)}:{query:tu(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Uc(e,t.resumeToken);const r=jc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Us.min())>0){n.readTime=Fc(e,t.snapshotVersion.toTimestamp());const r=jc(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return es(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Yc(this.serializer),t.removeTarget=e,this.q_(t)}}class kh extends xh{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ns(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ns(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){ns(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(ns(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?qc(e.updateTime):qc(t);return n.isEqual(Us.min())&&(n=qc(t)),new Kl(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=qc(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Yc(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Zc(this.serializer,e))};this.q_(t)}}class Sh{}class Ch extends Sh{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ss(is.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Go(e,$c(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===is.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ss(is.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Ho(e,$c(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===is.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new ss(is.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Eh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xi(t),this.aa=!1):Yi("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const Ah="RemoteStore";class Ih{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{jh(this)&&(Yi(Ah,"Restarting streams for network reachability change."),await async function(e){const t=rs(e);t.Ea.add(4),await Oh(t),t.Ra.set("Unknown"),t.Ea.delete(4),await Nh(t)}(this))})}),this.Ra=new Eh(n,r)}}async function Nh(e){if(jh(e))for(const t of e.da)await t(!0)}async function Oh(e){for(const t of e.da)await t(!1)}function Rh(e,t){const n=rs(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Vh(n)?Lh(n):rd(n).O_()&&Ph(n,t))}function Dh(e,t){const n=rs(e),r=rd(n);n.Ia.delete(t),r.O_()&&Mh(n,t),0===n.Ia.size&&(r.O_()?r.L_():jh(n)&&n.Ra.set("Unknown"))}function Ph(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Us.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}rd(e).Y_(t)}function Mh(e,t){e.Va.Ue(t),rd(e).Z_(t)}function Lh(e){e.Va=new Oc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),rd(e).start(),e.Ra.ua()}function Vh(e){return jh(e)&&!rd(e).x_()&&e.Ia.size>0}function jh(e){return 0===rs(e).Ea.size}function Fh(e){e.Va=void 0}async function Uh(e){e.Ra.set("Online")}async function zh(e){e.Ia.forEach((t,n)=>{Ph(e,t)})}async function qh(e,t){Fh(e),Vh(e)?(e.Ra.ha(t),Lh(e)):e.Ra.set("Unknown")}async function Bh(e,t,n){if(e.Ra.set("Online"),t instanceof Ic&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){Yi(Ah,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await $h(e,n)}else if(t instanceof Ec?e.Va.Ze(t):t instanceof Ac?e.Va.st(t):e.Va.tt(t),!n.isEqual(Us.min()))try{const t=await Ju(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(qo.EMPTY_BYTE_STRING,r.snapshotVersion)),Mh(e,t);const i=new du(r.target,t,n,r.sequenceNumber);Ph(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Yi(Ah,"Failed to raise snapshot:",t),await $h(e,t)}}async function $h(e,t,n){if(!Js(t))throw t;e.Ea.add(1),await Oh(e),e.Ra.set("Offline"),n||(n=()=>Ju(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Yi(Ah,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Nh(e)})}function Hh(e,t){return t().catch(n=>$h(e,n,t))}async function Wh(e){const t=rs(e),n=id(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:eo;for(;Gh(t);)try{const e=await eh(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Kh(t,e)}catch(e){await $h(t,e)}Qh(t)&&Yh(t)}function Gh(e){return jh(e)&&e.Ta.length<10}function Kh(e,t){e.Ta.push(t);const n=id(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Qh(e){return jh(e)&&!id(e).x_()&&e.Ta.length>0}function Yh(e){id(e).start()}async function Xh(e){id(e).ra()}async function Jh(e){const t=id(e);for(const n of e.Ta)t.ea(n.mutations)}async function Zh(e,t,n){const r=e.Ta.shift(),i=hc.from(r,t,n);await Hh(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Wh(e)}async function ed(e,t){t&&id(e).X_&&await async function(e,t){if(function(e){return gc(e)&&e!==is.ABORTED}(t.code)){const n=e.Ta.shift();id(e).B_(),await Hh(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Wh(e)}}(e,t),Qh(e)&&Yh(e)}async function td(e,t){const n=rs(e);n.asyncQueue.verifyOperationInProgress(),Yi(Ah,"RemoteStore received new credentials");const r=jh(n);n.Ea.add(3),await Oh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Nh(n)}async function nd(e,t){const n=rs(e);t?(n.Ea.delete(2),await Nh(n)):t||(n.Ea.add(2),await Oh(n),n.Ra.set("Unknown"))}function rd(e){return e.ma||(e.ma=function(e,t,n){const r=rs(e);return r.sa(),new Th(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Uh.bind(null,e),t_:zh.bind(null,e),r_:qh.bind(null,e),H_:Bh.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Vh(e)?Lh(e):e.Ra.set("Unknown")):(await e.ma.stop(),Fh(e))})),e.ma}function id(e){return e.fa||(e.fa=function(e,t,n){const r=rs(e);return r.sa(),new kh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Xh.bind(null,e),r_:ed.bind(null,e),ta:Jh.bind(null,e),na:Zh.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Wh(e)):(await e.fa.stop(),e.Ta.length>0&&(Yi(Ah,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}class sd{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new sd(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ss(is.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function od(e,t){if(Xi("AsyncQueue",`${t}: ${e}`),Js(e))return new ss(is.UNAVAILABLE,`${t}: ${e}`);throw e}class ad{static emptySet(e){return new ad(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||As.comparator(t.key,n.key):(e,t)=>As.comparator(e.key,t.key),this.keyedMap=Tl(),this.sortedSet=new Mo(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ad))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ad;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ld{constructor(){this.ga=new Mo(As.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):es(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class cd{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new cd(e,t,ad.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class ud{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class hd{constructor(){this.queries=dd(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=rs(e),r=n.queries;n.queries=dd(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new ss(is.ABORTED,"Firestore shutting down"))}}function dd(){return new _l(e=>fl(e),dl)}async function fd(e,t){const n=rs(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new ud,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=od(e,`Initialization of query '${pl(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&vd(n)}async function pd(e,t){const n=rs(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function md(e,t){const n=rs(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&vd(n)}function gd(e,t,n){const r=rs(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function vd(e){e.Ca.forEach(e=>{e.next()})}var yd,_d;(_d=yd||(yd={})).Ma="default",_d.Cache="cache";class bd{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new cd(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=cd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yd.Cache}}class wd{constructor(e){this.key=e}}class xd{constructor(e){this.key=e}}class Td{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Nl(),this.mutatedKeys=Nl(),this.eu=vl(e),this.tu=new ad(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new ld,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=ml(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.eu(u,a)>0||l&&this.eu(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return es(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=r??!1;const o=t&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,l=a!==this.Za;return this.Za=a,0!==s.length||l?{snapshot:new cd(this.query,e.tu,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new ld,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Nl(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new xd(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new wd(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=Nl();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return cd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const kd="SyncEngine";class Sd{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Cd{constructor(e){this.key=e,this.hu=!1}}class Ed{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new _l(e=>fl(e),dl),this.Iu=new Map,this.Eu=new Set,this.du=new Mo(As.comparator),this.Au=new Map,this.Ru=new Mu,this.Vu={},this.mu=new Map,this.fu=wu.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function Ad(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Qd(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Nd(r,t,n,!0),i}async function Id(e,t){const n=Qd(e);await Nd(n,t,!0,!1)}async function Nd(e,t,n,r){const i=await th(e.localStore,ll(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await Od(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&Rh(e.remoteStore,i),a}async function Od(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await rh(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return Bd(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const s=await rh(e.localStore,t,!0),o=new Td(t,s.Qs),a=o.ru(s.documents),l=Cc.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);Bd(e,n,c.au);const u=new Sd(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function Rd(e,t,n){const r=rs(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!dl(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await nh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Dh(r.remoteStore,i.targetId),zd(r,i.targetId)}).catch(Qs)):(zd(r,i.targetId),await nh(r.localStore,i.targetId,!0))}async function Dd(e,t){const n=rs(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Dh(n.remoteStore,r.targetId))}async function Pd(e,t){const n=rs(e);try{const e=await function(e,t){const n=rs(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(qo.EMPTY_BYTE_STRING,Us.min()).withLastLimboFreeSnapshotVersion(Us.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.Pi.updateTargetData(e,c))});let a=wl(),l=Nl();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Zu(e,s,t.documentUpdates).next(e=>{a=e.ks,l=e.qs})),!r.isEqual(Us.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Ys.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(ns(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?ns(r.hu,14607):e.removedDocuments.size>0&&(ns(r.hu,42227),r.hu=!1))}),await Wd(n,e,t)}catch(e){await Qs(e)}}function Md(e,t,n){const r=rs(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=rs(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&vd(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Ld(e,t,n){const r=rs(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new Mo(As.comparator);e=e.insert(s,Aa.newNoDocument(s,Us.min()));const n=Nl().add(s),i=new Sc(Us.min(),new Map,new Mo(vs),e,n);await Pd(r,i),r.du=r.du.remove(s),r.Au.delete(t),Hd(r)}else await nh(r.localStore,t,!1).then(()=>zd(r,t,n)).catch(Qs)}async function Vd(e,t){const n=rs(e),r=t.batch.batchId;try{const e=await function(e,t){const n=rs(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Ys.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);ns(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Nl();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Ud(n,r,null),Fd(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Wd(n,e)}catch(e){await Qs(e)}}async function jd(e,t,n){const r=rs(e);try{const e=await function(e,t){const n=rs(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(ns(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Ud(r,t,n),Fd(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Wd(r,e)}catch(n){await Qs(n)}}function Fd(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Ud(e,t,n){const r=rs(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function zd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||qd(e,t)})}function qd(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Dh(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Hd(e))}function Bd(e,t,n){for(const r of n)r instanceof wd?(e.Ru.addReference(r.key,t),$d(e,r)):r instanceof xd?(Yi(kd,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||qd(e,r.key)):es(19791,{wu:r})}function $d(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(Yi(kd,"New document in limbo: "+n),e.Eu.add(r),Hd(e))}function Hd(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new As(Ss.fromString(t)),r=e.fu.next();e.Au.set(r,new Cd(n)),e.du=e.du.insert(n,r),Rh(e.remoteStore,new du(ll(il(n.path)),r,"TargetPurposeLimboResolution",Zs.ce))}}async function Wd(e,t,n){const r=rs(e),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{o.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){const t=e?!e.fromCache:n?.targetChanges.get(a.targetId)?.current;r.sharedClientState.updateQueryState(a.targetId,t?"current":"not-current")}if(e){i.push(e);const t=Hu.As(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(e,t){const n=rs(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Ys.forEach(t,t=>Ys.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Ys.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Js(e))throw e;Yi(Ku,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function Gd(e,t){const n=rs(e);if(!n.currentUser.isEqual(t)){Yi(kd,"User change. New user:",t.toKey());const e=await Xu(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new ss(is.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Wd(n,e.Ls)}}function Kd(e,t){const n=rs(e),r=n.Au.get(t);if(r&&r.hu)return Nl().add(r.key);{let e=Nl();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Qd(e){const t=rs(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Pd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Kd.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ld.bind(null,t),t.Pu.H_=md.bind(null,t.eventManager),t.Pu.yu=gd.bind(null,t.eventManager),t}function Yd(e){const t=rs(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Vd.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=jd.bind(null,t),t}class Xd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_h(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Yu(this.persistence,new Gu,e.initialUser,this.serializer)}Cu(e){return new zu(Bu.mi,this.serializer)}Du(e){return new oh}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Xd.provider={build:()=>new Xd};class Jd extends Xd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ns(this.persistence.referenceDelegate instanceof $u,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new Cu(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?bu.withCacheSize(this.cacheSizeBytes):bu.DEFAULT;return new zu(e=>$u.mi(e,t),this.serializer)}}class Zd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Md(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Gd.bind(null,this.syncEngine),await nd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new hd}createDatastore(e){const t=_h(e.databaseInfo.databaseId),n=function(e){return new vh(e)}(e.databaseInfo);return function(e,t,n,r){return new Ch(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Ih(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Md(this.syncEngine,e,0),ch.v()?new ch:new ah)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new Ed(e,t,n,r,i,s);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){const t=rs(e);Yi(Ah,"RemoteStore shutting down."),t.Ea.add(5),await Oh(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Zd.provider={build:()=>new Zd};class ef{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Xi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const tf="FirestoreClient";class nf{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Wi.UNAUTHENTICATED,this.clientId=gs.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{Yi(tf,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Yi(tf,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=od(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function rf(e,t){e.asyncQueue.verifyOperationInProgress(),Yi(tf,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Xu(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function sf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await of(e);Yi(tf,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>td(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>td(t.remoteStore,n)),e._onlineComponents=t}async function of(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Yi(tf,"Using user provided OfflineComponentProvider");try{await rf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===is.FAILED_PRECONDITION||e.code===is.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Ji("Error using user provided cache. Falling back to memory cache: "+n),await rf(e,new Xd)}}else Yi(tf,"Using default OfflineComponentProvider"),await rf(e,new Jd(void 0));return e._offlineComponents}async function af(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Yi(tf,"Using user provided OnlineComponentProvider"),await sf(e,e._uninitializedComponentsProvider._online)):(Yi(tf,"Using default OnlineComponentProvider"),await sf(e,new Zd))),e._onlineComponents}function lf(e){return af(e).then(e=>e.syncEngine)}async function cf(e){const t=await af(e),n=t.eventManager;return n.onListen=Ad.bind(null,t.syncEngine),n.onUnlisten=Rd.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Id.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Dd.bind(null,t.syncEngine),n}function uf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new os;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new ef({next:n=>{s.Nu(),t.enqueueAndForget(()=>pd(e,o)),n.fromCache&&"server"===r.source?i.reject(new ss(is.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new bd(n,s,{includeMetadataChanges:!0,qa:!0});return fd(e,o)}(await cf(e),e.asyncQueue,t,n,r)),r.promise}function hf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const df=new Map,ff="firestore.googleapis.com",pf=!0;class mf{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new ss(is.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ff,this.ssl=pf}else this.host=e.host,this.ssl=e.ssl??pf;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=_u;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Tu)throw new ss(is.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new ss(is.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hf(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ss(is.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new ss(is.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new ss(is.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gf{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ss(is.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ss(is.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mf(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ls;switch(e.type){case"firstParty":return new ds(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ss(is.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=df.get(e);t&&(Yi("ComponentProvider","Removing Datastore"),df.delete(e),t.terminate())}(this),Promise.resolve()}}function vf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Ps(e,gf);const i=p(t),s=e._getSettings(),a={...s,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;i&&(m(`https://${l}`),y("Firestore",!0)),s.host!==ff&&s.host!==l&&Ji("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:l,ssl:i,emulatorOptions:r};if(!C(c,a)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Wi.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(s)),""].join(".")}(r.mockUserToken,e._app?.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new ss(is.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Wi(i)}e._authCredentials=new cs(new as(t,n))}}class yf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new yf(this.firestore,e,this._query)}}class _f{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _f(this.firestore,e,this._key)}toJSON(){return{type:_f._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Ls(t,_f._jsonSchema))return new _f(e,n||null,new As(Ss.fromString(t.referencePath)))}}_f._jsonSchemaVersion="firestore/documentReference/1.0",_f._jsonSchema={type:Ms("string",_f._jsonSchemaVersion),referencePath:Ms("string")};class bf extends yf{constructor(e,t,n){super(e,t,il(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _f(this.firestore,null,new As(e))}withConverter(e){return new bf(this.firestore,e,this._path)}}function wf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=D(e),Is("collection","path",t),e instanceof gf){const n=Ss.fromString(t,...r);return Os(n),new bf(e,null,n)}{if(!(e instanceof _f||e instanceof bf))throw new ss(is.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ss.fromString(t,...r));return Os(n),new bf(e.firestore,null,n)}}function xf(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=D(e),1===arguments.length&&(t=gs.newId()),Is("doc","path",t),e instanceof gf){const n=Ss.fromString(t,...r);return Ns(n),new _f(e,null,new As(n))}{if(!(e instanceof _f||e instanceof bf))throw new ss(is.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Ss.fromString(t,...r));return Ns(n),new _f(e.firestore,e instanceof bf?e.converter:null,new As(n))}}const Tf="AsyncQueue";class kf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bh(this,"async_queue_retry"),this._c=()=>{const e=yh();e&&Yi(Tf,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=yh();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=yh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new os;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Js(e))throw e;Yi(Tf,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Xi("INTERNAL UNHANDLED ERROR: ",Sf(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=sd.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&es(47125,{Pc:Sf(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Sf(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function Cf(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class Ef extends gf{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new kf,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kf(e),this._firestoreClient=void 0,await e}}}function Af(e){if(e._terminated)throw new ss(is.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||If(e),e._firestoreClient}function If(e){const t=e._freezeSettings(),n=function(e,t,n,r){return new ea(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,hf(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new nf(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){const t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}class Nf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nf(qo.fromBase64String(e))}catch(e){throw new ss(is.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Nf(qo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Nf._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ls(e,Nf._jsonSchema))return Nf.fromBase64String(e.bytes)}}Nf._jsonSchemaVersion="firestore/bytes/1.0",Nf._jsonSchema={type:Ms("string",Nf._jsonSchemaVersion),bytes:Ms("string")};class Of{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new ss(is.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Es(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Rf{constructor(e){this._methodName=e}}class Df{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ss(is.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ss(is.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return vs(this._lat,e._lat)||vs(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Df._jsonSchemaVersion}}static fromJSON(e){if(Ls(e,Df._jsonSchema))return new Df(e.latitude,e.longitude)}}Df._jsonSchemaVersion="firestore/geoPoint/1.0",Df._jsonSchema={type:Ms("string",Df._jsonSchemaVersion),latitude:Ms("number"),longitude:Ms("number")};class Pf{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Pf._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ls(e,Pf._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Pf(e.vectorValues);throw new ss(is.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pf._jsonSchemaVersion="firestore/vectorValue/1.0",Pf._jsonSchema={type:Ms("string",Pf._jsonSchemaVersion),vectorValues:Ms("object")};const Mf=/^__.*__$/;class Lf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ic(e,this.data,this.fieldMask,t,this.fieldTransforms):new rc(e,this.data,t,this.fieldTransforms)}}class Vf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ic(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function jf(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw es(40011,{Ac:e})}}class Ff{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ff({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return ep(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(jf(this.Ac)&&Mf.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Uf{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||_h(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Ff({Ac:e,methodName:t,Dc:n,path:Es.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zf(e){const t=e._freezeSettings(),n=_h(e._databaseId);return new Uf(e._databaseId,!!t.ignoreUndefinedProperties,n)}function qf(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);Yf("Data must be an object, but it was:",o,r);const a=Kf(r,o);let l,c;if(s.merge)l=new Uo(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Xf(t,r,n);if(!o.contains(i))throw new ss(is.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);tp(e,i)||e.push(i)}l=new Uo(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new Lf(new Ca(a),l,c)}class Bf extends Rf{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bf}}function $f(e,t,n,r){const i=e.Cc(1,t,n);Yf("Data must be an object, but it was:",i,r);const s=[],o=Ca.empty();Do(r,(e,r)=>{const a=Zf(t,e,n);r=D(r);const l=i.yc(a);if(r instanceof Bf)s.push(a);else{const e=Gf(r,l);null!=e&&(s.push(a),o.set(a,e))}});const a=new Uo(s);return new Vf(o,a,i.fieldTransforms)}function Hf(e,t,n,r,i,s){const o=e.Cc(1,t,n),a=[Xf(t,r,n)],l=[i];if(s.length%2!=0)throw new ss(is.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Xf(t,s[d])),l.push(s[d+1]);const c=[],u=Ca.empty();for(let d=a.length-1;d>=0;--d)if(!tp(c,a[d])){const e=a[d];let t=l[d];t=D(t);const n=o.yc(e);if(t instanceof Bf)c.push(e);else{const r=Gf(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new Uo(c);return new Vf(u,h,o.fieldTransforms)}function Wf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Gf(n,e.Cc(r?4:3,t))}function Gf(e,t){if(Qf(e=D(e)))return Yf("Unsupported field value:",t,e),Kf(e,t);if(e instanceof Rf)return function(e,t){if(!jf(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Gf(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=D(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ml(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Fs.fromDate(e);return{timestampValue:Fc(t.serializer,n)}}if(e instanceof Fs){const n=new Fs(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Fc(t.serializer,n)}}if(e instanceof Df)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Nf)return{bytesValue:Uc(t.serializer,e._byteString)};if(e instanceof _f){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Bc(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Pf)return function(e,t){return{mapValue:{fields:{[ra]:{stringValue:oa},[aa]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return Dl(t.serializer,e)})}}}}}}(e,t);throw t.Sc(`Unsupported field value: ${Ds(e)}`)}(e,t)}function Kf(e,t){const n={};return Po(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Do(e,(e,r)=>{const i=Gf(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Qf(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Fs||e instanceof Df||e instanceof Nf||e instanceof _f||e instanceof Rf||e instanceof Pf)}function Yf(e,t,n){if(!Qf(n)||!Rs(n)){const r=Ds(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Xf(e,t,n){if((t=D(t))instanceof Of)return t._internalPath;if("string"==typeof t)return Zf(e,t);throw ep("Field path arguments must be of type string or ",e,!1,void 0,n)}const Jf=new RegExp("[~\\*/\\[\\]]");function Zf(e,t,n){if(t.search(Jf)>=0)throw ep(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Of(...t.split("."))._internalPath}catch(r){throw ep(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function ep(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new ss(is.INVALID_ARGUMENT,a+e+l)}function tp(e,t){return e.some(e=>e.isEqual(t))}class np{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new _f(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new rp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ip("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class rp extends np{data(){return super.data()}}function ip(e,t){return"string"==typeof t?Zf(e,t):t instanceof Of?t._internalPath:t._delegate._internalPath}function sp(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ss(is.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class op{}class ap extends op{}class lp extends ap{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new lp(e,t,n)}_apply(e){const t=this._parse(e);return dp(e._query,t),new yf(e.firestore,e.converter,ul(e._query,t))}_parse(e){const t=zf(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new ss(is.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){hp(o,s);const t=[];for(const n of o)t.push(up(r,e,n));a={arrayValue:{values:t}}}else a=up(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||hp(o,s),a=Wf(n,t,o,"in"===s||"not-in"===s);return Ma.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class cp extends op{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new cp(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:La.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)dp(n,i),n=ul(n,i)}(e._query,t),new yf(e.firestore,e.converter,ul(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function up(e,t,n){if("string"==typeof(n=D(n))){if(""===n)throw new ss(is.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ol(t)&&-1!==n.indexOf("/"))throw new ss(is.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Ss.fromString(n));if(!As.isDocumentKey(r))throw new ss(is.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return va(e,new As(r))}if(n instanceof _f)return va(e,n._key);throw new ss(is.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ds(n)}.`)}function hp(e,t){if(!Array.isArray(e)||0===e.length)throw new ss(is.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function dp(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new ss(is.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ss(is.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class fp{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(la(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ho(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw es(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Do(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){const t=e.fields?.[aa].arrayValue?.values?.map(e=>Ho(e.doubleValue));return new Pf(t)}convertGeoPoint(e){return new Df(Ho(e.latitude),Ho(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Jo(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Zo(e));default:return null}}convertTimestamp(e){const t=$o(e);return new Fs(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Ss.fromString(e);ns(hu(n),9688,{name:e});const r=new na(n.get(1),n.get(3)),i=new As(n.popFirst(5));return r.isEqual(t)||Xi(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function pp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class mp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gp extends np{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new vp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(ip("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ss(is.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=gp._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}gp._jsonSchemaVersion="firestore/documentSnapshot/1.0",gp._jsonSchema={type:Ms("string",gp._jsonSchemaVersion),bundleSource:Ms("string","DocumentSnapshot"),bundleName:Ms("string"),bundle:Ms("string")};class vp extends gp{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class yp{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new mp(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new vp(this._firestore,this._userDataWriter,n.key,n,new mp(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ss(is.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new vp(e._firestore,e._userDataWriter,n.doc.key,n.doc,new mp(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new vp(e._firestore,e._userDataWriter,t.doc.key,t.doc,new mp(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:_p(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ss(is.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=yp._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gs.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function _p(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return es(61501,{type:e})}}yp._jsonSchemaVersion="firestore/querySnapshot/1.0",yp._jsonSchema={type:Ms("string",yp._jsonSchemaVersion),bundleSource:Ms("string","QuerySnapshot"),bundleName:Ms("string"),bundle:Ms("string")};class bp extends fp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new _f(this.firestore,null,t)}}function wp(e,t,n){e=Ps(e,_f);const r=Ps(e.firestore,Ef),i=pp(e.converter,t,n);return Sp(r,[qf(zf(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ql.none())])}function xp(e,t,n){e=Ps(e,_f);const r=Ps(e.firestore,Ef),i=zf(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=D(t))||t instanceof Of?Hf(i,"updateDoc",e._key,t,n,a):$f(i,"updateDoc",e._key,t),Sp(r,[s.toMutation(e._key,Ql.exists(!0))])}function Tp(e,t){const n=Ps(e.firestore,Ef),r=xf(e),i=pp(e.converter,t);return Sp(n,[qf(zf(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ql.exists(!1))]).then(()=>r)}function kp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=D(e);let i={includeMetadataChanges:!1,source:"default"},s=0;"object"!=typeof n[s]||Cf(n[s])||(i=n[s++]);const o={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Cf(n[s])){const e=n[s];n[s]=e.next?.bind(e),n[s+1]=e.error?.bind(e),n[s+2]=e.complete?.bind(e)}let a,l,c;if(e instanceof _f)l=Ps(e.firestore,Ef),c=il(e._key.path),a={next:t=>{n[s]&&n[s](Cp(l,e,t))},error:n[s+1],complete:n[s+2]};else{const t=Ps(e,yf);l=Ps(t.firestore,Ef),c=t._query;const r=new bp(l);a={next:e=>{n[s]&&n[s](new yp(l,r,t,e))},error:n[s+1],complete:n[s+2]},sp(e._query)}return function(e,t,n,r){const i=new ef(r),s=new bd(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>fd(await cf(e),s)),()=>{i.Nu(),e.asyncQueue.enqueueAndForget(async()=>pd(await cf(e),s))}}(Af(l),c,o,a)}function Sp(e,t){return function(e,t){const n=new os;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Yd(e);try{const e=await function(e,t){const n=rs(e),r=Fs.now(),i=t.reduce((e,t)=>e.add(t.key),Nl());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=wl(),l=Nl();return n.Ns.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=tc(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new ic(e.key,t,Ea(t.value.mapValue),Ql.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:kl(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new Mo(vs)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Wd(r,e.changes),await Wh(r.remoteStore)}catch(e){const t=od(e,"Failed to persist write");n.reject(t)}}(await lf(e),t,n)),n.promise}(Af(e),t)}function Cp(e,t,n){const r=n.docs.get(t._key),i=new bp(e);return new gp(e,i,t._key,r,new mp(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Gi=e}(Ke),Be(new P("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new Ef(new us(e.getProvider("auth-internal")),new ps(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ss(is.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new na(e.options.projectId,t)}(s,r),s);return i={useFetchStreams:t,...i},o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),Xe($i,Hi,e),Xe($i,Hi,"esm2020")}();const Ep="15.1.22";var Ap=n(998);const Ip=new WeakSet,Np=new WeakMap,Op=new WeakMap,Rp=new WeakMap,Dp=new WeakMap,Pp=new WeakMap,Mp=new WeakMap,Lp=new WeakMap,Vp=new WeakMap,jp=new WeakMap,Fp={construct:()=>Fp},Up=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,zp=(e,t)=>{const n=[];let r=e.replace(/^[\s]+/,""),i=r.match(Up);for(;null!==i;){const e=i[1].slice(1,-1),s=i[0].replace(/([\s]+)?;?$/,"").replace(e,new URL(e,t).toString());n.push(s),r=r.slice(i[0].length).replace(/^[\s]+/,""),i=r.match(Up)}return[n.join(";"),r]},qp=e=>{if(void 0!==e&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Bp=e=>{if(!(e=>{try{new new Proxy(e,Fp)}catch{return!1}return!0})(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===e.prototype||"object"!==typeof e.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},$p=(e,t)=>{const n=e.get(t);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},Hp=(e,t)=>{const n=Array.from(e).filter(t);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[r]=n;return e.delete(r),r},Wp=(e,t,n,r)=>{const i=$p(e,t),s=Hp(i,e=>e[0]===n&&e[1]===r);return 0===i.size&&e.delete(t),s},Gp=e=>$p(Mp,e),Kp=e=>{if(Ip.has(e))throw new Error("The AudioNode is already stored.");Ip.add(e),Gp(e).forEach(e=>e(!0))},Qp=e=>"port"in e,Yp=e=>{if(!Ip.has(e))throw new Error("The AudioNode is not stored.");Ip.delete(e),Gp(e).forEach(e=>e(!1))},Xp=(e,t)=>{!Qp(e)&&t.every(e=>0===e.size)&&Yp(e)},Jp={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},Zp=(e,t)=>e.context===t,em=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},tm=()=>new DOMException("","IndexSizeError"),nm=e=>{var t;e.getChannelData=(t=e.getChannelData,n=>{try{return t.call(e,n)}catch(r){if(12===r.code)throw tm();throw r}})},rm={numberOfChannels:1},im=-34028234663852886e22,sm=-im,om=e=>Ip.has(e),am={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},lm=e=>$p(Np,e),cm=e=>$p(Rp,e),um=(e,t)=>{const{activeInputs:n}=lm(e);n.forEach(n=>n.forEach(n=>{let[r]=n;t.includes(e)||um(r,[...t,e])}));const r=(e=>"playbackRate"in e)(e)?[e.playbackRate]:Qp(e)?Array.from(e.parameters.values()):(e=>"frequency"in e&&"gain"in e)(e)?[e.Q,e.detune,e.frequency,e.gain]:(e=>"offset"in e)(e)?[e.offset]:(e=>!("frequency"in e)&&"gain"in e)(e)?[e.gain]:(e=>"detune"in e&&"frequency"in e&&!("gain"in e))(e)?[e.detune,e.frequency]:(e=>"pan"in e)(e)?[e.pan]:[];for(const i of r){const e=cm(i);void 0!==e&&e.activeInputs.forEach(e=>{let[n]=e;return um(n,t)})}om(e)&&Yp(e)},hm=e=>{um(e.destination,[])},dm=e=>void 0===e||"number"===typeof e||"string"===typeof e&&("balanced"===e||"interactive"===e||"playback"===e),fm=e=>"context"in e,pm=e=>fm(e[0]),mm=(e,t,n,r)=>{for(const i of e)if(n(i)){if(r)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0},gm=(e,t,n,r)=>{let[i,s]=n;mm(e,[t,i,s],e=>e[0]===t&&e[1]===i,r)},vm=(e,t,n)=>{let[r,i,s]=t;const o=e.get(r);void 0===o?e.set(r,new Set([[i,s]])):mm(o,[i,s],e=>e[0]===i,n)},ym=e=>"inputs"in e,_m=(e,t,n,r)=>{if(ym(t)){const i=t.inputs[r];return e.connect(i,n,0),[i,n,0]}return e.connect(t,n,r),[t,n,r]},bm=(e,t,n)=>{for(const r of e)if(r[0]===t&&r[1]===n)return e.delete(r),r;return null},wm=(e,t)=>{if(!Gp(e).delete(t))throw new Error("Missing the expected event listener.")},xm=(e,t,n)=>{const r=$p(e,t),i=Hp(r,e=>e[0]===n);return 0===r.size&&e.delete(t),i},Tm=(e,t,n,r)=>{ym(t)?e.disconnect(t.inputs[r],n,0):e.disconnect(t,n,r)},km=e=>$p(Op,e),Sm=e=>$p(Dp,e),Cm=e=>Lp.has(e),Em=e=>!Ip.has(e),Am=(e,t)=>new Promise(n=>{if(null!==t)n(!0);else{const t=e.createScriptProcessor(256,1,1),r=e.createGain(),i=e.createBuffer(1,2,44100),s=i.getChannelData(0);s[0]=1,s[1]=1;const o=e.createBufferSource();o.buffer=i,o.loop=!0,o.connect(t).connect(e.destination),o.connect(r),o.disconnect(r),t.onaudioprocess=r=>{const i=r.inputBuffer.getChannelData(0);Array.prototype.some.call(i,e=>1===e)?n(!0):n(!1),o.stop(),t.onaudioprocess=null,o.disconnect(t),t.disconnect(e.destination)},o.start()}}),Im=(e,t)=>{const n=new Map;for(const r of e)for(const e of r){const t=n.get(e);n.set(e,void 0===t?1:t+1)}n.forEach((e,n)=>t(n,e))},Nm=e=>"context"in e,Om=e=>{const t=new Map;e.connect=(e=>function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=Nm(n)?e(n,r,i):e(n,r),o=t.get(n);return void 0===o?t.set(n,[{input:i,output:r}]):o.every(e=>e.input!==i||e.output!==r)&&o.push({input:i,output:r}),s})(e.connect.bind(e)),e.disconnect=(n=>(r,i,s)=>{if(n.apply(e),void 0===r)t.clear();else if("number"===typeof r)for(const[e,n]of t){const i=n.filter(e=>e.output!==r);0===i.length?t.delete(e):t.set(e,i)}else if(t.has(r))if(void 0===i)t.delete(r);else{const e=t.get(r);if(void 0!==e){const n=e.filter(e=>e.output!==i&&(e.input!==s||void 0===s));0===n.length?t.delete(r):t.set(r,n)}}for(const[n,o]of t)o.forEach(t=>{Nm(n)?e.connect(n,t.output,t.input):e.connect(n,t.output)})})(e.disconnect)},Rm=(e,t,n,r)=>{const{activeInputs:i,passiveInputs:s}=cm(t),{outputs:o}=lm(e),a=Gp(e),l=o=>{const a=km(e),l=Sm(t);if(o){const t=xm(s,e,n);gm(i,e,t,!1),r||Cm(e)||a.connect(l,n)}else{const t=((e,t,n)=>Hp(e,e=>e[0]===t&&e[1]===n))(i,e,n);vm(s,t,!1),r||Cm(e)||a.disconnect(l,n)}};return!!mm(o,[t,n],e=>e[0]===t&&e[1]===n,!0)&&(a.add(l),om(e)?gm(i,e,[n,l],!0):vm(s,[e,n,l],!0),!0)},Dm=(e,t,n,r,i)=>{const[s,o]=((e,t,n,r)=>{const{activeInputs:i,passiveInputs:s}=lm(t),o=bm(i[r],e,n);if(null===o)return[Wp(s,e,n,r)[2],!1];return[o[2],!0]})(e,n,r,i);if(null!==s&&(wm(e,s),!o||t||Cm(e)||Tm(km(e),km(n),r,i)),om(n)){const{activeInputs:e}=lm(n);Xp(n,e)}},Pm=(e,t,n,r)=>{const[i,s]=((e,t,n)=>{const{activeInputs:r,passiveInputs:i}=cm(t),s=bm(r,e,n);if(null===s)return[xm(i,e,n)[1],!1];return[s[2],!0]})(e,n,r);null!==i&&(wm(e,i),!s||t||Cm(e)||km(e).disconnect(Sm(n),r))};class Mm{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._map.forEach((n,r)=>e.call(t,n,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const Lm={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function Vm(e,t,n,r,i){if("function"===typeof e.copyFromChannel)0===t[n].byteLength&&(t[n]=new Float32Array(128)),e.copyFromChannel(t[n],r,i);else{const s=e.getChannelData(r);if(0===t[n].byteLength)t[n]=s.slice(i,i+128);else{const e=new Float32Array(s.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(e)}}}const jm=(e,t,n,r,i)=>{"function"===typeof e.copyToChannel?0!==t[n].byteLength&&e.copyToChannel(t[n],r,i):0!==t[n].byteLength&&e.getChannelData(r).set(t[n],i)},Fm=(e,t)=>{const n=[];for(let r=0;r<e;r+=1){const e=[],i="number"===typeof t?t:t[r];for(let t=0;t<i;t+=1)e.push(new Float32Array(128));n.push(e)}return n},Um=async(e,t,n,r,i,s,o)=>{const a=null===t?128*Math.ceil(e.context.length/128):t.length,l=r.channelCount*r.numberOfInputs,c=i.reduce((e,t)=>e+t,0),u=0===c?null:n.createBuffer(c,a,n.sampleRate);if(void 0===s)throw new Error("Missing the processor constructor.");const h=lm(e),d=await((e,t)=>{const n=$p(jp,e),r=km(t);return $p(n,r)})(n,e),f=Fm(r.numberOfInputs,r.channelCount),p=Fm(r.numberOfOutputs,i),m=Array.from(e.parameters.keys()).reduce((e,t)=>({...e,[t]:new Float32Array(128)}),{});for(let v=0;v<a;v+=128){if(r.numberOfInputs>0&&null!==t)for(let e=0;e<r.numberOfInputs;e+=1)for(let n=0;n<r.channelCount;n+=1)Vm(t,f[e],n,n,v);void 0!==s.parameterDescriptors&&null!==t&&s.parameterDescriptors.forEach((e,n)=>{let{name:r}=e;Vm(t,m,r,l+n,v)});for(let e=0;e<r.numberOfInputs;e+=1)for(let t=0;t<i[e];t+=1)0===p[e][t].byteLength&&(p[e][t]=new Float32Array(128));try{const e=f.map((e,t)=>0===h.activeInputs[t].size?[]:e),t=o(v/n.sampleRate,n.sampleRate,()=>d.process(e,p,m));if(null!==u)for(let n=0,s=0;n<r.numberOfOutputs;n+=1){for(let e=0;e<i[n];e+=1)jm(u,p[n],e,s+e,v);s+=i[n]}if(!t)break}catch(g){e.dispatchEvent(new ErrorEvent("processorerror",{colno:g.colno,filename:g.filename,lineno:g.lineno,message:g.message}));break}}return u},zm={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},qm={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Bm={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},$m={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Hm={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Wm=e=>{const{port1:t,port2:n}=new MessageChannel;return new Promise(r=>{const i=()=>{n.onmessage=null,t.close(),n.close(),r()};n.onmessage=()=>i();try{t.postMessage(e,[e])}catch{}finally{i()}})},Gm={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Km=(e,t,n)=>{const r=t[n];if(void 0===r)throw e();return r},Qm={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Ym={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Xm=()=>new DOMException("","InvalidStateError"),Jm=()=>new DOMException("","InvalidAccessError"),Zm={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},eg=(e,t,n,r,i,s,o,a,l,c,u)=>{const h=c.length;let d=a;for(let f=0;f<h;f+=1){let a=n[0]*c[f];for(let t=1;t<i;t+=1){const r=d-t&l-1;a+=n[t]*s[r],a-=e[t]*o[r]}for(let e=i;e<r;e+=1)a+=n[e]*s[d-e&l-1];for(let n=i;n<t;n+=1)a-=e[n]*o[d-n&l-1];s[d]=c[f],o[d]=a,d=d+1&l-1,u[f]=a}return d},tg={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},ng=e=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=e.decodeAudioData(t.buffer,()=>{});return void 0!==n&&(n.catch(()=>{}),!0)}catch{}return!1},rg={numberOfChannels:1},ig=(e,t,n)=>{const r=t[n];void 0!==r&&r!==e[n]&&(e[n]=r)},sg=(e,t)=>{ig(e,t,"channelCount"),ig(e,t,"channelCountMode"),ig(e,t,"channelInterpretation")},og=e=>"function"===typeof e.getFloatTimeDomainData,ag=(e,t,n)=>{const r=t[n];void 0!==r&&r!==e[n].value&&(e[n].value=r)},lg=e=>{e.start=(t=>function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;if("number"===typeof i&&i<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");t.call(e,n,r,i)})(e.start)},cg=e=>{var t;e.stop=(t=e.stop,function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(n<0)throw new RangeError("The parameter can't be negative.");t.call(e,n)})},ug=(e,t)=>null===e?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t))))),hg=async(e,t)=>{const n=await(e=>new Promise((t,n)=>{const{port1:r,port2:i}=new MessageChannel;r.onmessage=e=>{let{data:n}=e;r.close(),i.close(),t(n)},r.onmessageerror=e=>{let{data:t}=e;r.close(),i.close(),n(t)},i.postMessage(e)}))(t);return new e(n)},dg=(e,t)=>{const n=e.createBiquadFilter();return sg(n,t),ag(n,t,"Q"),ag(n,t,"detune"),ag(n,t,"frequency"),ag(n,t,"gain"),ig(n,t,"type"),n},fg=(e,t)=>{const n=e.createChannelSplitter(t.numberOfOutputs);return sg(n,t),(e=>{const t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw Xm()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:e=>{if("explicit"!==e)throw Xm()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:e=>{if("discrete"!==e)throw Xm()}})})(n),n},pg=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e),mg=(e,t)=>{const n=e.createDelay(t.maxDelayTime);return sg(n,t),ag(n,t,"delayTime"),n},gg=(e,t)=>{const n=e.createGain();return sg(n,t),ag(n,t,"gain"),n};function vg(e,t){const n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}function yg(e,t){return[e[0]*t[0]-e[1]*t[1],e[0]*t[1]+e[1]*t[0]]}function _g(e,t){let n=[0,0];for(let r=e.length-1;r>=0;r-=1)n=yg(n,t),n[0]+=e[r];return n}const bg=(e,t,n,r)=>e.createScriptProcessor(t,n,r),wg=()=>new DOMException("","NotSupportedError"),xg={numberOfChannels:1},Tg={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},kg={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Sg={disableNormalization:!1},Cg={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Eg=()=>new DOMException("","UnknownError"),Ag={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Ig=(e,t,n)=>void 0===e.copyFromChannel?e.getChannelData(n)[0]:(e.copyFromChannel(t,n),t[0]),Ng=e=>{if(null===e)return!1;const t=e.length;return t%2!==0?0!==e[Math.floor(t/2)]:e[t/2-1]+e[t/2]!==0},Og=(e,t,n,r)=>{let i=e;for(;!i.hasOwnProperty(t);)i=Object.getPrototypeOf(i);const{get:s,set:o}=Object.getOwnPropertyDescriptor(i,t);Object.defineProperty(e,t,{get:n(s),set:r(o)})},Rg=(e,t,n)=>{try{e.setValueAtTime(t,n)}catch(r){if(9!==r.code)throw r;Rg(e,t,n+1e-7)}},Dg=e=>{const t=e.createOscillator();try{t.start(-1)}catch(n){return n instanceof RangeError}return!1},Pg=e=>{const t=e.createBuffer(1,1,44100),n=e.createBufferSource();n.buffer=t,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},Mg=e=>{const t=e.createOscillator();try{t.stop(-1)}catch(n){return n instanceof RangeError}return!1},Lg=(e,t)=>{const n=t.createGain();e.connect(n);const r=(t=>()=>{t.call(e,n),e.removeEventListener("ended",r)})(e.disconnect);e.addEventListener("ended",r),pg(e,n),e.stop=(t=>{let r=!1;return function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(r)try{t.call(e,i)}catch{n.gain.setValueAtTime(0,i)}else t.call(e,i),r=!0}})(e.stop)},Vg=(e,t)=>n=>{const r={value:e};return Object.defineProperties(n,{currentTarget:r,target:r}),"function"===typeof t?t.call(e,n):t.handleEvent.call(e,n)},jg=(e=>(t,n,r,i)=>{let[s,o,a]=r;e(t[o],[n,s,a],e=>e[0]===n&&e[1]===s,i)})(mm),Fg=(e=>(t,n,r,i)=>{let[s,o,a]=r;const l=t.get(s);void 0===l?t.set(s,new Set([[o,n,a]])):e(l,[o,n,a],e=>e[0]===o&&e[1]===n,i)})(mm),Ug=(e=>(t,n,r,i)=>e(t[i],e=>e[0]===n&&e[1]===r))(Hp),zg=new WeakMap,qg=(e=>t=>{var n;return null!==(n=e.get(t))&&void 0!==n?n:0})(zg),Bg=($g=new Map,Hg=new WeakMap,(e,t)=>{const n=Hg.get(e);if(void 0!==n)return n;const r=$g.get(e);if(void 0!==r)return r;try{const n=t();return n instanceof Promise?($g.set(e,n),n.catch(()=>!1).then(t=>($g.delete(e),Hg.set(e,t),t))):(Hg.set(e,n),n)}catch{return Hg.set(e,!1),!1}});var $g,Hg;const Wg="undefined"===typeof window?null:window,Gg=((e,t)=>(n,r)=>{const i=n.createAnalyser();if(sg(i,r),!(r.maxDecibels>r.minDecibels))throw t();return ig(i,r,"fftSize"),ig(i,r,"maxDecibels"),ig(i,r,"minDecibels"),ig(i,r,"smoothingTimeConstant"),e(og,()=>og(i))||(e=>{e.getFloatTimeDomainData=t=>{const n=new Uint8Array(t.length);e.getByteTimeDomainData(n);const r=Math.max(n.length,e.fftSize);for(let e=0;e<r;e+=1)t[e]=.0078125*(n[e]-128);return t}})(i),i})(Bg,tm),Kg=(e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer})(lm),Qg=((e,t,n)=>async(r,i,s)=>{const o=e(r);await Promise.all(o.activeInputs.map((e,o)=>Array.from(e).map(async e=>{let[a,l]=e;const c=t(a),u=await c.render(a,i),h=r.context.destination;n(a)||r===h&&n(r)||u.connect(s,l,o)})).reduce((e,t)=>[...e,...t],[]))})(lm,Kg,Cm),Yg=((e,t,n)=>()=>{const r=new WeakMap;return{render(i,s){const o=r.get(s);return void 0!==o?Promise.resolve(o):(async(i,s)=>{let o=t(i);if(!Zp(o,s)){const t={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,fftSize:o.fftSize,maxDecibels:o.maxDecibels,minDecibels:o.minDecibels,smoothingTimeConstant:o.smoothingTimeConstant};o=e(s,t)}return r.set(s,o),await n(i,s,o),o})(i,s)}}})(Gg,km,Qg),Xg=(Jg=Pp,e=>{const t=Jg.get(e);if(void 0===t)throw Xm();return t});var Jg;const Zg=(e=>null===e?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null)(Wg),ev=(e=>t=>null!==e&&t instanceof e)(Zg),tv=new WeakMap,nv=(e=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(t,n,r){if(null!==n){let i=this._listeners.get(n);void 0===i&&(i=e(this,n),"function"===typeof n&&this._listeners.set(n,i)),this._nativeEventTarget.addEventListener(t,i,r)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,t,n){const r=null===t?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(e,void 0===r?null:r,n)}})(Vg),rv=(e=>null===e?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null)(Wg),iv=(e=>t=>null!==e&&t instanceof e)(rv),sv=(e=>t=>null!==e&&"function"===typeof e.AudioNode&&t instanceof e.AudioNode)(Wg),ov=(e=>t=>null!==e&&"function"===typeof e.AudioParam&&t instanceof e.AudioParam)(Wg),av=(e=>null===e?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null)(Wg),lv=((e,t,n,r,i,s,o,a,l,c,u,h,d,f,p,m)=>class extends c{constructor(t,r,i,s){super(i),this._context=t,this._nativeAudioNode=i;const o=u(t);h(o)&&!0!==n(Am,()=>Am(o,m))&&Om(i),Op.set(this,i),Mp.set(this,new Set),"closed"!==t.state&&r&&Kp(this),e(this,s,i)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(e){this._nativeAudioNode.channelCount=e}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(e){this._nativeAudioNode.channelCountMode=e}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(e){this._nativeAudioNode.channelInterpretation=e}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw i();const c=u(this._context),h=p(c);if(d(e)||f(e))throw s();if(fm(e)){const i=km(e);try{const t=_m(this._nativeAudioNode,i,n,a),r=Em(this);(h||r)&&this._nativeAudioNode.disconnect(...t),"closed"!==this.context.state&&!r&&Em(e)&&Kp(e)}catch(g){if(12===g.code)throw s();throw g}if(t(this,e,n,a,h)){const t=l([this],e);Im(t,r(h))}return e}const m=Sm(e);if("playbackRate"===m.name&&1024===m.maxValue)throw o();try{this._nativeAudioNode.connect(m,n),(h||Em(this))&&this._nativeAudioNode.disconnect(m,n)}catch(g){if(12===g.code)throw s();throw g}if(Rm(this,e,n,h)){const t=l([this],e);Im(t,r(h))}}disconnect(e,t,n){let r;const o=u(this._context),c=p(o);if(void 0===e)r=((e,t)=>{const n=lm(e),r=[];for(const i of n.outputs)pm(i)?Dm(e,t,...i):Pm(e,t,...i),r.push(i[0]);return n.outputs.clear(),r})(this,c);else if("number"===typeof e){if(e<0||e>=this.numberOfOutputs)throw i();r=((e,t,n)=>{const r=lm(e),i=[];for(const s of r.outputs)s[1]===n&&(pm(s)?Dm(e,t,...s):Pm(e,t,...s),i.push(s[0]),r.outputs.delete(s));return i})(this,c,e)}else{if(void 0!==t&&(t<0||t>=this.numberOfOutputs))throw i();if(fm(e)&&void 0!==n&&(n<0||n>=e.numberOfInputs))throw i();if(r=((e,t,n,r,i)=>{const s=lm(e);return Array.from(s.outputs).filter(e=>e[0]===n&&(void 0===r||e[1]===r)&&(void 0===i||e[2]===i)).map(n=>(pm(n)?Dm(e,t,...n):Pm(e,t,...n),s.outputs.delete(n),n[0]))})(this,c,e,t,n),0===r.length)throw s()}for(const i of r){const e=l([this],i);Im(e,a)}}})((cv=Np,(e,t,n)=>{const r=[];for(let i=0;i<n.numberOfInputs;i+=1)r.push(new Set);cv.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})}),((e,t,n,r,i,s,o,a,l,c,u,h,d)=>{const f=new WeakMap;return(p,m,g,v,y)=>{const{activeInputs:_,passiveInputs:b}=s(m),{outputs:w}=s(p),x=a(p),T=s=>{const a=l(m),c=l(p);if(s){const t=Wp(b,p,g,v);e(_,p,t,!1),y||h(p)||n(c,a,g,v),d(m)&&Kp(m)}else{const e=r(_,p,g,v);t(b,v,e,!1),y||h(p)||i(c,a,g,v);const n=o(m);if(0===n)u(m)&&Xp(m,_);else{const e=f.get(m);void 0!==e&&clearTimeout(e),f.set(m,setTimeout(()=>{u(m)&&Xp(m,_)},1e3*n))}}};return!!c(w,[m,g,v],e=>e[0]===m&&e[1]===g&&e[2]===v,!0)&&(x.add(T),u(p)?e(_,p,[g,v,T],!0):t(b,v,[p,g,T],!0),!0)}})(jg,Fg,_m,Ug,Tm,lm,qg,Gp,km,mm,om,Cm,Em),Bg,((e,t,n,r,i,s)=>o=>(a,l)=>{const c=e.get(a);if(void 0===c){if(!o&&s(a)){const e=r(a),{outputs:s}=n(a);for(const n of s)if(pm(n)){const i=r(n[0]);t(e,i,n[1],n[2])}else{const t=i(n[0]);e.disconnect(t,n[1])}}e.set(a,l)}else e.set(a,c+l)})(Lp,Tm,lm,km,Sm,om),tm,Jm,wg,((e,t,n,r,i,s,o,a)=>(l,c)=>{const u=t.get(l);if(void 0===u)throw new Error("Missing the expected cycle count.");const h=s(l.context),d=a(h);if(u===c){if(t.delete(l),!d&&o(l)){const t=r(l),{outputs:s}=n(l);for(const n of s)if(pm(n)){const i=r(n[0]);e(t,i,n[1],n[2])}else{const e=i(n[0]);t.connect(e,n[1])}}}else t.set(l,u-c)})(_m,Lp,lm,km,Sm,Xg,om,ev),((e,t,n)=>function r(i,s){const o=fm(s)?s:n(e,s);if((e=>"delayTime"in e)(o))return[];if(i[0]===o)return[i];if(i.includes(o))return[];const{outputs:a}=t(o);return Array.from(a).map(e=>r([...i,o],e[0])).reduce((e,t)=>e.concat(t),[])})(tv,lm,$p),nv,Xg,iv,sv,ov,ev,av);var cv;const uv=((e,t,n,r,i,s)=>class extends e{constructor(e,n){const o=i(e),a={...Jp,...n},l=r(o,a);super(e,!1,l,s(o)?t():null),this._nativeAnalyserNode=l}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(e){this._nativeAnalyserNode.fftSize=e}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(e){const t=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=e,!(e>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=t,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(e){const t=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=e,!(this._nativeAnalyserNode.maxDecibels>e))throw this._nativeAnalyserNode.minDecibels=t,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(e){this._nativeAnalyserNode.smoothingTimeConstant=e}getByteFrequencyData(e){this._nativeAnalyserNode.getByteFrequencyData(e)}getByteTimeDomainData(e){this._nativeAnalyserNode.getByteTimeDomainData(e)}getFloatFrequencyData(e){this._nativeAnalyserNode.getFloatFrequencyData(e)}getFloatTimeDomainData(e){this._nativeAnalyserNode.getFloatTimeDomainData(e)}})(lv,Yg,tm,Gg,Xg,ev),hv=new WeakSet,dv=(e=>null===e?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null)(Wg),fv=(pv=new Uint32Array(1),e=>(pv[0]=e,pv[0]));var pv;const mv=((e,t)=>n=>{n.copyFromChannel=function(r,i){const s=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),o=e(i);if(o>=n.numberOfChannels)throw t();const a=n.length,l=n.getChannelData(o),c=r.length;for(let e=s<0?-s:0;e+s<a&&e<c;e+=1)r[e]=l[e+s]},n.copyToChannel=function(r,i){const s=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),o=e(i);if(o>=n.numberOfChannels)throw t();const a=n.length,l=n.getChannelData(o),c=r.length;for(let e=s<0?-s:0;e+s<a&&e<c;e+=1)l[e+s]=r[e]}})(fv,tm),gv=(e=>t=>{t.copyFromChannel=(n=>function(r,i){const s=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),o=e(i);if(s<t.length)return n.call(t,r,o,s)})(t.copyFromChannel),t.copyToChannel=(n=>function(r,i){const s=e(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),o=e(i);if(s<t.length)return n.call(t,r,o,s)})(t.copyToChannel)})(fv),vv=((e,t,n,r,i,s,o,a)=>{let l=null;return class c{constructor(c){if(null===i)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:u,numberOfChannels:h,sampleRate:d}={...rm,...c};null===l&&(l=new i(1,1,44100));const f=null!==r&&t(s,s)?new r({length:u,numberOfChannels:h,sampleRate:d}):l.createBuffer(h,u,d);if(0===f.numberOfChannels)throw n();return"function"!==typeof f.copyFromChannel?(o(f),nm(f)):t(em,()=>em(f))||a(f),e.add(f),f}static[Symbol.hasInstance](t){return null!==t&&"object"===typeof t&&Object.getPrototypeOf(t)===c.prototype||e.has(t)}}})(hv,Bg,wg,dv,Zg,(e=>()=>{if(null===e)return!1;try{new e({length:1,sampleRate:44100})}catch{return!1}return!0})(dv),mv,gv),yv=(e=>(t,n)=>{const r=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(t.destination);const i=()=>{n.removeEventListener("ended",i),n.disconnect(r),r.disconnect()};n.addEventListener("ended",i)})(gg),_v=((e,t,n)=>async(r,i,s)=>{const o=t(r);await Promise.all(Array.from(o.activeInputs).map(async t=>{let[r,o]=t;const a=e(r),l=await a.render(r,i);n(r)||l.connect(s,o)}))})(Kg,cm,Cm),bv=(e=>(t,n,r)=>e(n,t,r))(_v),wv=((e,t,n,r,i,s,o,a,l,c,u)=>(h,d)=>{const f=h.createBufferSource();return sg(f,d),ag(f,d,"playbackRate"),ig(f,d,"buffer"),ig(f,d,"loop"),ig(f,d,"loopEnd"),ig(f,d,"loopStart"),t(n,()=>n(h))||(e=>{e.start=(t=>{let n=!1;return function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2?arguments[2]:void 0;if(n)throw Xm();t.call(e,r,i,s),n=!0}})(e.start)})(f),t(r,()=>r(h))||l(f),t(i,()=>i(h))||c(f,h),t(s,()=>s(h))||lg(f),t(o,()=>o(h))||u(f,h),t(a,()=>a(h))||cg(f),e(h,f),f})(yv,Bg,e=>{const t=e.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},e=>{const t=e.createBufferSource(),n=e.createBuffer(1,1,44100);t.buffer=n;try{t.start(0,1)}catch{return!1}return!0},e=>{const t=e.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},Dg,Pg,Mg,e=>{e.start=(t=>function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;const s=e.buffer,o=null===s?r:Math.min(s.duration,r);null!==s&&o>s.duration-.5/e.context.sampleRate?t.call(e,n,0,0):t.call(e,n,o,i)})(e.start)},(e=>(t,n)=>{const r=n.createBuffer(1,1,44100);null===t.buffer&&(t.buffer=r),e(t,"buffer",e=>()=>{const n=e.call(t);return n===r?null:n},e=>n=>e.call(t,null===n?r:n))})(Og),Lg),xv=((e,t)=>(n,r,i)=>(e(r).replay(i),t(r,n,i)))((e=>t=>{const n=e(t);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(cm),_v),Tv=((e,t,n,r,i)=>()=>{const s=new WeakMap;let o=null,a=null;return{set start(e){o=e},set stop(e){a=e},render(l,c){const u=s.get(c);return void 0!==u?Promise.resolve(u):(async(l,c)=>{let u=n(l);const h=Zp(u,c);if(!h){const e={buffer:u.buffer,channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,loop:u.loop,loopEnd:u.loopEnd,loopStart:u.loopStart,playbackRate:u.playbackRate.value};u=t(c,e),null!==o&&u.start(...o),null!==a&&u.stop(a)}return s.set(c,u),h?await e(c,l.playbackRate,u.playbackRate):await r(c,l.playbackRate,u.playbackRate),await i(l,c,u),u})(l,c)}}})(bv,wv,km,xv,Qg),kv=((e,t,n,r,i,s,o,a,l,c,u,h,d)=>function(f,p,m){let g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,v=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const y=m.value,_=new Ap.AutomationEventList(y),b=p?r(_):null,w={get defaultValue(){return y},get maxValue(){return null===g?m.maxValue:g},get minValue(){return null===v?m.minValue:v},get value(){return m.value},set value(e){m.value=e,w.setValueAtTime(e,f.context.currentTime)},cancelAndHoldAtTime(e){if("function"===typeof m.cancelAndHoldAtTime)null===b&&_.flush(f.context.currentTime),_.add(i(e)),m.cancelAndHoldAtTime(e);else{const t=Array.from(_).pop();null===b&&_.flush(f.context.currentTime),_.add(i(e));const n=Array.from(_).pop();m.cancelScheduledValues(e),t!==n&&void 0!==n&&("exponentialRampToValue"===n.type?m.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?m.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?m.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&m.setValueCurveAtTime(n.values,n.startTime,n.duration))}return w},cancelScheduledValues:e=>(null===b&&_.flush(f.context.currentTime),_.add(s(e)),m.cancelScheduledValues(e),w),exponentialRampToValueAtTime(e,t){if(0===e)throw new RangeError;if(!Number.isFinite(t)||t<0)throw new RangeError;const n=f.context.currentTime;return null===b&&_.flush(n),0===Array.from(_).length&&(_.add(c(y,n)),m.setValueAtTime(y,n)),_.add(o(e,t)),m.exponentialRampToValueAtTime(e,t),w},linearRampToValueAtTime(e,t){const n=f.context.currentTime;return null===b&&_.flush(n),0===Array.from(_).length&&(_.add(c(y,n)),m.setValueAtTime(y,n)),_.add(a(e,t)),m.linearRampToValueAtTime(e,t),w},setTargetAtTime:(e,t,n)=>(null===b&&_.flush(f.context.currentTime),_.add(l(e,t,n)),m.setTargetAtTime(e,t,n),w),setValueAtTime:(e,t)=>(null===b&&_.flush(f.context.currentTime),_.add(c(e,t)),m.setValueAtTime(e,t),w),setValueCurveAtTime(e,t,n){const r=e instanceof Float32Array?e:new Float32Array(e);if(null!==h&&"webkitAudioContext"===h.name){const e=t+n,i=f.context.sampleRate,s=Math.ceil(t*i),o=Math.floor(e*i),a=o-s,l=new Float32Array(a);for(let u=0;u<a;u+=1){const e=(r.length-1)/n*((s+u)/i-t),o=Math.floor(e),a=Math.ceil(e);l[u]=o===a?r[o]:(1-(e-o))*r[o]+(1-(a-e))*r[a]}null===b&&_.flush(f.context.currentTime),_.add(u(l,t,n)),m.setValueCurveAtTime(l,t,n);const c=o/i;c<e&&d(w,l[l.length-1],c),d(w,r[r.length-1],e)}else null===b&&_.flush(f.context.currentTime),_.add(u(r,t,n)),m.setValueCurveAtTime(r,t,n);return w}};return n.set(w,m),t.set(w,f),e(w,b),w})((Sv=Rp,(e,t)=>{Sv.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})}),tv,Dp,e=>({replay(t){for(const n of e)if("exponentialRampToValue"===n.type){const{endTime:e,value:r}=n;t.exponentialRampToValueAtTime(r,e)}else if("linearRampToValue"===n.type){const{endTime:e,value:r}=n;t.linearRampToValueAtTime(r,e)}else if("setTarget"===n.type){const{startTime:e,target:r,timeConstant:i}=n;t.setTargetAtTime(r,e,i)}else if("setValue"===n.type){const{startTime:e,value:r}=n;t.setValueAtTime(r,e)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:e,startTime:r,values:i}=n;t.setValueCurveAtTime(i,r,e)}}}}),Ap.createCancelAndHoldAutomationEvent,Ap.createCancelScheduledValuesAutomationEvent,Ap.createExponentialRampToValueAutomationEvent,Ap.createLinearRampToValueAutomationEvent,Ap.createSetTargetAutomationEvent,Ap.createSetValueAutomationEvent,Ap.createSetValueCurveAutomationEvent,rv,Rg);var Sv;const Cv=((e,t,n,r,i,s,o,a)=>class extends e{constructor(e,r){const a=s(e),l={...am,...r},c=i(a,l),u=o(a),h=u?t():null;super(e,!1,c,h),this._audioBufferSourceNodeRenderer=h,this._isBufferNullified=!1,this._isBufferSet=null!==l.buffer,this._nativeAudioBufferSourceNode=c,this._onended=null,this._playbackRate=n(this,u,c.playbackRate,sm,im)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(e){if(this._nativeAudioBufferSourceNode.buffer=e,null!==e){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(e){this._nativeAudioBufferSourceNode.loop=e}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(e){this._nativeAudioBufferSourceNode.loopEnd=e}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(e){this._nativeAudioBufferSourceNode.loopStart=e}get onended(){return this._onended}set onended(e){const t="function"===typeof e?a(this,e):null;this._nativeAudioBufferSourceNode.onended=t;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===t?e:n}get playbackRate(){return this._playbackRate}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;if(this._nativeAudioBufferSourceNode.start(e,t,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[e,t]:[e,t,n]),"closed"!==this.context.state){Kp(this);const e=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",e),om(this)&&Yp(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",e)}}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeAudioBufferSourceNode.stop(e),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=e)}})(lv,Tv,kv,Xm,wv,Xg,ev,Vg),Ev=((e,t,n,r,i,s,o,a)=>class extends e{constructor(e,n){const r=s(e),l=o(r),c=i(r,n,l);super(e,!1,c,l?t(a):null),this._isNodeOfNativeOfflineAudioContext=l,this._nativeAudioDestinationNode=c}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(e){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(e>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=e}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(e){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=e}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(lv,e=>{const t=new WeakMap;return{render(n,r){const i=t.get(r);return void 0!==i?Promise.resolve(i):(async(n,r)=>{const i=r.destination;return t.set(r,i),await e(n,r,i),i})(n,r)}}},tm,Xm,((e,t)=>(n,r,i)=>{const s=n.destination;if(s.channelCount!==r)try{s.channelCount=r}catch{}i&&"explicit"!==s.channelCountMode&&(s.channelCountMode="explicit"),0===s.maxChannelCount&&Object.defineProperty(s,"maxChannelCount",{value:r});const o=e(n,{channelCount:r,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,gain:1});return t(o,"channelCount",e=>()=>e.call(o),e=>t=>{e.call(o,t);try{s.channelCount=t}catch(n){if(t>s.maxChannelCount)throw n}}),t(o,"channelCountMode",e=>()=>e.call(o),e=>t=>{e.call(o,t),s.channelCountMode=t}),t(o,"channelInterpretation",e=>()=>e.call(o),e=>t=>{e.call(o,t),s.channelInterpretation=t}),Object.defineProperty(o,"maxChannelCount",{get:()=>s.maxChannelCount}),o.connect(s),o})(gg,Og),Xg,ev,Qg),Av=((e,t,n,r,i)=>()=>{const s=new WeakMap;return{render(o,a){const l=s.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const c=Zp(l,a);if(!c){const e={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=t(a,e)}return s.set(a,l),c?(await e(a,o.Q,l.Q),await e(a,o.detune,l.detune),await e(a,o.frequency,l.frequency),await e(a,o.gain,l.gain)):(await r(a,o.Q,l.Q),await r(a,o.detune,l.detune),await r(a,o.frequency,l.frequency),await r(a,o.gain,l.gain)),await i(o,a,l),l})(o,a)}}})(bv,dg,km,xv,Qg),Iv=(e=>(t,n)=>e.set(t,n))(zg),Nv=((e,t,n,r,i,s,o,a)=>class extends e{constructor(e,r){const l=s(e),c={...zm,...r},u=i(l,c),h=o(l);super(e,!1,u,h?n():null),this._Q=t(this,h,u.Q,sm,im),this._detune=t(this,h,u.detune,1200*Math.log2(sm),-1200*Math.log2(sm)),this._frequency=t(this,h,u.frequency,e.sampleRate/2,0),this._gain=t(this,h,u.gain,40*Math.log10(sm),im),this._nativeBiquadFilterNode=u,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(e){this._nativeBiquadFilterNode.type=e}getFrequencyResponse(e,t,n){try{this._nativeBiquadFilterNode.getFrequencyResponse(e,t,n)}catch(i){if(11===i.code)throw r();throw i}if(e.length!==t.length||t.length!==n.length)throw r()}})(lv,kv,Av,Jm,dg,Xg,ev,Iv),Ov=((e,t)=>(n,r,i)=>{const s=new Set;return n.connect=(i=>function(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const c=0===s.size;if(t(o))return i.call(n,o,a,l),e(s,[o,a,l],e=>e[0]===o&&e[1]===a&&e[2]===l,!0),c&&r(),o;i.call(n,o,a),e(s,[o,a],e=>e[0]===o&&e[1]===a,!0),c&&r()})(n.connect),n.disconnect=(e=>(r,o,a)=>{const l=s.size>0;if(void 0===r)e.apply(n),s.clear();else if("number"===typeof r){e.call(n,r);for(const e of s)e[1]===r&&s.delete(e)}else{t(r)?e.call(n,r,o,a):e.call(n,r,o);for(const e of s)e[0]!==r||void 0!==o&&e[1]!==o||void 0!==a&&e[2]!==a||s.delete(e)}const c=0===s.size;l&&c&&i()})(n.disconnect),n})(mm,sv),Rv=((e,t)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});const i=n.createBufferSource();t(r,()=>{const e=r.numberOfInputs;for(let t=0;t<e;t+=1)i.connect(r,0,t)},()=>i.disconnect(r))})(Xm,Ov),Dv=((e,t)=>(n,r)=>{const i=n.createChannelMerger(r.numberOfInputs);return null!==e&&"webkitAudioContext"===e.name&&t(n,i),sg(i,r),i})(rv,Rv),Pv=((e,t,n)=>()=>{const r=new WeakMap;return{render(i,s){const o=r.get(s);return void 0!==o?Promise.resolve(o):(async(i,s)=>{let o=t(i);if(!Zp(o,s)){const t={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfInputs:o.numberOfInputs};o=e(s,t)}return r.set(s,o),await n(i,s,o),o})(i,s)}}})(Dv,km,Qg),Mv=((e,t,n,r,i)=>class extends e{constructor(e,s){const o=r(e),a={...qm,...s};super(e,!1,n(o,a),i(o)?t():null)}})(lv,Pv,Dv,Xg,ev),Lv=((e,t,n)=>()=>{const r=new WeakMap;return{render(i,s){const o=r.get(s);return void 0!==o?Promise.resolve(o):(async(i,s)=>{let o=t(i);if(!Zp(o,s)){const t={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,numberOfOutputs:o.numberOfOutputs};o=e(s,t)}return r.set(s,o),await n(i,s,o),o})(i,s)}}})(fg,km,Qg),Vv=((e,t,n,r,i,s)=>class extends e{constructor(e,o){const a=r(e),l=s({...Bm,...o});super(e,!1,n(a,l),i(a)?t():null)}})(lv,Lv,fg,Xg,ev,e=>({...e,channelCount:e.numberOfOutputs})),jv=((e,t,n,r)=>(i,s)=>{let{offset:o,...a}=s;const l=i.createBuffer(1,2,44100),c=t(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),u=n(i,{...a,gain:o}),h=l.getChannelData(0);h[0]=1,h[1]=1,c.buffer=l,c.loop=!0;const d={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(e){u.channelCount=e},get channelCountMode(){return u.channelCountMode},set channelCountMode(e){u.channelCountMode=e},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(e){u.channelInterpretation=e},get context(){return u.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get offset(){return u.gain},get onended(){return c.onended},set onended(e){c.onended=e},addEventListener(){return c.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return c.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return c.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;c.start.call(c,e)},stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;c.stop.call(c,e)}};return e(i,c),r(pg(d,u),()=>c.connect(u),()=>c.disconnect(u))})(yv,wv,gg,Ov),Fv=((e,t,n,r,i)=>(s,o)=>{if(void 0===s.createConstantSource)return n(s,o);const a=s.createConstantSource();return sg(a,o),ag(a,o,"offset"),t(r,()=>r(s))||lg(a),t(i,()=>i(s))||cg(a),e(s,a),a})(yv,Bg,jv,Dg,Mg),Uv=((e,t,n,r,i)=>()=>{const s=new WeakMap;let o=null,a=null;return{set start(e){o=e},set stop(e){a=e},render(l,c){const u=s.get(c);return void 0!==u?Promise.resolve(u):(async(l,c)=>{let u=n(l);const h=Zp(u,c);if(!h){const e={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,offset:u.offset.value};u=t(c,e),null!==o&&u.start(o),null!==a&&u.stop(a)}return s.set(c,u),h?await e(c,l.offset,u.offset):await r(c,l.offset,u.offset),await i(l,c,u),u})(l,c)}}})(bv,Fv,km,xv,Qg),zv=((e,t,n,r,i,s,o)=>class extends e{constructor(e,o){const a=i(e),l={...$m,...o},c=r(a,l),u=s(a),h=u?n():null;super(e,!1,c,h),this._constantSourceNodeRenderer=h,this._nativeConstantSourceNode=c,this._offset=t(this,u,c.offset,sm,im),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(e){const t="function"===typeof e?o(this,e):null;this._nativeConstantSourceNode.onended=t;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===t?e:n}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeConstantSourceNode.start(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=e),"closed"!==this.context.state){Kp(this);const e=()=>{this._nativeConstantSourceNode.removeEventListener("ended",e),om(this)&&Yp(this)};this._nativeConstantSourceNode.addEventListener("ended",e)}}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeConstantSourceNode.stop(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=e)}})(lv,kv,Uv,Fv,Xg,ev,Vg),qv=((e,t)=>(n,r)=>{const i=n.createConvolver();if(sg(i,r),r.disableNormalization===i.normalize&&(i.normalize=!r.disableNormalization),ig(i,r,"buffer"),r.channelCount>2)throw e();if(t(i,"channelCount",e=>()=>e.call(i),t=>n=>{if(n>2)throw e();return t.call(i,n)}),"max"===r.channelCountMode)throw e();return t(i,"channelCountMode",e=>()=>e.call(i),t=>n=>{if("max"===n)throw e();return t.call(i,n)}),i})(wg,Og),Bv=((e,t,n)=>()=>{const r=new WeakMap;return{render(i,s){const o=r.get(s);return void 0!==o?Promise.resolve(o):(async(i,s)=>{let o=t(i);if(!Zp(o,s)){const t={buffer:o.buffer,channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,disableNormalization:!o.normalize};o=e(s,t)}return r.set(s,o),ym(o)?await n(i,s,o.inputs[0]):await n(i,s,o),o})(i,s)}}})(qv,km,Qg),$v=((e,t,n,r,i,s)=>class extends e{constructor(e,o){const a=r(e),l={...Hm,...o},c=n(a,l);super(e,!1,c,i(a)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=c,null!==l.buffer&&s(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(e){if(this._nativeConvolverNode.buffer=e,null===e&&null!==this._nativeConvolverNode.buffer){const e=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=e.createBuffer(1,1,e.sampleRate),this._isBufferNullified=!0,s(this,0)}else this._isBufferNullified=!1,s(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(e){this._nativeConvolverNode.normalize=e}})(lv,Bv,qv,Xg,ev,Iv),Hv=((e,t,n,r,i)=>s=>{const o=new WeakMap;return{render(a,l){const c=o.get(l);return void 0!==c?Promise.resolve(c):(async(a,l)=>{let c=n(a);const u=Zp(c,l);if(!u){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,delayTime:c.delayTime.value,maxDelayTime:s};c=t(l,e)}return o.set(l,c),u?await e(l,a.delayTime,c.delayTime):await r(l,a.delayTime,c.delayTime),await i(a,l,c),c})(a,l)}}})(bv,mg,km,xv,Qg),Wv=((e,t,n,r,i,s,o)=>class extends e{constructor(e,a){const l=i(e),c={...Gm,...a},u=r(l,c),h=s(l);super(e,!1,u,h?n(c.maxDelayTime):null),this._delayTime=t(this,h,u.delayTime),o(this,c.maxDelayTime)}get delayTime(){return this._delayTime}})(lv,kv,Hv,mg,Xg,ev,Iv),Gv=(e=>(t,n)=>{const r=t.createDynamicsCompressor();if(sg(r,n),n.channelCount>2)throw e();if("max"===n.channelCountMode)throw e();return ag(r,n,"attack"),ag(r,n,"knee"),ag(r,n,"ratio"),ag(r,n,"release"),ag(r,n,"threshold"),r})(wg),Kv=((e,t,n,r,i)=>()=>{const s=new WeakMap;return{render(o,a){const l=s.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const c=Zp(l,a);if(!c){const e={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=t(a,e)}return s.set(a,l),c?(await e(a,o.attack,l.attack),await e(a,o.knee,l.knee),await e(a,o.ratio,l.ratio),await e(a,o.release,l.release),await e(a,o.threshold,l.threshold)):(await r(a,o.attack,l.attack),await r(a,o.knee,l.knee),await r(a,o.ratio,l.ratio),await r(a,o.release,l.release),await r(a,o.threshold,l.threshold)),await i(o,a,l),l})(o,a)}}})(bv,Gv,km,xv,Qg),Qv=((e,t,n,r,i,s,o,a)=>class extends e{constructor(e,i){const l=s(e),c={...Qm,...i},u=r(l,c),h=o(l);super(e,!1,u,h?n():null),this._attack=t(this,h,u.attack),this._knee=t(this,h,u.knee),this._nativeDynamicsCompressorNode=u,this._ratio=t(this,h,u.ratio),this._release=t(this,h,u.release),this._threshold=t(this,h,u.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(e){const t=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=e,e>2)throw this._nativeDynamicsCompressorNode.channelCount=t,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(e){const t=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=e,"max"===e)throw this._nativeDynamicsCompressorNode.channelCountMode=t,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"===typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(lv,kv,Kv,Gv,wg,Xg,ev,Iv),Yv=((e,t,n,r,i)=>()=>{const s=new WeakMap;return{render(o,a){const l=s.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const c=Zp(l,a);if(!c){const e={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=t(a,e)}return s.set(a,l),c?await e(a,o.gain,l.gain):await r(a,o.gain,l.gain),await i(o,a,l),l})(o,a)}}})(bv,gg,km,xv,Qg),Xv=((e,t,n,r,i,s)=>class extends e{constructor(e,o){const a=i(e),l={...Ym,...o},c=r(a,l),u=s(a);super(e,!1,c,u?n():null),this._gain=t(this,u,c.gain,sm,im)}get gain(){return this._gain}})(lv,kv,Yv,gg,Xg,ev),Jv=((e,t,n,r)=>(i,s,o)=>{let{channelCount:a,channelCountMode:l,channelInterpretation:c,feedback:u,feedforward:h}=o;const d=ug(s,i.sampleRate),f=u instanceof Float64Array?u:new Float64Array(u),p=h instanceof Float64Array?h:new Float64Array(h),m=f.length,g=p.length,v=Math.min(m,g);if(0===m||m>20)throw r();if(0===f[0])throw t();if(0===g||g>20)throw r();if(0===p[0])throw t();if(1!==f[0]){for(let e=0;e<g;e+=1)p[e]/=f[0];for(let e=1;e<m;e+=1)f[e]/=f[0]}const y=n(i,d,a,a);y.channelCount=a,y.channelCountMode=l,y.channelInterpretation=c;const _=[],b=[],w=[];for(let e=0;e<a;e+=1){_.push(0);const e=new Float32Array(32),t=new Float32Array(32);e.fill(0),t.fill(0),b.push(e),w.push(t)}y.onaudioprocess=e=>{const t=e.inputBuffer,n=e.outputBuffer,r=t.numberOfChannels;for(let i=0;i<r;i+=1){const e=t.getChannelData(i),r=n.getChannelData(i);_[i]=eg(f,m,p,g,v,b[i],w[i],_[i],32,e,r)}};const x=i.sampleRate/2,T={get bufferSize(){return d},get channelCount(){return y.channelCount},set channelCount(e){y.channelCount=e},get channelCountMode(){return y.channelCountMode},set channelCountMode(e){y.channelCountMode=e},get channelInterpretation(){return y.channelInterpretation},set channelInterpretation(e){y.channelInterpretation=e},get context(){return y.context},get inputs(){return[y]},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},addEventListener(){return y.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return y.dispatchEvent(arguments.length<=0?void 0:arguments[0])},getFrequencyResponse(t,n,r){if(t.length!==n.length||n.length!==r.length)throw e();const i=t.length;for(let e=0;e<i;e+=1){const i=-Math.PI*(t[e]/x),s=[Math.cos(i),Math.sin(i)],o=vg(_g(p,s),_g(f,s));n[e]=Math.sqrt(o[0]*o[0]+o[1]*o[1]),r[e]=Math.atan2(o[1],o[0])}},removeEventListener(){return y.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};return pg(T,y)})(Jm,Xm,bg,wg),Zv=((e,t,n,r)=>i=>e(ng,()=>ng(i))?Promise.resolve(e(r,r)).then(e=>{if(!e){const e=n(i,512,0,1);i.oncomplete=()=>{e.onaudioprocess=null,e.disconnect()},e.onaudioprocess=()=>i.currentTime,e.connect(i.destination)}return i.startRendering()}):new Promise(e=>{const n=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=t=>{n.disconnect(),e(t.renderedBuffer)},n.connect(i.destination),i.startRendering()}))(Bg,gg,bg,((e,t)=>()=>{if(null===t)return Promise.resolve(!1);const n=new t(1,1,44100),r=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(e=>{n.oncomplete=()=>{r.disconnect(),e(0!==n.currentTime)},n.startRendering()})})(gg,Zg)),ey=((e,t,n,r,i)=>(s,o)=>{const a=new WeakMap;let l=null;const c=async(c,u)=>{let h=null,d=t(c);const f=Zp(d,u);if(void 0===u.createIIRFilter?h=e(u,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):f||(d=u.createIIRFilter(o,s)),a.set(u,null===h?d:h),null!==h){if(null===l){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new n(c.context.destination.channelCount,c.context.length,u.sampleRate);l=(async()=>{await r(c,e,e.destination);return((e,t,n,r)=>{const i=n instanceof Float64Array?n:new Float64Array(n),s=r instanceof Float64Array?r:new Float64Array(r),o=i.length,a=s.length,l=Math.min(o,a);if(1!==i[0]){for(let e=0;e<o;e+=1)s[e]/=i[0];for(let e=1;e<a;e+=1)i[e]/=i[0]}const c=new Float32Array(32),u=new Float32Array(32),h=t.createBuffer(e.numberOfChannels,e.length,e.sampleRate),d=e.numberOfChannels;for(let f=0;f<d;f+=1){const t=e.getChannelData(f),n=h.getChannelData(f);c.fill(0),u.fill(0),eg(i,o,s,a,l,c,u,0,32,t,n)}return h})(await i(e),u,s,o)})()}const e=await l;return h.buffer=e,h.start(0),h}return await r(c,u,d),d};return{render(e,t){const n=a.get(t);return void 0!==n?Promise.resolve(n):c(e,t)}}})(wv,km,Zg,Qg,Zv),ty=(e=>(t,n,r)=>{if(void 0===t.createIIRFilter)return e(t,n,r);const i=t.createIIRFilter(r.feedforward,r.feedback);return sg(i,r),i})(Jv),ny=((e,t,n,r,i,s)=>class extends e{constructor(e,o){const a=r(e),l=i(a),c={...Zm,...o},u=t(a,l?null:e.baseLatency,c);super(e,!1,u,l?n(c.feedback,c.feedforward):null),(e=>{var t;e.getFrequencyResponse=(t=e.getFrequencyResponse,(n,r,i)=>{if(n.length!==r.length||r.length!==i.length)throw Jm();return t.call(e,n,r,i)})})(u),this._nativeIIRFilterNode=u,s(this,1)}getFrequencyResponse(e,t,n){return this._nativeIIRFilterNode.getFrequencyResponse(e,t,n)}})(lv,ty,ey,Xg,ev,Iv),ry=((e,t,n,r,i,s,o,a)=>(l,c)=>{const u=c.listener,{forwardX:h,forwardY:d,forwardZ:f,positionX:p,positionY:m,positionZ:g,upX:v,upY:y,upZ:_}=void 0===u.forwardX?(()=>{const h=new Float32Array(1),d=t(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),f=o(c);let p=!1,m=[0,0,-1,0,1,0],g=[0,0,0];const v=()=>{if(p)return;p=!0;const e=r(c,256,9,0);e.onaudioprocess=e=>{let{inputBuffer:t}=e;const n=[s(t,h,0),s(t,h,1),s(t,h,2),s(t,h,3),s(t,h,4),s(t,h,5)];n.some((e,t)=>e!==m[t])&&(u.setOrientation(...n),m=n);const r=[s(t,h,6),s(t,h,7),s(t,h,8)];r.some((e,t)=>e!==g[t])&&(u.setPosition(...r),g=r)},d.connect(e)},y=e=>t=>{t!==m[e]&&(m[e]=t,u.setOrientation(...m))},_=e=>t=>{t!==g[e]&&(g[e]=t,u.setPosition(...g))},b=(t,r,s)=>{const o=n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:r});o.connect(d,0,t),o.start(),Object.defineProperty(o.offset,"defaultValue",{get:()=>r});const u=e({context:l},f,o.offset,sm,im);var h,p,m,g,y,_,b;return a(u,"value",e=>()=>e.call(u),e=>t=>{try{e.call(u,t)}catch(n){if(9!==n.code)throw n}v(),f&&s(t)}),u.cancelAndHoldAtTime=(h=u.cancelAndHoldAtTime,f?()=>{throw i()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=h.apply(u,t);return v(),r}),u.cancelScheduledValues=(p=u.cancelScheduledValues,f?()=>{throw i()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=p.apply(u,t);return v(),r}),u.exponentialRampToValueAtTime=(m=u.exponentialRampToValueAtTime,f?()=>{throw i()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=m.apply(u,t);return v(),r}),u.linearRampToValueAtTime=(g=u.linearRampToValueAtTime,f?()=>{throw i()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=g.apply(u,t);return v(),r}),u.setTargetAtTime=(y=u.setTargetAtTime,f?()=>{throw i()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=y.apply(u,t);return v(),r}),u.setValueAtTime=(_=u.setValueAtTime,f?()=>{throw i()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=_.apply(u,t);return v(),r}),u.setValueCurveAtTime=(b=u.setValueCurveAtTime,f?()=>{throw i()}:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=b.apply(u,t);return v(),r}),u};return{forwardX:b(0,0,y(0)),forwardY:b(1,0,y(1)),forwardZ:b(2,-1,y(2)),positionX:b(6,0,_(0)),positionY:b(7,0,_(1)),positionZ:b(8,0,_(2)),upX:b(3,0,y(3)),upY:b(4,1,y(4)),upZ:b(5,0,y(5))}})():u;return{get forwardX(){return h},get forwardY(){return d},get forwardZ(){return f},get positionX(){return p},get positionY(){return m},get positionZ(){return g},get upX(){return v},get upY(){return y},get upZ(){return _}}})(kv,Dv,Fv,bg,wg,Ig,ev,Og),iy=new WeakMap,sy=((e,t,n,r,i,s)=>class extends n{constructor(n,s){super(n),this._nativeContext=n,Pp.set(this,n),r(n)&&i.set(n,new Set),this._destination=new e(this,s),this._listener=t(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(e){const t="function"===typeof e?s(this,e):null;this._nativeContext.onstatechange=t;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===t?e:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(Ev,ry,nv,ev,iy,Vg),oy=((e,t,n,r,i,s)=>(o,a)=>{const l=o.createOscillator();return sg(l,a),ag(l,a,"detune"),ag(l,a,"frequency"),void 0!==a.periodicWave?l.setPeriodicWave(a.periodicWave):ig(l,a,"type"),t(n,()=>n(o))||lg(l),t(r,()=>r(o))||s(l,o),t(i,()=>i(o))||cg(l),e(o,l),l})(yv,Bg,Dg,Pg,Mg,Lg),ay=((e,t,n,r,i)=>()=>{const s=new WeakMap;let o=null,a=null,l=null;return{set periodicWave(e){o=e},set start(e){a=e},set stop(e){l=e},render(c,u){const h=s.get(u);return void 0!==h?Promise.resolve(h):(async(c,u)=>{let h=n(c);const d=Zp(h,u);if(!d){const e={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:null===o?void 0:o,type:h.type};h=t(u,e),null!==a&&h.start(a),null!==l&&h.stop(l)}return s.set(u,h),d?(await e(u,c.detune,h.detune),await e(u,c.frequency,h.frequency)):(await r(u,c.detune,h.detune),await r(u,c.frequency,h.frequency)),await i(c,u,h),h})(c,u)}}})(bv,oy,km,xv,Qg),ly=((e,t,n,r,i,s,o)=>class extends e{constructor(e,o){const a=i(e),l={...Tg,...o},c=n(a,l),u=s(a),h=u?r():null,d=e.sampleRate/2;super(e,!1,c,h),this._detune=t(this,u,c.detune,153600,-153600),this._frequency=t(this,u,c.frequency,d,-d),this._nativeOscillatorNode=c,this._onended=null,this._oscillatorNodeRenderer=h,null!==this._oscillatorNodeRenderer&&void 0!==l.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=l.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(e){const t="function"===typeof e?o(this,e):null;this._nativeOscillatorNode.onended=t;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===t?e:n}get type(){return this._nativeOscillatorNode.type}set type(e){this._nativeOscillatorNode.type=e,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(e){this._nativeOscillatorNode.setPeriodicWave(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=e)}start(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._nativeOscillatorNode.start(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=e),"closed"!==this.context.state){Kp(this);const e=()=>{this._nativeOscillatorNode.removeEventListener("ended",e),om(this)&&Yp(this)};this._nativeOscillatorNode.addEventListener("ended",e)}}stop(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._nativeOscillatorNode.stop(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=e)}})(lv,kv,oy,ay,Xg,ev,Vg),cy=(e=>(t,n)=>{const r=e(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=t.createBuffer(1,2,44100);return r.buffer=i,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}})(wv),uy=((e,t,n,r,i)=>(s,o)=>{let{curve:a,oversample:l,...c}=o;const u=s.createWaveShaper(),h=s.createWaveShaper();sg(u,c),sg(h,c);const d=n(s,{...c,gain:1}),f=n(s,{...c,gain:-1}),p=n(s,{...c,gain:1}),m=n(s,{...c,gain:-1});let g=null,v=!1,y=null;const _={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(e){d.channelCount=e,f.channelCount=e,u.channelCount=e,p.channelCount=e,h.channelCount=e,m.channelCount=e},get channelCountMode(){return u.channelCountMode},set channelCountMode(e){d.channelCountMode=e,f.channelCountMode=e,u.channelCountMode=e,p.channelCountMode=e,h.channelCountMode=e,m.channelCountMode=e},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(e){d.channelInterpretation=e,f.channelInterpretation=e,u.channelInterpretation=e,p.channelInterpretation=e,h.channelInterpretation=e,m.channelInterpretation=e},get context(){return u.context},get curve(){return y},set curve(n){if(null!==n&&n.length<2)throw t();if(null===n)u.curve=n,h.curve=n;else{const e=n.length,t=new Float32Array(e+2-e%2),r=new Float32Array(e+2-e%2);t[0]=n[0],r[0]=-n[e-1];const i=Math.ceil((e+1)/2),s=(e+1)/2-1;for(let o=1;o<i;o+=1){const a=o/i*s,l=Math.floor(a),c=Math.ceil(a);t[o]=l===c?n[l]:(1-(a-l))*n[l]+(1-(c-a))*n[c],r[o]=l===c?-n[e-1-l]:-(1-(a-l))*n[e-1-l]-(1-(c-a))*n[e-1-c]}t[i]=e%2===1?n[i-1]:(n[i-2]+n[i-1])/2,u.curve=t,h.curve=r}y=n,v&&(r(y)&&null===g?g=e(s,d):null!==g&&(g(),g=null))},get inputs(){return[d]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get oversample(){return u.oversample},set oversample(e){u.oversample=e,h.oversample=e},addEventListener(){return d.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return d.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return d.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};null!==a&&(_.curve=a instanceof Float32Array?a:new Float32Array(a)),l!==_.oversample&&(_.oversample=l);return i(pg(_,p),()=>{d.connect(u).connect(p),d.connect(f).connect(h).connect(m).connect(p),v=!0,r(y)&&(g=e(s,d))},()=>{d.disconnect(u),u.disconnect(p),d.disconnect(f),f.disconnect(h),h.disconnect(m),m.disconnect(p),v=!1,null!==g&&(g(),g=null)})})(cy,Xm,gg,Ng,Ov),hy=((e,t,n,r,i,s,o)=>(a,l)=>{const c=a.createWaveShaper();if(null!==s&&"webkitAudioContext"===s.name&&void 0===a.createGain().gain.automationRate)return n(a,l);sg(c,l);const u=null===l.curve||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(null!==u&&u.length<2)throw t();ig(c,{curve:u},"curve"),ig(c,l,"oversample");let h=null,d=!1;o(c,"curve",e=>()=>e.call(c),t=>n=>(t.call(c,n),d&&(r(n)&&null===h?h=e(a,c):r(n)||null===h||(h(),h=null)),n));return i(c,()=>{d=!0,r(c.curve)&&(h=e(a,c))},()=>{d=!1,null!==h&&(h(),h=null)})})(cy,Xm,uy,Ng,Ov,rv,Og),dy=((e,t,n,r,i,s,o,a,l,c)=>(u,h)=>{let{coneInnerAngle:d,coneOuterAngle:f,coneOuterGain:p,distanceModel:m,maxDistance:g,orientationX:v,orientationY:y,orientationZ:_,panningModel:b,positionX:w,positionY:x,positionZ:T,refDistance:k,rolloffFactor:S,...C}=h;const E=u.createPanner();if(C.channelCount>2)throw o();if("max"===C.channelCountMode)throw o();sg(E,C);const A={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},I=n(u,{...A,channelInterpretation:"speakers",numberOfInputs:6}),N=r(u,{...C,gain:1}),O=r(u,{...A,gain:1}),R=r(u,{...A,gain:0}),D=r(u,{...A,gain:0}),P=r(u,{...A,gain:0}),M=r(u,{...A,gain:0}),L=r(u,{...A,gain:0}),V=i(u,256,6,1),j=s(u,{...A,curve:new Float32Array([1,1]),oversample:"none"});let F=[v,y,_],U=[w,x,T];const z=new Float32Array(1);V.onaudioprocess=e=>{let{inputBuffer:t}=e;const n=[l(t,z,0),l(t,z,1),l(t,z,2)];n.some((e,t)=>e!==F[t])&&(E.setOrientation(...n),F=n);const r=[l(t,z,3),l(t,z,4),l(t,z,5)];r.some((e,t)=>e!==U[t])&&(E.setPosition(...r),U=r)},Object.defineProperty(R.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(M.gain,"defaultValue",{get:()=>0}),Object.defineProperty(L.gain,"defaultValue",{get:()=>0});const q={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(e){if(e>2)throw o();N.channelCount=e,E.channelCount=e},get channelCountMode(){return E.channelCountMode},set channelCountMode(e){if("max"===e)throw o();N.channelCountMode=e,E.channelCountMode=e},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(e){N.channelInterpretation=e,E.channelInterpretation=e},get coneInnerAngle(){return E.coneInnerAngle},set coneInnerAngle(e){E.coneInnerAngle=e},get coneOuterAngle(){return E.coneOuterAngle},set coneOuterAngle(e){E.coneOuterAngle=e},get coneOuterGain(){return E.coneOuterGain},set coneOuterGain(e){if(e<0||e>1)throw t();E.coneOuterGain=e},get context(){return E.context},get distanceModel(){return E.distanceModel},set distanceModel(e){E.distanceModel=e},get inputs(){return[N]},get maxDistance(){return E.maxDistance},set maxDistance(e){if(e<0)throw new RangeError;E.maxDistance=e},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get orientationX(){return O.gain},get orientationY(){return R.gain},get orientationZ(){return D.gain},get panningModel(){return E.panningModel},set panningModel(e){E.panningModel=e},get positionX(){return P.gain},get positionY(){return M.gain},get positionZ(){return L.gain},get refDistance(){return E.refDistance},set refDistance(e){if(e<0)throw new RangeError;E.refDistance=e},get rolloffFactor(){return E.rolloffFactor},set rolloffFactor(e){if(e<0)throw new RangeError;E.rolloffFactor=e},addEventListener(){return N.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return N.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return N.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};d!==q.coneInnerAngle&&(q.coneInnerAngle=d),f!==q.coneOuterAngle&&(q.coneOuterAngle=f),p!==q.coneOuterGain&&(q.coneOuterGain=p),m!==q.distanceModel&&(q.distanceModel=m),g!==q.maxDistance&&(q.maxDistance=g),v!==q.orientationX.value&&(q.orientationX.value=v),y!==q.orientationY.value&&(q.orientationY.value=y),_!==q.orientationZ.value&&(q.orientationZ.value=_),b!==q.panningModel&&(q.panningModel=b),w!==q.positionX.value&&(q.positionX.value=w),x!==q.positionY.value&&(q.positionY.value=x),T!==q.positionZ.value&&(q.positionZ.value=T),k!==q.refDistance&&(q.refDistance=k),S!==q.rolloffFactor&&(q.rolloffFactor=S),1===F[0]&&0===F[1]&&0===F[2]||E.setOrientation(...F),0===U[0]&&0===U[1]&&0===U[2]||E.setPosition(...U);return c(pg(q,E),()=>{N.connect(E),e(N,j,0,0),j.connect(O).connect(I,0,0),j.connect(R).connect(I,0,1),j.connect(D).connect(I,0,2),j.connect(P).connect(I,0,3),j.connect(M).connect(I,0,4),j.connect(L).connect(I,0,5),I.connect(V).connect(u.destination)},()=>{N.disconnect(E),a(N,j,0,0),j.disconnect(O),O.disconnect(I),j.disconnect(R),R.disconnect(I),j.disconnect(D),D.disconnect(I),j.disconnect(P),P.disconnect(I),j.disconnect(M),M.disconnect(I),j.disconnect(L),L.disconnect(I),I.disconnect(V),V.disconnect(u.destination)})})(_m,Xm,Dv,gg,bg,hy,wg,Tm,Ig,Ov),fy=(e=>(t,n)=>{const r=t.createPanner();return void 0===r.orientationX?e(t,n):(sg(r,n),ag(r,n,"orientationX"),ag(r,n,"orientationY"),ag(r,n,"orientationZ"),ag(r,n,"positionX"),ag(r,n,"positionY"),ag(r,n,"positionZ"),ig(r,n,"coneInnerAngle"),ig(r,n,"coneOuterAngle"),ig(r,n,"coneOuterGain"),ig(r,n,"distanceModel"),ig(r,n,"maxDistance"),ig(r,n,"panningModel"),ig(r,n,"refDistance"),ig(r,n,"rolloffFactor"),r)})(dy),py=((e,t,n,r,i,s,o,a,l,c)=>()=>{const u=new WeakMap;let h=null;return{render(d,f){const p=u.get(f);return void 0!==p?Promise.resolve(p):(async(d,f)=>{let p=null,m=s(d);const g={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation},v={...g,coneInnerAngle:m.coneInnerAngle,coneOuterAngle:m.coneOuterAngle,coneOuterGain:m.coneOuterGain,distanceModel:m.distanceModel,maxDistance:m.maxDistance,panningModel:m.panningModel,refDistance:m.refDistance,rolloffFactor:m.rolloffFactor},y=Zp(m,f);if("bufferSize"in m)p=r(f,{...g,gain:1});else if(!y){const e={...v,orientationX:m.orientationX.value,orientationY:m.orientationY.value,orientationZ:m.orientationZ.value,positionX:m.positionX.value,positionY:m.positionY.value,positionZ:m.positionZ.value};m=i(f,e)}if(u.set(f,null===p?m:p),null!==p){if(null===h){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new o(6,d.context.length,f.sampleRate),r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});r.connect(e.destination),h=(async()=>{const t=await Promise.all([d.orientationX,d.orientationY,d.orientationZ,d.positionX,d.positionY,d.positionZ].map(async(t,r)=>{const i=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===r?1:0});return await a(e,t,i.offset),i}));for(let e=0;e<6;e+=1)t[e].connect(r,0,e),t[e].start(0);return c(e)})()}const e=await h,s=r(f,{...g,gain:1});await l(d,f,s);const u=[];for(let t=0;t<e.numberOfChannels;t+=1)u.push(e.getChannelData(t));let m=[u[0][0],u[1][0],u[2][0]],y=[u[3][0],u[4][0],u[5][0]],_=r(f,{...g,gain:1}),b=i(f,{...v,orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:y[0],positionY:y[1],positionZ:y[2]});s.connect(_).connect(b.inputs[0]),b.connect(p);for(let t=128;t<e.length;t+=128){const e=[u[0][t],u[1][t],u[2][t]],n=[u[3][t],u[4][t],u[5][t]];if(e.some((e,t)=>e!==m[t])||n.some((e,t)=>e!==y[t])){m=e,y=n;const o=t/f.sampleRate;_.gain.setValueAtTime(0,o),_=r(f,{...g,gain:0}),b=i(f,{...v,orientationX:m[0],orientationY:m[1],orientationZ:m[2],positionX:y[0],positionY:y[1],positionZ:y[2]}),_.gain.setValueAtTime(1,o),s.connect(_).connect(b.inputs[0]),b.connect(p)}}return p}return y?(await e(f,d.orientationX,m.orientationX),await e(f,d.orientationY,m.orientationY),await e(f,d.orientationZ,m.orientationZ),await e(f,d.positionX,m.positionX),await e(f,d.positionY,m.positionY),await e(f,d.positionZ,m.positionZ)):(await a(f,d.orientationX,m.orientationX),await a(f,d.orientationY,m.orientationY),await a(f,d.orientationZ,m.orientationZ),await a(f,d.positionX,m.positionX),await a(f,d.positionY,m.positionY),await a(f,d.positionZ,m.positionZ)),ym(m)?await l(d,f,m.inputs[0]):await l(d,f,m),m})(d,f)}}})(bv,Dv,Fv,gg,fy,km,Zg,xv,Qg,Zv),my=((e,t,n,r,i,s,o)=>class extends e{constructor(e,a){const l=i(e),c={...kg,...a},u=n(l,c),h=s(l);super(e,!1,u,h?r():null),this._nativePannerNode=u,this._orientationX=t(this,h,u.orientationX,sm,im),this._orientationY=t(this,h,u.orientationY,sm,im),this._orientationZ=t(this,h,u.orientationZ,sm,im),this._positionX=t(this,h,u.positionX,sm,im),this._positionY=t(this,h,u.positionY,sm,im),this._positionZ=t(this,h,u.positionZ,sm,im),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(e){this._nativePannerNode.coneInnerAngle=e}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(e){this._nativePannerNode.coneOuterAngle=e}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(e){this._nativePannerNode.coneOuterGain=e}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(e){this._nativePannerNode.distanceModel=e}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(e){this._nativePannerNode.maxDistance=e}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(e){this._nativePannerNode.panningModel=e}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(e){this._nativePannerNode.refDistance=e}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(e){this._nativePannerNode.rolloffFactor=e}})(lv,kv,fy,py,Xg,ev,Iv),gy=(e=>(t,n)=>{let{disableNormalization:r,imag:i,real:s}=n;const o=i instanceof Float32Array?i:new Float32Array(i),a=s instanceof Float32Array?s:new Float32Array(s),l=t.createPeriodicWave(a,o,{disableNormalization:r});if(Array.from(i).length<2)throw e();return l})(tm),vy=((e,t,n,r)=>class i{constructor(i,s){const o=t(i),a=r({...Sg,...s}),l=e(o,a);return n.add(l),l}static[Symbol.hasInstance](e){return null!==e&&"object"===typeof e&&Object.getPrototypeOf(e)===i.prototype||n.has(e)}})(gy,Xg,new WeakSet,e=>{const{imag:t,real:n}=e;return void 0===t?void 0===n?{...e,imag:[0,0],real:[0,0]}:{...e,imag:Array.from(n,()=>0),real:n}:void 0===n?{...e,imag:t,real:Array.from(t,()=>0)}:{...e,imag:t,real:n}}),yy=((e,t,n,r,i,s)=>{const o=16385,a=new Float32Array([1,1]),l=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...c,oversample:"none"},h=(e,s,h,d,f)=>{if(1===s)return((e,t,i,s)=>{const h=new Float32Array(o),d=new Float32Array(o);for(let n=0;n<o;n+=1){const e=n/16384*l;h[n]=Math.cos(e),d[n]=Math.sin(e)}const f=n(e,{...c,gain:0}),p=r(e,{...u,curve:h}),m=r(e,{...u,curve:a}),g=n(e,{...c,gain:0}),v=r(e,{...u,curve:d});return{connectGraph(){t.connect(f),t.connect(void 0===m.inputs?m:m.inputs[0]),t.connect(g),m.connect(i),i.connect(void 0===p.inputs?p:p.inputs[0]),i.connect(void 0===v.inputs?v:v.inputs[0]),p.connect(f.gain),v.connect(g.gain),f.connect(s,0,0),g.connect(s,0,1)},disconnectGraph(){t.disconnect(f),t.disconnect(void 0===m.inputs?m:m.inputs[0]),t.disconnect(g),m.disconnect(i),i.disconnect(void 0===p.inputs?p:p.inputs[0]),i.disconnect(void 0===v.inputs?v:v.inputs[0]),p.disconnect(f.gain),v.disconnect(g.gain),f.disconnect(s,0,0),g.disconnect(s,0,1)}}})(e,h,d,f);if(2===s)return((e,i,s,h)=>{const d=new Float32Array(o),f=new Float32Array(o),p=new Float32Array(o),m=new Float32Array(o),g=Math.floor(8192.5);for(let t=0;t<o;t+=1)if(t>g){const e=(t-g)/(16384-g)*l;d[t]=Math.cos(e),f[t]=Math.sin(e),p[t]=0,m[t]=1}else{const e=t/(16384-g)*l;d[t]=1,f[t]=0,p[t]=Math.cos(e),m[t]=Math.sin(e)}const v=t(e,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),y=n(e,{...c,gain:0}),_=r(e,{...u,curve:d}),b=n(e,{...c,gain:0}),w=r(e,{...u,curve:f}),x=r(e,{...u,curve:a}),T=n(e,{...c,gain:0}),k=r(e,{...u,curve:p}),S=n(e,{...c,gain:0}),C=r(e,{...u,curve:m});return{connectGraph(){i.connect(v),i.connect(void 0===x.inputs?x:x.inputs[0]),v.connect(y,0),v.connect(b,0),v.connect(T,1),v.connect(S,1),x.connect(s),s.connect(void 0===_.inputs?_:_.inputs[0]),s.connect(void 0===w.inputs?w:w.inputs[0]),s.connect(void 0===k.inputs?k:k.inputs[0]),s.connect(void 0===C.inputs?C:C.inputs[0]),_.connect(y.gain),w.connect(b.gain),k.connect(T.gain),C.connect(S.gain),y.connect(h,0,0),T.connect(h,0,0),b.connect(h,0,1),S.connect(h,0,1)},disconnectGraph(){i.disconnect(v),i.disconnect(void 0===x.inputs?x:x.inputs[0]),v.disconnect(y,0),v.disconnect(b,0),v.disconnect(T,1),v.disconnect(S,1),x.disconnect(s),s.disconnect(void 0===_.inputs?_:_.inputs[0]),s.disconnect(void 0===w.inputs?w:w.inputs[0]),s.disconnect(void 0===k.inputs?k:k.inputs[0]),s.disconnect(void 0===C.inputs?C:C.inputs[0]),_.disconnect(y.gain),w.disconnect(b.gain),k.disconnect(T.gain),C.disconnect(S.gain),y.disconnect(h,0,0),T.disconnect(h,0,0),b.disconnect(h,0,1),S.disconnect(h,0,1)}}})(e,h,d,f);throw i()};return(t,r)=>{let{channelCount:o,channelCountMode:a,pan:l,...c}=r;if("max"===a)throw i();const u=e(t,{...c,channelCount:1,channelCountMode:a,numberOfInputs:2}),d=n(t,{...c,channelCount:o,channelCountMode:a,gain:1}),f=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:l});let{connectGraph:p,disconnectGraph:m}=h(t,o,d,f,u);Object.defineProperty(f.gain,"defaultValue",{get:()=>0}),Object.defineProperty(f.gain,"maxValue",{get:()=>1}),Object.defineProperty(f.gain,"minValue",{get:()=>-1});const g={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(e){d.channelCount!==e&&(v&&m(),({connectGraph:p,disconnectGraph:m}=h(t,e,d,f,u)),v&&p()),d.channelCount=e},get channelCountMode(){return d.channelCountMode},set channelCountMode(e){if("clamped-max"===e||"max"===e)throw i();d.channelCountMode=e},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(e){d.channelInterpretation=e},get context(){return d.context},get inputs(){return[d]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get pan(){return f.gain},addEventListener(){return d.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},dispatchEvent(){return d.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return d.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}};let v=!1;return s(pg(g,u),()=>{p(),v=!0},()=>{m(),v=!1})}})(Dv,fg,gg,hy,wg,Ov),_y=((e,t)=>(n,r)=>{const i=r.channelCountMode;if("clamped-max"===i)throw t();if(void 0===n.createStereoPanner)return e(n,r);const s=n.createStereoPanner();return sg(s,r),ag(s,r,"pan"),Object.defineProperty(s,"channelCountMode",{get:()=>i,set:e=>{if(e!==i)throw t()}}),s})(yy,wg),by=((e,t,n,r,i)=>()=>{const s=new WeakMap;return{render(o,a){const l=s.get(a);return void 0!==l?Promise.resolve(l):(async(o,a)=>{let l=n(o);const c=Zp(l,a);if(!c){const e={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=t(a,e)}return s.set(a,l),c?await e(a,o.pan,l.pan):await r(a,o.pan,l.pan),ym(l)?await i(o,a,l.inputs[0]):await i(o,a,l),l})(o,a)}}})(bv,_y,km,xv,Qg),wy=((e,t,n,r,i,s)=>class extends e{constructor(e,o){const a=i(e),l={...Cg,...o},c=n(a,l),u=s(a);super(e,!1,c,u?r():null),this._pan=t(this,u,c.pan)}get pan(){return this._pan}})(lv,kv,_y,by,Xg,ev),xy=((e,t,n)=>()=>{const r=new WeakMap;return{render(i,s){const o=r.get(s);return void 0!==o?Promise.resolve(o):(async(i,s)=>{let o=t(i);if(!Zp(o,s)){const t={channelCount:o.channelCount,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,curve:o.curve,oversample:o.oversample};o=e(s,t)}return r.set(s,o),ym(o)?await n(i,s,o.inputs[0]):await n(i,s,o),o})(i,s)}}})(hy,km,Qg),Ty=((e,t,n,r,i,s,o)=>class extends e{constructor(e,t){const a=i(e),l={...Ag,...t},c=n(a,l);super(e,!0,c,s(a)?r():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=c,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(e){if(null===e)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(e.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=e}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(e){this._nativeWaveShaperNode.oversample=e}})(lv,Xm,hy,xy,Xg,ev,Iv),ky=(e=>null!==e&&e.isSecureContext)(Wg),Sy=(e=>(t,n,r)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get:()=>Math.round(t*n)},currentTime:{configurable:!0,get:()=>t}});try{return r()}finally{null!==e&&(delete e.currentFrame,delete e.currentTime)}})(Wg),Cy=new WeakMap,Ey=((e,t)=>n=>{let r=e.get(n);if(void 0!==r)return r;if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new t(1,1,44100),e.set(n,r),r})(Cy,Zg),Ay=ky?((e,t,n,r,i,s,o,a,l,c,u,h,d)=>{let f=0;return function(p,m){let g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{credentials:"omit"};const v=u.get(p);if(void 0!==v&&v.has(m))return Promise.resolve();const y=c.get(p);if(void 0!==y){const e=y.get(m);if(void 0!==e)return e}const _=s(p),b=void 0===_.audioWorklet?i(m).then(e=>{let[t,r]=e;const[i,s]=zp(t,r);return n(`${i};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${s}\n})})(window,'_AWGS')`)}).then(()=>{const e=d._AWGS.pop();if(void 0===e)throw new SyntaxError;r(_.currentTime,_.sampleRate,()=>e(class{},void 0,(e,n)=>{if(""===e.trim())throw t();const r=Vp.get(_);if(void 0!==r){if(r.has(e))throw t();Bp(n),qp(n.parameterDescriptors),r.set(e,n)}else Bp(n),qp(n.parameterDescriptors),Vp.set(_,new Map([[e,n]]))},_.sampleRate,void 0,void 0))}):Promise.all([i(m),Promise.resolve(e(h,h))]).then(e=>{let[[t,n],r]=e;const i=f+1;f=i;const[s,c]=zp(t,n),u=new Blob([`${s};((AudioWorkletProcessor,registerProcessor)=>{${c}\n})(${r?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${r?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${r?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${i}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),h=URL.createObjectURL(u);return _.audioWorklet.addModule(h,g).then(()=>{if(a(_))return _;const e=o(_);return e.audioWorklet.addModule(h,g).then(()=>e)}).then(e=>{if(null===l)throw new SyntaxError;try{new l(e,`__sac${i}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(h))});return void 0===y?c.set(p,new Map([[m,b]])):y.set(m,b),b.then(()=>{const e=u.get(p);void 0===e?u.set(p,new Set([m])):e.add(m)}).finally(()=>{const e=c.get(p);void 0!==e&&e.delete(m)}),b}})(Bg,wg,(e=>t=>new Promise((n,r)=>{if(null===e)return void r(new SyntaxError);const i=e.document.head;if(null===i)r(new SyntaxError);else{const s=e.document.createElement("script"),o=new Blob([t],{type:"application/javascript"}),a=URL.createObjectURL(o),l=e.onerror,c=()=>{e.onerror=l,URL.revokeObjectURL(a)};e.onerror=(t,n,i,s,o)=>n===a||n===e.location.href&&1===i&&1===s?(c(),r(o),!1):null!==l?l(t,n,i,s,o):void 0,s.onerror=()=>{c(),r(new SyntaxError)},s.onload=()=>{c(),n()},s.src=a,s.type="module",i.appendChild(s)}}))(Wg),Sy,(e=>async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw e()})(()=>new DOMException("","AbortError")),Xg,Ey,ev,av,new WeakMap,new WeakMap,((e,t)=>async()=>{if(null===e)return!0;if(null===t)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new t(1,128,44100),i=URL.createObjectURL(n);let s=!1,o=!1;try{await r.audioWorklet.addModule(i);const t=new e(r,"a",{numberOfOutputs:0}),n=r.createOscillator();t.port.onmessage=()=>s=!0,t.onprocessorerror=()=>o=!0,n.connect(t),n.start(0),await r.startRendering(),await new Promise(e=>setTimeout(e))}catch{}finally{URL.revokeObjectURL(i)}return s&&!o})(av,Zg),Wg):void 0,Iy=((e,t)=>n=>e(n)||t(n))(iv,ev),Ny=((e,t,n,r,i,s,o,a,l,c,u)=>(h,d)=>{const f=o(h)?h:s(h);if(i.has(d)){const e=n();return Promise.reject(e)}try{i.add(d)}catch{}return t(l,()=>l(f))?f.decodeAudioData(d).then(n=>(Wm(d).catch(()=>{}),t(a,()=>a(n))||u(n),e.add(n),n)):new Promise((t,n)=>{const i=async()=>{try{await Wm(d)}catch{}},s=e=>{n(e),i()};try{f.decodeAudioData(d,n=>{"function"!==typeof n.copyFromChannel&&(c(n),nm(n)),e.add(n),i().then(()=>t(n))},e=>{s(null===e?r():e)})}catch(o){s(o)}})})(hv,Bg,()=>new DOMException("","DataCloneError"),()=>new DOMException("","EncodingError"),new WeakSet,Xg,Iy,em,ng,mv,gv),Oy=((e,t,n,r,i,s,o,a,l,c,u,h,d,f,p,m,g,v,y,_)=>class extends p{constructor(t,n){super(t,n),this._nativeContext=t,this._audioWorklet=void 0===e?void 0:{addModule:(t,n)=>e(this,t,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new i(this)}createBuffer(e,t,r){return new n({length:t,numberOfChannels:e,sampleRate:r})}createBufferSource(){return new r(this)}createChannelMerger(){return new s(this,{numberOfInputs:arguments.length>0&&void 0!==arguments[0]?arguments[0]:6})}createChannelSplitter(){return new o(this,{numberOfOutputs:arguments.length>0&&void 0!==arguments[0]?arguments[0]:6})}createConstantSource(){return new a(this)}createConvolver(){return new l(this)}createDelay(){return new u(this,{maxDelayTime:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(e,t){return new f(this,{feedback:t,feedforward:e})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(e,t){return new v(this,{...arguments.length>2&&void 0!==arguments[2]?arguments[2]:{disableNormalization:!1},imag:t,real:e})}createStereoPanner(){return new y(this)}createWaveShaper(){return new _(this)}decodeAudioData(e,t,n){return c(this._nativeContext,e).then(e=>("function"===typeof t&&t(e),e),e=>{throw"function"===typeof n&&n(e),e})}})(Ay,uv,vv,Cv,Nv,Mv,Vv,zv,$v,Ny,Wv,Qv,Xv,ny,sy,ly,my,vy,wy,Ty),Ry=((e,t,n,r)=>class extends e{constructor(e,i){const s=n(e),o=t(s,i);if(r(s))throw TypeError();super(e,!0,o,null),this._nativeMediaElementAudioSourceNode=o}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(lv,(e,t)=>e.createMediaElementSource(t.mediaElement),Xg,ev),Dy=((e,t,n,r)=>class extends e{constructor(e,i){const s=n(e);if(r(s))throw new TypeError;const o={...tg,...i},a=t(s,o);super(e,!1,a,null),this._nativeMediaStreamAudioDestinationNode=a}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(lv,(e,t)=>{const n=e.createMediaStreamDestination();return sg(n,t),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},Xg,ev),Py=((e,t,n,r)=>class extends e{constructor(e,i){const s=n(e),o=t(s,i);if(r(s))throw new TypeError;super(e,!0,o,null),this._nativeMediaStreamAudioSourceNode=o}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(lv,(e,t)=>{let{mediaStream:n}=t;const r=n.getAudioTracks();r.sort((e,t)=>e.id<t.id?-1:e.id>t.id?1:0);const i=r.slice(0,1),s=e.createMediaStreamSource(new MediaStream(i));return Object.defineProperty(s,"mediaStream",{value:n}),s},Xg,ev),My=((e,t)=>(n,r)=>{let{mediaStreamTrack:i}=r;if("function"===typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(i);const s=new MediaStream([i]),o=n.createMediaStreamSource(s);if("audio"!==i.kind)throw e();if(t(n))throw new TypeError;return o})(Xm,ev),Ly=((e,t,n)=>class extends e{constructor(e,r){const i=n(e);super(e,!0,t(i,r),null)}})(lv,My,Xg),Vy=((e,t,n,r,i,s,o,a,l)=>class extends e{constructor(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(null===l)throw new Error("Missing the native AudioContext constructor.");try{e=new l(t)}catch(o){if(12===o.code&&"sampleRate is not in range"===o.message)throw n();throw o}if(null===e)throw r();if(!dm(t.latencyHint))throw new TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw n();super(e,2);const{latencyHint:i}=t,{sampleRate:s}=e;if(this._baseLatency="number"===typeof e.baseLatency?e.baseLatency:"balanced"===i?512/s:"interactive"===i||void 0===i?256/s:"playback"===i?1024/s:128*Math.max(2,Math.min(128,Math.round(i*s/128)))/s,this._nativeAudioContext=e,"webkitAudioContext"===l.name?(this._nativeGainNode=e.createGain(),this._nativeOscillatorNode=e.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(e.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===e.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),e.removeEventListener("statechange",t)};e.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw t()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),hm(this)}))}createMediaElementSource(e){return new i(this,{mediaElement:e})}createMediaStreamDestination(){return new s(this)}createMediaStreamSource(e){return new o(this,{mediaStream:e})}createMediaStreamTrackSource(e){return new a(this,{mediaStreamTrack:e})}resume(){return"suspended"===this._state?new Promise((e,t)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?e():this.resume().then(e,t)};this._nativeAudioContext.addEventListener("statechange",n)}):this._nativeAudioContext.resume().catch(e=>{if(void 0===e||15===e.code)throw t();throw e})}suspend(){return this._nativeAudioContext.suspend().catch(e=>{if(void 0===e)throw t();throw e})}})(Oy,Xm,wg,Eg,Ry,Dy,Py,Ly,rv),jy=(e=>t=>{const n=e.get(t);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n})(iy),Fy=(e=>(t,n)=>{e(t).add(n)})(jy),Uy=(e=>function(t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=t[arguments.length>2&&void 0!==arguments[2]?arguments[2]:0];if(void 0===i)throw e();return Nm(n)?i.connect(n,0,r):i.connect(n,0)})(tm),zy=(e=>(t,n)=>{e(t).delete(n)})(jy),qy=(e=>function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return void 0===n?t.forEach(e=>e.disconnect()):"number"===typeof n?Km(e,t,n).disconnect():Nm(n)?void 0===r?t.forEach(e=>e.disconnect(n)):void 0===i?Km(e,t,r).disconnect(n,0):Km(e,t,r).disconnect(n,0,i):void 0===r?t.forEach(e=>e.disconnect(n)):Km(e,t,r).disconnect(n,0)})(tm),By=new WeakMap,$y=((e,t)=>n=>t(e,n))(By,$p),Hy=((e,t,n,r,i,s,o,a,l,c,u,h,d)=>(f,p,m,g)=>{if(0===g.numberOfInputs&&0===g.numberOfOutputs)throw l();const v=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(v.some(e=>e<1))throw l();if(v.length!==g.numberOfOutputs)throw t();if("explicit"!==g.channelCountMode)throw l();const y=g.channelCount*g.numberOfInputs,_=v.reduce((e,t)=>e+t,0),b=void 0===m.parameterDescriptors?0:m.parameterDescriptors.length;if(y+b>6||_>6)throw l();const w=new MessageChannel,x=[],T=[];for(let e=0;e<g.numberOfInputs;e+=1)x.push(o(f,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),T.push(i(f,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const k=[];if(void 0!==m.parameterDescriptors)for(const{defaultValue:e,maxValue:t,minValue:n,name:r}of m.parameterDescriptors){const i=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==g.parameterData[r]?g.parameterData[r]:void 0===e?0:e});Object.defineProperties(i.offset,{defaultValue:{get:()=>void 0===e?0:e},maxValue:{get:()=>void 0===t?sm:t},minValue:{get:()=>void 0===n?im:n}}),k.push(i)}const S=r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,y+b)}),C=ug(p,f.sampleRate),E=a(f,C,y+b,Math.max(1,_)),A=i(f,{channelCount:Math.max(1,_),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,_)}),I=[];for(let e=0;e<g.numberOfOutputs;e+=1)I.push(r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[e]}));for(let e=0;e<g.numberOfInputs;e+=1){x[e].connect(T[e]);for(let t=0;t<g.channelCount;t+=1)T[e].connect(S,t,e*g.channelCount+t)}const N=new Mm(void 0===m.parameterDescriptors?[]:m.parameterDescriptors.map((e,t)=>{let{name:n}=e;const r=k[t];return r.connect(S,0,y+t),r.start(0),[n,r.offset]}));S.connect(E);let O=g.channelInterpretation,R=null;const D=0===g.numberOfOutputs?[E]:I,P={get bufferSize(){return C},get channelCount(){return g.channelCount},set channelCount(e){throw n()},get channelCountMode(){return g.channelCountMode},set channelCountMode(e){throw n()},get channelInterpretation(){return O},set channelInterpretation(e){for(const t of x)t.channelInterpretation=e;O=e},get context(){return E.context},get inputs(){return x},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return R},set onprocessorerror(e){"function"===typeof R&&P.removeEventListener("processorerror",R),R="function"===typeof e?e:null,"function"===typeof R&&P.addEventListener("processorerror",R)},get parameters(){return N},get port(){return w.port2},addEventListener(){return E.addEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])},connect:e.bind(null,D),disconnect:c.bind(null,D),dispatchEvent(){return E.dispatchEvent(arguments.length<=0?void 0:arguments[0])},removeEventListener(){return E.removeEventListener(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2])}},M=new Map;var L,V;w.port1.addEventListener=(L=w.port1.addEventListener,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("message"===t[0]){const e="function"===typeof t[1]?t[1]:"object"===typeof t[1]&&null!==t[1]&&"function"===typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=M.get(t[1]);void 0!==n?t[1]=n:(t[1]=t=>{u(f.currentTime,f.sampleRate,()=>e(t))},M.set(e,t[1]))}}return L.call(w.port1,t[0],t[1],t[2])}),w.port1.removeEventListener=(V=w.port1.removeEventListener,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("message"===t[0]){const e=M.get(t[1]);void 0!==e&&(M.delete(t[1]),t[1]=e)}return V.call(w.port1,t[0],t[1],t[2])});let j=null;Object.defineProperty(w.port1,"onmessage",{get:()=>j,set:e=>{"function"===typeof j&&w.port1.removeEventListener("message",j),j="function"===typeof e?e:null,"function"===typeof j&&(w.port1.addEventListener("message",j),w.port1.start())}}),m.prototype.port=w.port1;let F=null;const U=((e,t,n,r)=>{let i=jp.get(e);void 0===i&&(i=new WeakMap,jp.set(e,i));const s=hg(n,r);return i.set(t,s),s})(f,P,m,g);U.then(e=>F=e);const z=Fm(g.numberOfInputs,g.channelCount),q=Fm(g.numberOfOutputs,v),B=void 0===m.parameterDescriptors?[]:m.parameterDescriptors.reduce((e,t)=>{let{name:n}=t;return{...e,[n]:new Float32Array(128)}},{});let $=!0;const H=()=>{g.numberOfOutputs>0&&E.disconnect(A);for(let e=0,t=0;e<g.numberOfOutputs;e+=1){const n=I[e];for(let r=0;r<v[e];r+=1)A.disconnect(n,t+r,r);t+=v[e]}},W=new Map;E.onaudioprocess=e=>{let{inputBuffer:t,outputBuffer:n}=e;if(null!==F){const e=h(P);for(let i=0;i<C;i+=128){for(let e=0;e<g.numberOfInputs;e+=1)for(let n=0;n<g.channelCount;n+=1)Vm(t,z[e],n,n,i);void 0!==m.parameterDescriptors&&m.parameterDescriptors.forEach((e,n)=>{let{name:r}=e;Vm(t,B,r,y+n,i)});for(let e=0;e<g.numberOfInputs;e+=1)for(let t=0;t<v[e];t+=1)0===q[e][t].byteLength&&(q[e][t]=new Float32Array(128));try{const t=z.map((t,n)=>{if(e[n].size>0)return W.set(n,C/128),t;const r=W.get(n);return void 0===r?[]:(t.every(e=>e.every(e=>0===e))&&(1===r?W.delete(n):W.set(n,r-1)),t)}),r=u(f.currentTime+i/f.sampleRate,f.sampleRate,()=>F.process(t,q,B));$=r;for(let e=0,s=0;e<g.numberOfOutputs;e+=1){for(let t=0;t<v[e];t+=1)jm(n,q[e],t,s+t,i);s+=v[e]}}catch(r){$=!1,P.dispatchEvent(new ErrorEvent("processorerror",{colno:r.colno,filename:r.filename,lineno:r.lineno,message:r.message}))}if(!$){for(let e=0;e<g.numberOfInputs;e+=1){x[e].disconnect(T[e]);for(let t=0;t<g.channelCount;t+=1)T[i].disconnect(S,t,e*g.channelCount+t)}if(void 0!==m.parameterDescriptors){const e=m.parameterDescriptors.length;for(let t=0;t<e;t+=1){const e=k[t];e.disconnect(S,0,y+t),e.stop()}}S.disconnect(E),E.onaudioprocess=null,G?H():Y();break}}}};let G=!1;const K=o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Q=()=>E.connect(K).connect(f.destination),Y=()=>{E.disconnect(K),K.disconnect()};return Q(),d(P,()=>{if($){Y(),g.numberOfOutputs>0&&E.connect(A);for(let e=0,t=0;e<g.numberOfOutputs;e+=1){const n=I[e];for(let r=0;r<v[e];r+=1)A.connect(n,t+r,r);t+=v[e]}}G=!0},()=>{$&&(Q(),H()),G=!1})})(Uy,tm,Xm,Dv,fg,Fv,gg,bg,wg,qy,Sy,$y,Ov),Wy=((e,t,n,r,i)=>(s,o,a,l,c,u)=>{if(null!==a)try{const t=new a(s,l,u),r=new Map;let o=null;if(Object.defineProperties(t,{channelCount:{get:()=>u.channelCount,set:()=>{throw e()}},channelCountMode:{get:()=>"explicit",set:()=>{throw e()}},onprocessorerror:{get:()=>o,set:e=>{"function"===typeof o&&t.removeEventListener("processorerror",o),o="function"===typeof e?e:null,"function"===typeof o&&t.addEventListener("processorerror",o)}}}),t.addEventListener=(d=t.addEventListener,function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if("processorerror"===n[0]){const e="function"===typeof n[1]?n[1]:"object"===typeof n[1]&&null!==n[1]&&"function"===typeof n[1].handleEvent?n[1].handleEvent:null;if(null!==e){const t=r.get(n[1]);void 0!==t?n[1]=t:(n[1]=t=>{"error"===t.type?(Object.defineProperties(t,{type:{value:"processorerror"}}),e(t)):e(new ErrorEvent(n[0],{...t}))},r.set(e,n[1]))}}return d.call(t,"error",n[1],n[2]),d.call(t,...n)}),t.removeEventListener=(h=t.removeEventListener,function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if("processorerror"===n[0]){const e=r.get(n[1]);void 0!==e&&(r.delete(n[1]),n[1]=e)}return h.call(t,"error",n[1],n[2]),h.call(t,n[0],n[1],n[2])}),0!==u.numberOfOutputs){const e=n(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(e).connect(s.destination);return i(t,()=>e.disconnect(),()=>e.connect(s.destination))}return t}catch(f){if(11===f.code)throw r();throw f}var h,d;if(void 0===c)throw r();return(e=>{const{port1:t}=new MessageChannel;try{t.postMessage(e)}finally{t.close()}})(u),t(s,o,c,u)})(Xm,Hy,gg,wg,Ov),Gy=((e,t,n,r,i,s,o,a,l,c,u,h,d,f,p,m)=>(g,v,y)=>{const _=new WeakMap;let b=null;return{render(w,x){a(x,w);const T=_.get(x);return void 0!==T?Promise.resolve(T):(async(a,w)=>{let x=u(a),T=null;const k=Zp(x,w),S=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(null===h){const e=S.reduce((e,t)=>e+t,0),n=i(w,{channelCount:Math.max(1,e),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,e)}),s=[];for(let t=0;t<a.numberOfOutputs;t+=1)s.push(r(w,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:S[t]}));const c=o(w,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});c.connect=t.bind(null,s),c.disconnect=l.bind(null,s),T=[n,s,c]}else k||(x=new h(w,g));if(_.set(w,null===T?x:T[2]),null!==T){if(null===b){if(void 0===y)throw new Error("Missing the processor constructor.");if(null===d)throw new Error("Missing the native OfflineAudioContext constructor.");const e=a.channelCount*a.numberOfInputs,t=void 0===y.parameterDescriptors?0:y.parameterDescriptors.length,n=e+t,l=async()=>{const l=new d(n,128*Math.ceil(a.context.length/128),w.sampleRate),c=[],u=[];for(let e=0;e<v.numberOfInputs;e+=1)c.push(o(l,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),u.push(i(l,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const h=await Promise.all(Array.from(a.parameters.values()).map(async e=>{const t=s(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:e.value});return await f(l,e,t.offset),t})),g=r(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,e+t)});for(let e=0;e<v.numberOfInputs;e+=1){c[e].connect(u[e]);for(let t=0;t<v.channelCount;t+=1)u[e].connect(g,t,e*v.channelCount+t)}for(const[t,n]of h.entries())n.connect(g,0,e+t),n.start(0);return g.connect(l.destination),await Promise.all(c.map(e=>p(a,l,e))),m(l)};b=Um(a,0===n?null:await l(),w,v,S,y,c)}const e=await b,t=n(w,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[l,u,h]=T;null!==e&&(t.buffer=e,t.start(0)),t.connect(l);for(let n=0,r=0;n<a.numberOfOutputs;n+=1){const e=u[n];for(let t=0;t<S[n];t+=1)l.connect(e,r+t,t);r+=S[n]}return h}if(k)for(const[t,n]of a.parameters.entries())await e(w,n,x.parameters.get(t));else for(const[e,t]of a.parameters.entries())await f(w,t,x.parameters.get(e));return await p(a,w,x),x})(w,x)}}})(bv,Uy,wv,Dv,fg,Fv,gg,zy,qy,Sy,km,av,Zg,xv,Qg,Zv),Ky=(e=>t=>e.get(t))(Cy),Qy=(e=>(t,n)=>{e.set(t,n)})(By),Yy=ky?((e,t,n,r,i,s,o,a,l,c,u,h,d,f)=>class extends t{constructor(t,f,p){var m;const g=a(t),v=l(g),y=u({...Lm,...p});d(y);const _=Vp.get(g),b=null===_||void 0===_?void 0:_.get(f),w=v||"closed"!==g.state?g:null!==(m=o(g))&&void 0!==m?m:g,x=i(w,v?null:t.baseLatency,c,f,b,y);super(t,!0,x,v?r(f,y,b):null);const T=[];x.parameters.forEach((e,t)=>{const r=n(this,v,e);T.push([t,r])}),this._nativeAudioWorkletNode=x,this._onprocessorerror=null,this._parameters=new Mm(T),v&&e(g,this);const{activeInputs:k}=s(this);h(x,k)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(e){const t="function"===typeof e?f(this,e):null;this._nativeAudioWorkletNode.onprocessorerror=t;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===t?e:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(Fy,lv,kv,Gy,Wy,lm,Ky,Xg,ev,av,e=>({...e,outputChannelCount:void 0!==e.outputChannelCount?e.outputChannelCount:1===e.numberOfInputs&&1===e.numberOfOutputs?[e.channelCount]:Array.from({length:e.numberOfOutputs},()=>1)}),Qy,e=>{const{port1:t,port2:n}=new MessageChannel;try{t.postMessage(e)}finally{t.close(),n.close()}},Vg):void 0,Xy=(((e,t,n,r,i)=>{})(Xm,wg,Eg,sy,rv),((e,t)=>(n,r,i)=>{if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(n,r,i)}catch(s){if("SyntaxError"===s.name)throw e();throw s}})(wg,Zg)),Jy=((e,t,n,r,i,s,o,a)=>(l,c)=>n(l).render(l,c).then(()=>Promise.all(Array.from(r(c)).map(e=>n(e).render(e,c)))).then(()=>i(c)).then(n=>("function"!==typeof n.copyFromChannel?(o(n),nm(n)):t(s,()=>s(n))||a(n),e.add(n),n)))(hv,Bg,Kg,jy,Zv,em,mv,gv),Zy=(((e,t,n,r,i)=>{})(Bg,Xm,Xy,sy,Jy),((e,t,n,r,i)=>class extends e{constructor(e,n,i){let s;if("number"===typeof e&&void 0!==n&&void 0!==i)s={length:n,numberOfChannels:e,sampleRate:i};else{if("object"!==typeof e)throw new Error("The given parameters are not valid.");s=e}const{length:o,numberOfChannels:a,sampleRate:l}={...xg,...s},c=r(a,o,l);t(ng,()=>ng(c))||c.addEventListener("statechange",(()=>{let e=0;const t=n=>{"running"===this._state&&(e>0?(c.removeEventListener("statechange",t),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):e+=1)};return t})()),super(c,a),this._length=o,this._nativeOfflineAudioContext=c,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,hm(this)}))}_waitForThePromiseToSettle(e){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(e):setTimeout(()=>this._waitForThePromiseToSettle(e))}})(Oy,Bg,Xm,Xy,Jy)),e_=((e,t)=>n=>{const r=e.get(n);return t(r)||t(n)})(Pp,iv),t_=((e,t)=>n=>e.has(n)||t(n))(Op,sv),n_=((e,t)=>n=>e.has(n)||t(n))(Dp,ov),r_=((e,t)=>n=>{const r=e.get(n);return t(r)||t(n)})(Pp,ev);function i_(e){return void 0===e}function s_(e){return void 0!==e}function o_(e){return"number"===typeof e}function a_(e){return"[object Object]"===Object.prototype.toString.call(e)&&e.constructor===Object}function l_(e){return"boolean"===typeof e}function c_(e){return Array.isArray(e)}function u_(e){return"string"===typeof e}function h_(e){return u_(e)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(e)}function d_(e,t){if(!e)throw new Error(t)}function f_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;if(!(t<=e&&e<=n))throw new RangeError(`Value must be within [${t}, ${n}], got: ${e}`)}function p_(e){e.isOffline||"running"===e.state||__('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let m_=!1,g_=!1;function v_(e){m_=e}let y_=console;function __(){y_.warn(...arguments)}const b_="object"===typeof self?self:null,w_=b_&&(b_.hasOwnProperty("AudioContext")||b_.hasOwnProperty("webkitAudioContext"));function x_(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function T_(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{l(r.next(e))}catch(t){s(t)}}function a(e){try{l(r.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}l((r=r.apply(e,t||[])).next())})}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;class k_{constructor(e,t,n,r){this._callback=e,this._type=t,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=n,this._createClock()}_createWorker(){const e=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:"text/javascript"}),t=URL.createObjectURL(e),n=new Worker(t);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(e){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){var t;this._updateInterval=Math.max(e,this._minimumUpdateInterval),"worker"===this._type&&(null===(t=this._worker)||void 0===t||t.postMessage(1e3*this._updateInterval))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function S_(e){return n_(e)}function C_(e){return t_(e)}function E_(e){return r_(e)}function A_(e){return e_(e)}function I_(e,t){return"value"===e||S_(t)||C_(t)||function(e){return e instanceof vv}(t)}function N_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;const i=n.shift();if(a_(e)&&a_(i))for(const s in i)I_(s,i[s])?e[s]=i[s]:a_(i[s])?(e[s]||Object.assign(e,{[s]:{}}),N_(e[s],i[s])):Object.assign(e,{[s]:i[s]});return N_(e,...n)}function O_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0;const i={},s=Array.from(t);if(a_(s[0])&&r&&!Reflect.has(s[0],r)){Object.keys(s[0]).some(t=>Reflect.has(e,t))||(N_(i,{[r]:s[0]}),n.splice(n.indexOf(r),1),s.shift())}if(1===s.length&&a_(s[0]))N_(i,s[0]);else for(let o=0;o<n.length;o++)s_(s[o])&&(i[n[o]]=s[o]);return N_(e,i)}function R_(e,t){return i_(e)?t:e}function D_(e,t){return t.forEach(t=>{Reflect.has(e,t)&&delete e[t]}),e}class P_{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(){if(this.debug||b_&&this.toString()===b_.TONE_DEBUG_CLASS){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];!function(){y_.log(...arguments)}(this,...t)}}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}P_.version=Ep;const M_=1e-6;function L_(e,t){return e>t+M_}function V_(e,t){return L_(e,t)||F_(e,t)}function j_(e,t){return e+M_<t}function F_(e,t){return Math.abs(e-t)<M_}function U_(e,t,n){return Math.max(Math.min(e,n),t)}class z_ extends P_{constructor(){super(),this.name="Timeline",this._timeline=[];const e=O_(z_.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(d_(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){const t=this._timeline[this.length-1];d_(V_(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){const e=this.length-this.memory;this._timeline.splice(0,e)}return this}remove(e){const t=this._timeline.indexOf(e);return-1!==t&&this._timeline.splice(t,1),this}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";const n=this._search(e,t);return-1!==n?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";const n=this._search(e,t);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const n=this._search(e);return n-1>=0?this._timeline[n-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(F_(this._timeline[t].time,e)){for(let n=t;n>=0&&F_(this._timeline[n].time,e);n--)t=n;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else 1===this._timeline.length&&V_(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"time";if(0===this._timeline.length)return-1;let n=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][t]<=e)return r-1;for(;n<i;){let r=Math.floor(n+(i-n)/2);const s=this._timeline[r],o=this._timeline[r+1];if(F_(s[t],e)){for(let n=r;n<this._timeline.length;n++){if(!F_(this._timeline[n][t],e))break;r=n}return r}if(j_(s[t],e)&&L_(o[t],e))return r;L_(s[t],e)?i=r:n=r+1}return-1}_iterate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._timeline.length-1;this._timeline.slice(t,n+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const n=this._search(e);return-1!==n&&this._iterate(t,0,n),this}forEachAfter(e,t){const n=this._search(e);return this._iterate(t,n+1),this}forEachBetween(e,t,n){let r=this._search(e),i=this._search(t);return-1!==r&&-1!==i?(this._timeline[r].time!==e&&(r+=1),this._timeline[i].time===t&&(i-=1),this._iterate(n,r,i)):-1===r&&this._iterate(n,0,i),this}forEachFrom(e,t){let n=this._search(e);for(;n>=0&&this._timeline[n].time>=e;)n--;return this._iterate(t,n+1),this}forEachAtTime(e,t){const n=this._search(e);if(-1!==n&&F_(this._timeline[n].time,e)){let r=n;for(let t=n;t>=0&&F_(this._timeline[t].time,e);t--)r=t;this._iterate(e=>{t(e)},r,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const q_=[];function B_(e){q_.push(e)}const $_=[];function H_(e){$_.push(e)}class W_ extends P_{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(e=>{i_(this._events)&&(this._events={}),this._events.hasOwnProperty(e)||(this._events[e]=[]),this._events[e].push(t)}),this}once(e,t){var n=this;const r=function(){t(...arguments),n.off(e,r)};return this.on(e,r),this}off(e,t){return e.split(/\W+/).forEach(e=>{if(i_(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if(i_(t))this._events[e]=[];else{const n=this._events[e];for(let e=n.length-1;e>=0;e--)n[e]===t&&n.splice(e,1)}}),this}emit(e){if(this._events&&this._events.hasOwnProperty(e)){const i=this._events[e].slice(0);for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(let e=0,t=i.length;e<t;e++)i[e].apply(this,n)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const n=Object.getOwnPropertyDescriptor(W_.prototype,t);Object.defineProperty(e.prototype,t,n)})}dispose(){return super.dispose(),this._events=void 0,this}}class G_ extends W_{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class K_ extends G_{constructor(){var e,t;super(),this.name="Context",this._constants=new Map,this._timeouts=new z_,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const n=O_(K_.getDefaults(),arguments,["context"]);n.context?(this._context=n.context,this._latencyHint=(null===(e=arguments[0])||void 0===e?void 0:e.latencyHint)||""):(this._context=function(e){return new Vy(e)}({latencyHint:n.latencyHint}),this._latencyHint=n.latencyHint),this._ticker=new k_(this.emit.bind(this,"tick"),n.clockSource,n.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[(null===(t=arguments[0])||void 0===t?void 0:t.hasOwnProperty("updateInterval"))?"_lookAhead":"lookAhead"]=n.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){var e;return this._initialized||(e=this,q_.forEach(t=>t(e)),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,n){return this._context.createBuffer(e,t,n)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,n){return this._context.createPeriodicWave(e,t,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){d_(A_(this._context),"Not available if OfflineAudioContext");return this._context.createMediaStreamSource(e)}createMediaElementSource(e){d_(A_(this._context),"Not available if OfflineAudioContext");return this._context.createMediaElementSource(e)}createMediaStreamDestination(){d_(A_(this._context),"Not available if OfflineAudioContext");return this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){d_(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){d_(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){d_(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){d_(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return function(e,t,n){return d_(s_(Yy),"AudioWorkletNode only works in a secure context (https or localhost)"),new(e instanceof(null===b_||void 0===b_?void 0:b_.BaseAudioContext)?null===b_||void 0===b_?void 0:b_.AudioWorkletNode:Yy)(e,t,n)}(this.rawContext,e,t)}addAudioWorkletModule(e){return T_(this,void 0,void 0,function*(){d_(s_(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(e)),yield this._workletPromise})}workletsAreReady(){return T_(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get lookAhead(){return this._lookAhead}set lookAhead(e){this._lookAhead=e,this.updateInterval=e?e/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return A_(this._context)?this._context.resume():Promise.resolve()}close(){return T_(this,void 0,void 0,function*(){var e;A_(this._context)&&"closed"!==this.state&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&(e=this,$_.forEach(t=>t(e)))})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),n=t.getChannelData(0);for(let i=0;i<n.length;i++)n[i]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=t,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this.close(),this}_timeoutLoop(){const e=this.now();this._timeouts.forEachBefore(e,e=>{e.callback(),this._timeouts.remove(e)})}setTimeout(e,t){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:n+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const n=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),r()},id:n,time:i+t})};return r(),n}}function Q_(e,t){c_(t)?t.forEach(t=>Q_(e,t)):Object.defineProperty(e,t,{enumerable:!0,writable:!1})}function Y_(e,t){c_(t)?t.forEach(t=>Y_(e,t)):Object.defineProperty(e,t,{writable:!0})}const X_=()=>{};class J_ extends P_{constructor(){super(),this.name="ToneAudioBuffer",this.onload=X_;const e=O_(J_.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=e.reverse,this.onload=e.onload,u_(e.url)?this.load(e.url).catch(e.onerror):e.url&&this.set(e.url)}static getDefaults(){return{onerror:X_,onload:X_,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:nb().sampleRate}set(e){return e instanceof J_?e.loaded?this._buffer=e.get():e.onload=()=>{this.set(e),this.onload(this)}:this._buffer=e,this._reversed&&this._reverse(),this}get(){return this._buffer}load(e){return T_(this,void 0,void 0,function*(){const t=J_.load(e).then(e=>{this.set(e),this.onload(this)});J_.downloads.push(t);try{yield t}finally{const e=J_.downloads.indexOf(t);J_.downloads.splice(e,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(e){const t=c_(e)&&e[0].length>0,n=t?e.length:1,r=t?e[0].length:e.length,i=nb(),s=i.createBuffer(n,r,i.sampleRate),o=t||1!==n?e:[e];for(let a=0;a<n;a++)s.copyToChannel(o[a],a);return this._buffer=s,this}toMono(e){if(o_(e))this.fromArray(this.toArray(e));else{let e=new Float32Array(this.length);const t=this.numberOfChannels;for(let n=0;n<t;n++){const t=this.toArray(n);for(let n=0;n<t.length;n++)e[n]+=t[n]}e=e.map(e=>e/t),this.fromArray(e)}return this}toArray(e){if(o_(e))return this.getChannelData(e);if(1===this.numberOfChannels)return this.toArray(0);{const e=[];for(let t=0;t<this.numberOfChannels;t++)e[t]=this.getChannelData(t);return e}}getChannelData(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)}slice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.duration;d_(this.loaded,"Buffer is not loaded");const n=Math.floor(e*this.sampleRate),r=Math.floor(t*this.sampleRate);d_(n<r,"The start time must be less than the end time");const i=r-n,s=nb().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let o=0;o<this.numberOfChannels;o++)s.copyToChannel(this.getChannelData(o).subarray(n,r),o);return new J_(s)}_reverse(){if(this.loaded)for(let e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(e){this._reversed!==e&&(this._reversed=e,this._reverse())}static fromArray(e){return(new J_).fromArray(e)}static fromUrl(e){return T_(this,void 0,void 0,function*(){const t=new J_;return yield t.load(e)})}static load(e){return T_(this,void 0,void 0,function*(){const t=""===J_.baseUrl||J_.baseUrl.endsWith("/")?J_.baseUrl:J_.baseUrl+"/",n=yield fetch(t+e);if(!n.ok)throw new Error(`could not load url: ${e}`);const r=yield n.arrayBuffer();return yield nb().decodeAudioData(r)})}static supportsType(e){const t=e.split("."),n=t[t.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}static loaded(){return T_(this,void 0,void 0,function*(){for(yield Promise.resolve();J_.downloads.length;)yield J_.downloads[0]})}}J_.baseUrl="",J_.downloads=[];class Z_ extends K_{constructor(){var e,t,n;super({clockSource:"offline",context:E_(arguments[0])?arguments[0]:(e=arguments[0],t=arguments[1]*arguments[2],n=arguments[2],new Zy(e,t,n)),lookAhead:0,updateInterval:E_(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=E_(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return T_(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const n=Math.floor(this.sampleRate/128);e&&t%n===0&&(yield new Promise(e=>setTimeout(e,1)))}})}render(){return T_(this,arguments,void 0,function(){var e=this;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function*(){yield e.workletsAreReady(),yield e._renderClock(t);const n=yield e._context.startRendering();return new J_(n)}()})}close(){return Promise.resolve()}}const eb=new class extends G_{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,n){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e){return T_(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}};let tb=eb;function nb(){return tb===eb&&w_&&function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&tb.dispose();tb=A_(e)?new K_(e):E_(e)?new Z_(e):e}(new K_),tb}if(b_&&!b_.TONE_SILENCE_LOGGING){let e="v";0;const t=` * Tone.js ${e}${Ep} * `;console.log(`%c${t}`,"background: #000; color: #fff")}function rb(e){return Math.pow(10,e/20)}function ib(e){return Math.log(e)/Math.LN10*20}function sb(e){return Math.pow(2,e/12)}let ob=440;function ab(e){return Math.round(lb(e))}function lb(e){return 69+12*Math.log2(e/ob)}function cb(e){return ob*Math.pow(2,(e-69)/12)}class ub extends P_{constructor(e,t,n){super(),this.defaultUnits="s",this._val=t,this._units=n,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const n=parseInt(e,10),r="."===t?1.5:1;return 1===n?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/n)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(3*Math.floor(t)))},regexp:/^(\d+)t$/i},tr:{method:(e,t,n)=>{let r=0;return e&&"0"!==e&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&"0"!==t&&(r+=this._beatsToUnits(parseFloat(t))),n&&"0"!==n&&(r+=this._beatsToUnits(parseFloat(n)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof ub&&this.fromType(this._val),i_(this._val))return this._noArg();if(u_(this._val)&&i_(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(a_(this._val)){let e=0;for(const t in this._val)if(s_(this._val[t])){const n=this._val[t];e+=new this.constructor(this.context,t).valueOf()*n}return e}if(s_(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}return u_(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class hb extends ub{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new hb(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=new this.constructor(this.context,e).valueOf(),r=this.valueOf();return r+(Math.round(r/n)*n-r)*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let i=1;i<9;i++){const e=Math.pow(2,i);t.push(e+"n."),t.push(e+"n"),t.push(e+"t")}t.push("0");let n=t[0],r=new hb(this.context,t[0]).toSeconds();return t.forEach(t=>{const i=new hb(this.context,t).toSeconds();Math.abs(i-e)<Math.abs(r-e)&&(n=t,r=i)}),n}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const n=Math.floor(t/this._getTimeSignature());let r=t%1*4;t=Math.floor(t)%this._getTimeSignature();const i=r.toString();i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3)));return[n,t,r].join(":")}toTicks(){const e=this._beatsToUnits(1);return this.valueOf()/e*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return ab(this.toFrequency())}_now(){return this.context.now()}}class db extends hb{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return ob}static set A4(e){!function(e){ob=e}(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return"midi"===this.defaultUnits?e:db.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(e,t){const n=fb[e.toLowerCase()]+12*(parseInt(t,10)+1);return"midi"===this.defaultUnits?n:db.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,n){let r=1;return e&&"0"!==e&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&"0"!==t&&(r*=this._beatsToUnits(parseFloat(t))),n&&"0"!==n&&(r*=this._beatsToUnits(parseFloat(n)/4)),r}}})}transpose(e){return new db(this.context,this.valueOf()*sb(e))}harmonize(e){return e.map(e=>this.transpose(e))}toMidi(){return ab(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/db.A4);let n=Math.round(12*t)+57;const r=Math.floor(n/12);r<0&&(n+=-12*r);return pb[n%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(60*e/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return cb(e)}static ftom(e){return ab(e)}}const fb={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},pb=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class mb extends hb{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class gb extends P_{constructor(){super();const e=O_(gb.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:nb()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return function(e){i_(e)&&m_&&!g_&&(g_=!0,__("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}(e),new hb(this.context,e).toSeconds()}toFrequency(e){return new db(this.context,e).toFrequency()}toTicks(e){return new mb(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(n=>{i_(e[n])&&delete t[n]}),t}get(){const e=this.constructor.getDefaults();return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const n=this[t];s_(n)&&s_(n.value)&&s_(n.setValueAtTime)?e[t]=n.value:n instanceof gb?e[t]=n._getPartialProperties(e[t]):c_(n)||o_(n)||u_(n)||l_(n)?e[t]=n:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&s_(this[t])&&(this[t]&&s_(this[t].value)&&s_(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof gb?this[t].set(e[t]):this[t]=e[t])}),this}}class vb extends z_{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"stopped";super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return null!==t?t.state:this._initial}setStateAtTime(e,t,n){return f_(t,0),this.add(Object.assign({},n,{state:e,time:t})),this}getLastState(e,t){for(let n=this._search(t);n>=0;n--){const t=this._timeline[n];if(t.state===e)return t}}getNextState(e,t){const n=this._search(t);if(-1!==n)for(let r=n;r<this._timeline.length;r++){const t=this._timeline[r];if(t.state===e)return t}}}class yb extends gb{constructor(){const e=O_(yb.getDefaults(),arguments,["param","units","convert"]);for(super(e),this.name="Param",this.overridden=!1,this._minOutput=1e-7,d_(s_(e.param)&&(S_(e.param)||e.param instanceof yb),"param must be an AudioParam");!S_(e.param);)e.param=e.param._param;this._swappable=!!s_(e.swappable)&&e.swappable,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new z_(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,s_(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(gb.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return s_(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return s_(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return s_(this.maxValue)&&s_(this.minValue)&&f_(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?rb(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&"decibels"===this.units?ib(e):e}setValueAtTime(e,t){const n=this.toSeconds(t),r=this._fromType(e);return d_(isFinite(r)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,n),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),n=this._events.getAfter(t),r=this._events.get(t);let i=this._initialValue;if(null===r)i=this._initialValue;else if("setTargetAtTime"!==r.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)i=r.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){let e=r.value;if("setTargetAtTime"===r.type){const t=this._events.getBefore(r.time);e=null===t?this._initialValue:t.value}i="linearRampToValueAtTime"===n.type?this._linearInterpolate(r.time,e,n.time,n.value,t):this._exponentialInterpolate(r.time,e,n.time,n.value,t)}else i=r.value;else{const e=this._events.getBefore(r.time);let n;n=null===e?this._initialValue:e.value,"setTargetAtTime"===r.type&&(i=this._exponentialApproach(r.time,n,r.value,r.constant,t))}return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),0===this._fromType(t)&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const n=this._fromType(e),r=this.toSeconds(t);return d_(isFinite(n)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(n),this._events.add({time:r,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(n,r),this}exponentialRampToValueAtTime(e,t){let n=this._fromType(e);n=F_(n,0)?this._minOutput:n,this._assertRange(n);const r=this.toSeconds(t);return d_(isFinite(n)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(n,r),this}exponentialRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(e,n+this.toSeconds(t)),this}linearRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(e,n+this.toSeconds(t)),this}targetRampTo(e,t,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(e,n,t),this}exponentialApproachValueAtTime(e,t,n){t=this.toSeconds(t),n=this.toSeconds(n);const r=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(e,t,r),this.cancelAndHoldAtTime(t+.9*n),this.linearRampToValueAtTime(e,t+n),this}setTargetAtTime(e,t,n){const r=this._fromType(e);d_(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(t);return this._assertRange(r),d_(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:n,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,i,n),this._param.setTargetAtTime(r,i,n),this}setValueCurveAtTime(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;n=this.toSeconds(n),t=this.toSeconds(t);const i=this._fromType(e[0])*r;this.setValueAtTime(this._toType(i),t);const s=n/(e.length-1);for(let o=1;o<e.length;o++){const n=this._fromType(e[o])*r;this.linearRampToValueAtTime(this._toType(n),t+o*s)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return d_(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),n=this._fromType(this.getValueAtTime(t));d_(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+n);const r=this._events.get(t),i=this._events.getAfter(t);return r&&F_(r.time,t)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),"linearRampToValueAtTime"===i.type?this.linearRampToValueAtTime(this._toType(n),t):"exponentialRampToValueAtTime"===i.type&&this.exponentialRampToValueAtTime(this._toType(n),t)),this._events.add({time:t,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,t),this}rampTo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,n=arguments.length>2?arguments[2]:void 0;return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(e,t,n):this.linearRampTo(e,t,n),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const n=this._events.get(t);if(n&&"setTargetAtTime"===n.type){const r=this._events.getAfter(n.time),i=r?r.time:t+2,s=(i-t)/10;for(let n=t;n<i;n+=s)e.linearRampToValueAtTime(this.getValueAtTime(n),n)}return this._events.forEachAfter(this.context.currentTime,t=>{"cancelScheduledValues"===t.type?e.cancelScheduledValues(t.time):"setTargetAtTime"===t.type?e.setTargetAtTime(t.value,t.time,t.constant):e[t.type](t.value,t.time)}),this}setParam(e){d_(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,n,r,i){return n+(t-n)*Math.exp(-(i-e)/r)}_linearInterpolate(e,t,n,r,i){return t+(i-e)/(n-e)*(r-t)}_exponentialInterpolate(e,t,n,r,i){return t*Math.pow(r/t,(i-e)/(n-e))}}class _b extends gb{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return s_(this.input)?S_(this.input)||this.input instanceof yb?1:this.input.numberOfInputs:0}get numberOfOutputs(){return s_(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return s_(e)&&(e instanceof _b||C_(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(t=>{t.channelCount=e.channelCount,t.channelCountMode=e.channelCountMode,t.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();d_(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e){return wb(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return __("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e){return xb(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}chain(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return bb(this,...t),this}fan(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(e=>this.connect(e)),this}dispose(){return super.dispose(),s_(this.input)&&(this.input instanceof _b?this.input.dispose():C_(this.input)&&this.input.disconnect()),s_(this.output)&&(this.output instanceof _b?this.output.dispose():C_(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function bb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.shift();t.reduce((e,t)=>(e instanceof _b?e.connect(t):C_(e)&&wb(e,t),t),r)}function wb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;for(d_(s_(e),"Cannot connect from undefined node"),d_(s_(t),"Cannot connect to undefined node"),(t instanceof _b||C_(t))&&d_(t.numberOfInputs>0,"Cannot connect to node with no inputs"),d_(e.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof _b||t instanceof yb;)s_(t.input)&&(t=t.input);for(;e instanceof _b;)s_(e.output)&&(e=e.output);S_(t)?e.connect(t,n):e.connect(t,n,r)}function xb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(s_(t))for(;t instanceof _b;)t=t.input;for(;!C_(e);)s_(e.output)&&(e=e.output);S_(t)?e.disconnect(t,n):C_(t)?e.disconnect(t,n,r):e.disconnect()}class Tb extends _b{constructor(){const e=O_(Tb.getDefaults(),arguments,["gain","units"]);super(e),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new yb({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),Q_(this,"gain")}static getDefaults(){return Object.assign(_b.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class kb extends _b{constructor(e){super(e),this.onended=X_,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Tb({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){const t=this.toSeconds(e);return-1!==this._startTime&&t>=this._startTime&&(-1===this._stopTime||t<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(_b.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:X_})}_startGain(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;d_(-1===this._startTime,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=e+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,e),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(t,e+n):this._gainNode.gain.exponentialApproachValueAtTime(t,e,n)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){d_(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.now()),t>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const e="exponential"===this._curve?2*t:0;this._stopSource(this.now()+e),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==X_&&(this.onended(this),this.onended=X_,!this.context.isOffline)){const e=()=>this.dispose();"undefined"!==typeof requestIdleCallback?requestIdleCallback(e):setTimeout(e,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),d_(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=X_,this}}class Sb extends kb{constructor(){const e=O_(Sb.getDefaults(),arguments,["offset"]);super(e),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),wb(this._source,this._gainNode),this.offset=new yb({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(kb.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Cb extends _b{constructor(){const e=O_(Cb.getDefaults(),arguments,["value","units"]);super(e),this.name="Signal",this.override=!0,this.output=this._constantSource=new Sb({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(_b.getDefaults(),{convert:!0,units:"number",value:0})}connect(e){return Eb(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,n){return this._param.exponentialRampTo(e,t,n),this}linearRampTo(e,t,n){return this._param.linearRampTo(e,t,n),this}targetRampTo(e,t,n){return this._param.targetRampTo(e,t,n),this}exponentialApproachValueAtTime(e,t,n){return this._param.exponentialApproachValueAtTime(e,t,n),this}setTargetAtTime(e,t,n){return this._param.setTargetAtTime(e,t,n),this}setValueCurveAtTime(e,t,n,r){return this._param.setValueCurveAtTime(e,t,n,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,n){return this._param.rampTo(e,t,n),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function Eb(e,t,n,r){(t instanceof yb||S_(t)||t instanceof Cb&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof Cb&&(t.overridden=!0)),wb(e,t,n,r)}class Ab extends yb{constructor(){const e=O_(Ab.getDefaults(),arguments,["value"]);super(e),this.name="TickParam",this._events=new z_(1/0),this._multiplier=1,this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(yb.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,n){t=this.toSeconds(t),this.setRampPoint(t);const r=this._fromType(e),i=this._events.get(t),s=Math.round(Math.max(1/n,1));for(let o=0;o<=s;o++){const e=n*o+t,s=this._exponentialApproach(i.time,i.value,r,n,e);this.linearRampToValueAtTime(this._toType(s),e)}return this}setValueAtTime(e,t){const n=this.toSeconds(t);super.setValueAtTime(e,t);const r=this._events.get(n),i=this._events.previousEvent(r),s=this._getTicksUntilEvent(i,n);return r.ticks=Math.max(s,0),this}linearRampToValueAtTime(e,t){const n=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const r=this._events.get(n),i=this._events.previousEvent(r),s=this._getTicksUntilEvent(i,n);return r.ticks=Math.max(s,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const n=this._fromType(e),r=this._events.get(t),i=Math.round(Math.max(10*(t-r.time),1)),s=(t-r.time)/i;for(let o=0;o<=i;o++){const e=s*o+r.time,i=this._exponentialInterpolate(r.time,r.value,t,n,e);this.linearRampToValueAtTime(this._toType(i),e)}return this}_getTicksUntilEvent(e,t){if(null===e)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(i_(e.ticks)){const t=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(t,e.time)}const n=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(t));const i=this._events.get(t);return i&&i.time===t&&"setValueAtTime"===i.type&&(r=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(n+r)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),n=this._events.get(t);return Math.max(this._getTicksUntilEvent(n,t),0)}getDurationOfTicks(e,t){const n=this.toSeconds(t),r=this.getTicksAtTime(t);return this.getTimeOfTick(r+e)-n}getTimeOfTick(e){const t=this._events.get(e,"ticks"),n=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&n&&"linearRampToValueAtTime"===n.type&&t.value!==n.value){const r=this._fromType(this.getValueAtTime(t.time)),i=(this._fromType(this.getValueAtTime(n.time))-r)/(n.time-t.time),s=Math.sqrt(Math.pow(r,2)-2*i*(t.ticks-e)),o=(-r+s)/i;return(o>0?o:(-r-s)/i)+t.time}return t?0===t.value?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const n=this.toSeconds(t),r=this.toSeconds(e),i=this.getTicksAtTime(n);return this.getTicksAtTime(n+r)-i}_fromType(e){return"bpm"===this.units&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return"bpm"===this.units&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class Ib extends Cb{constructor(){const e=O_(Ib.getDefaults(),arguments,["value"]);super(e),this.name="TickSignal",this.input=this._param=new Ab({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(Cb.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Nb extends gb{constructor(){const e=O_(Nb.getDefaults(),arguments,["frequency"]);super(e),this.name="TickSource",this._state=new vb,this._tickOffset=new z_,this._ticksAtTime=new z_,this._secondsAtTime=new z_,this.frequency=new Ib({context:this.context,units:e.units,value:e.frequency}),Q_(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},gb.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const n=this.toSeconds(e);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),s_(t)&&this.setTicksAtTime(t,n),this._ticksAtTime.cancel(n),this._secondsAtTime.cancel(n)),this}stop(e){const t=this.toSeconds(e);if("stopped"===this._state.getValueAtTime(t)){const e=this._state.get(t);e&&e.time>0&&(this._tickOffset.cancel(e.time),this._state.cancel(e.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}pause(e){const t=this.toSeconds(e);return"started"===this._state.getValueAtTime(t)&&(this._state.setStateAtTime("paused",t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t)),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),n=this._state.getLastState("stopped",t),r=this._ticksAtTime.get(t),i={state:"paused",time:t};this._state.add(i);let s=r||n,o=r?r.ticks:0,a=null;return this._state.forEachBetween(s.time,t+this.sampleTime,e=>{let t=s.time;const n=this._tickOffset.get(e.time);n&&n.time>=s.time&&(o=n.ticks,t=n.time),"started"===s.state&&"started"!==e.state&&(o+=this.frequency.getTicksAtTime(e.time)-this.frequency.getTicksAtTime(t),e.time!==i.time&&(a={state:e.state,time:e.time,ticks:o})),s=e}),this._state.remove(i),a&&this._ticksAtTime.add(a),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),n=this.frequency.timeToTicks(e,t);this.setTicksAtTime(n,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),n={state:"paused",time:e};this._state.add(n);const r=this._secondsAtTime.get(e);let i=r||t,s=r?r.seconds:0,o=null;return this._state.forEachBetween(i.time,e+this.sampleTime,e=>{let t=i.time;const r=this._tickOffset.get(e.time);r&&r.time>=i.time&&(s=r.seconds,t=r.time),"started"===i.state&&"started"!==e.state&&(s+=e.time-t,e.time!==n.time&&(o={state:e.state,time:e.time,seconds:s})),i=e}),this._state.remove(n),o&&this._secondsAtTime.add(o),s}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.now();const n=this._tickOffset.get(t),r=this._state.get(t),i=Math.max(n.time,r.time),s=this.frequency.getTicksAtTime(i)+e-n.ticks;return this.frequency.getTimeOfTick(s)}forEachTickBetween(e,t,n){let r=this._state.get(e);this._state.forEachBetween(e,t,t=>{r&&"started"===r.state&&"started"!==t.state&&this.forEachTickBetween(Math.max(r.time,e),t.time-this.sampleTime,n),r=t});let i=null;if(r&&"started"===r.state){const o=Math.max(r.time,e),a=this.frequency.getTicksAtTime(o),l=a-this.frequency.getTicksAtTime(r.time);let c=Math.ceil(l)-l;c=F_(c,1)?0:c;let u=this.frequency.getTimeOfTick(a+c);for(;u<t;){try{n(u,Math.round(this.getTicksAtTime(u)))}catch(s){i=s;break}u+=this.frequency.getDurationOfTicks(1,u)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Ob extends gb{constructor(){const e=O_(Ob.getDefaults(),arguments,["callback","frequency"]);super(e),this.name="Clock",this.callback=X_,this._lastUpdate=0,this._state=new vb("stopped"),this._boundLoop=this._loop.bind(this),this.callback=e.callback,this._tickSource=new Nb({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Q_(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(gb.getDefaults(),{callback:X_,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){p_(this.context);const n=this.toSeconds(e);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,t),n<this._lastUpdate&&this.emit("start",n,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return"started"===this._state.getValueAtTime(t)&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.now();return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const n=this.toSeconds(t),r=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(r+e,n)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,e=>{switch(e.state){case"started":const t=this._tickSource.getTicksAtTime(e.time);this.emit("start",e.time,t);break;case"stopped":0!==e.time&&this.emit("stop",e.time);break;case"paused":this.emit("pause",e.time)}}),this._tickSource.forEachTickBetween(e,t,(e,t)=>{this.callback(e,t)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}W_.mixin(Ob);class Rb extends _b{constructor(){const e=O_(Rb.getDefaults(),arguments,["volume"]);super(e),this.name="Volume",this.input=this.output=new Tb({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,Q_(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(_b.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Db extends _b{constructor(){const e=O_(Db.getDefaults(),arguments);super(e),this.name="Destination",this.input=new Rb({context:this.context}),this.output=new Tb({context:this.context}),this.volume=this.input.volume,bb(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(_b.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(){this.input.disconnect();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift(this.input),t.push(this.output),bb(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}B_(e=>{e.destination=new Db({context:e})}),H_(e=>{e.destination.dispose()});class Pb extends _b{constructor(){super(...arguments),this.name="Listener",this.positionX=new yb({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new yb({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new yb({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new yb({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new yb({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new yb({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new yb({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new yb({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new yb({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(_b.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}B_(e=>{e.listener=new Pb({context:e})}),H_(e=>{e.listener.dispose()});class Mb extends P_{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=O_(Mb.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;const n=e.urls[t];this.add(t,n,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:X_,onload:X_,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return d_(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,0===this._loadingCount&&e&&e()}get loaded(){return Array.from(this._buffers).every(e=>{let[t,n]=e;return n.loaded})}add(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:X_,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:X_;return u_(t)?(this.baseUrl&&"data:audio/"===t.trim().substring(0,11).toLowerCase()&&(this.baseUrl=""),this._buffers.set(e.toString(),new J_(this.baseUrl+t,n,r))):this._buffers.set(e.toString(),new J_(t,n,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class Lb extends db{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return ab(super._frequencyToUnits(e))}_ticksToUnits(e){return ab(super._ticksToUnits(e))}_beatsToUnits(e){return ab(super._beatsToUnits(e))}_secondsToUnits(e){return ab(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return cb(this.toMidi())}transpose(e){return new Lb(this.context,this.toMidi()+e)}}class Vb extends mb{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class jb extends gb{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new z_,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;this._events.forEachBefore(e+this.anticipation,t=>{e-t.time<=this.expiration&&t.callback(),this._events.remove(t)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}B_(e=>{e.draw=new jb({context:e})}),H_(e=>{e.draw.dispose()});class Fb extends P_{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){d_(s_(e.time),"Events must have a time property"),d_(s_(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new Ub(e.time,e.time+e.duration,e);for(null===this._root?this._root=t:this._root.insert(t),this._length++;null!==t;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(null!==this._root){const t=[];this._root.search(e.time,t);for(const n of t)if(n.event===e){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,e=>this.remove(e)),this}_setRoot(e){this._root=e,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(e,t){null!==e.parent?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(null===e.left&&null===e.right)this._replaceNodeInParent(e,null);else if(null===e.right)this._replaceNodeInParent(e,e.left);else if(null===e.left)this._replaceNodeInParent(e,e.right);else{let t,n=null;if(e.getBalance()>0)if(null===e.left.right)t=e.left,t.right=e.right,n=t;else{for(t=e.left.right;null!==t.right;)t=t.right;t.parent&&(t.parent.right=t.left,n=t.parent,t.left=e.left,t.right=e.right)}else if(null===e.right.left)t=e.right,t.left=e.left,n=t;else{for(t=e.right.left;null!==t.left;)t=t.left;t.parent&&(t.parent.left=t.right,n=t.parent,t.left=e.left,t.right=e.right)}null!==e.parent?e.isLeftChild()?e.parent.left=t:e.parent.right=t:this._setRoot(t),n&&this._rebalance(n)}e.dispose()}_rotateLeft(e){const t=e.parent,n=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),null!==t?n?t.left=r:t.right=r:this._setRoot(r)}_rotateRight(e){const t=e.parent,n=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),null!==t?n?t.left=r:t.right=r:this._setRoot(r)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(null!==this._root){const t=[];if(this._root.search(e,t),t.length>0){let e=t[0];for(let n=1;n<t.length;n++)t[n].low>e.low&&(e=t[n]);return e.event}}return null}forEach(e){if(null!==this._root){const t=[];this._root.traverse(e=>t.push(e)),t.forEach(t=>{t.event&&e(t.event)})}return this}forEachAtTime(e,t){if(null!==this._root){const n=[];this._root.search(e,n),n.forEach(e=>{e.event&&t(e.event)})}return this}forEachFrom(e,t){if(null!==this._root){const n=[];this._root.searchAfter(e,n),n.forEach(e=>{e.event&&t(e.event)})}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class Ub{constructor(e,t,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?null===this.left?this.left=e:this.left.insert(e):null===this.right?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(null!==this.left&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),this.low>e||null!==this.right&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),null!==this.left&&this.left.searchAfter(e,t)),null!==this.right&&this.right.searchAfter(e,t)}traverse(e){e(this),null!==this.left&&this.left.traverse(e),null!==this.right&&this.right.traverse(e)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return null!==this.left&&null!==this.right?e=this.left.height-this.right.height:null!==this.left?e=this.left.height+1:null!==this.right&&(e=-(this.right.height+1)),e}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,null!==e&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,null!==e&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class zb extends P_{constructor(e){super(),this.name="TimelineValue",this._timeline=new z_({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}class qb extends _b{constructor(){super(O_(qb.getDefaults(),arguments,["context"]))}connect(e){return Eb(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}}class Bb extends qb{constructor(){const e=O_(Bb.getDefaults(),arguments,["mapping","length"]);super(e),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,c_(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):"function"===typeof e.mapping&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(Cb.getDefaults(),{length:1024})}setMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=new Float32Array(t);for(let r=0,i=t;r<i;r++){const t=r/(i-1)*2-1;n[r]=e(t,r)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){d_(["none","2x","4x"].some(t=>t.includes(e)),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class $b extends qb{constructor(){const e=O_($b.getDefaults(),arguments,["value"]);super(e),this.name="Pow",this._exponentScaler=this.input=this.output=new Bb({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(qb.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Hb{constructor(e,t){this.id=Hb._eventId++,this._remainderTime=0;const n=Object.assign(Hb.getDefaults(),t);this.transport=e,this.callback=n.callback,this._once=n.once,this.time=Math.floor(n.time),this._remainderTime=n.time-this.time}static getDefaults(){return{callback:X_,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(e){if(this.callback){const t=this.transport.bpm.getDurationOfTicks(1,e);this.callback(e+this._remainderTime*t),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Hb._eventId=0;class Wb extends Hb{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(Wb.getDefaults(),t);this.duration=n.duration,this._interval=n.interval,this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Hb.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvent(){return j_(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Vb(this.context,this._nextTick).toSeconds()):-1}_createEvents(e){j_(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Vb(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const t=this.transport.getTicksAtTime(e);L_(t,this.time)&&(this._nextTick=this.floatTime+Math.ceil((t-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class Gb extends gb{constructor(){const e=O_(Gb.getDefaults(),arguments);super(e),this.name="Transport",this._loop=new zb(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new z_,this._repeatedEvents=new Fb,this._syncedSignals=[],this._swingAmount=0,this._ppq=e.ppq,this._clock=new Ob({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),Q_(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(gb.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(2*this._swingTicks)!==0){const n=t%(2*this._swingTicks)/(2*this._swingTicks),r=Math.sin(n*Math.PI)*this._swingAmount;e+=new Vb(this.context,2*this._swingTicks/3).toSeconds()*r}v_(!0),this._timeline.forEachAtTime(t,t=>t.invoke(e)),v_(!1)}schedule(e,t){const n=new Hb(this,{callback:e,time:new mb(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const i=new Wb(this,{callback:e,duration:new hb(this.context,r).toTicks(),interval:new hb(this.context,t).toTicks(),time:new mb(this.context,n).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,t){const n=new Hb(this,{callback:e,once:!0,time:new mb(this.context,t).toTicks()});return this._addEvent(n,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=this.toTicks(e);return this._timeline.forEachFrom(t,e=>this.clear(e.id)),this._repeatedEvents.forEachFrom(t,e=>this.clear(e.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new Vb(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){let n;return this.context.resume(),s_(t)&&(n=this.toTicks(t)),this._clock.start(e,n),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),"started"!==this._clock.getStateAtTime(e)?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){c_(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new hb(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new hb(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Vb(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new Vb(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),n=this._clock.frequency.timeToTicks(e,t);this.ticks=n}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if("started"===this.state){const n=this._clock.getTicksAtTime(t),r=t+this._clock.frequency.getDurationOfTicks(Math.ceil(n)-n,t);this.emit("stop",r),this._clock.setTicksAtTime(e,r),this.emit("start",r,this._clock.getSecondsAtTime(r))}else this.emit("ticks",t),this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return this._clock.getTicksAtTime(e)}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),"started"!==this.state)return 0;{const t=this.now(),n=e-this.getTicksAtTime(t)%e;return this._clock.nextTickTime(n,t)}}syncSignal(e,t){const n=this.now();let r=this.bpm,i=1/(60/r.getValueAtTime(n)/this.PPQ),s=[];if("time"===e.units){const e=1/64/i,t=new Tb(e),n=new $b(-1),o=new Tb(e);r.chain(t,n,o),r=o,i=1/i,s=[t,n,o]}t||(t=0!==e.getValueAtTime(n)?e.getValueAtTime(n)/i:0);const o=new Tb(t);return r.connect(o),o.connect(e._param),s.push(o),this._syncedSignals.push({initial:e.value,nodes:s,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const n=this._syncedSignals[t];n.signal===e&&(n.nodes.forEach(e=>e.dispose()),n.signal.value=n.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Y_(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}W_.mixin(Gb),B_(e=>{e.transport=new Gb({context:e})}),H_(e=>{e.transport.dispose()});class Kb extends _b{constructor(e){super(e),this.input=void 0,this._state=new vb("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=X_,this._syncedStop=X_,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Rb({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,Q_(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(_b.getDefaults(),{mute:!1,onstop:X_,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,n){let r=i_(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),this._synced||"started"!==this._state.getValueAtTime(r))if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const e=this._state.get(r);e&&(e.offset=this.toSeconds(R_(t,0)),e.duration=n?this.toSeconds(n):void 0);const i=this.context.transport.schedule(e=>{this._start(e,t,n)},r);this._scheduled.push(i),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else p_(this.context),this._start(r,t,n);else d_(L_(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,t,n);return this}stop(e){let t=i_(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),"started"===this._state.getValueAtTime(t)||s_(this._state.getNextState("started",t))){if(this.log("stop",t),this._synced){const e=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(e)}else this._stop(t);this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,n){return e=this.toSeconds(e),"started"===this._state.getValueAtTime(e)&&(this._state.cancel(e),this._restart(e,t,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(L_(t,0)){const n=this._state.get(t);if(n&&"started"===n.state&&n.time!==t){const r=t-this.toSeconds(n.time);let i;n.duration&&(i=this.toSeconds(n.duration)-r),this._start(e,this.toSeconds(n.offset)+r,i)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));"started"===this._state.getValueAtTime(t)&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=X_,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Qb extends kb{constructor(){const e=O_(Qb.getDefaults(),arguments,["url","onload"]);super(e),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,wb(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new yb({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new J_(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(kb.getDefaults(),{url:new J_,loop:!1,loopEnd:0,loopStart:0,onload:X_,onerror:X_,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;d_(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,r),t=this.loop?R_(t,this.loopStart):R_(t,0);let s=Math.max(this.toSeconds(t),0);if(this.loop){const e=this.toSeconds(this.loopEnd)||this.buffer.duration,t=this.toSeconds(this.loopStart),n=e-t;V_(s,e)&&(s=(s-t)%n+t),F_(s,this.buffer.duration)&&(s=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,j_(s,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,s)),s_(n)){let e=this.toSeconds(n);e=Math.max(e,0),this.stop(i+e)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function Yb(e,t){return T_(this,void 0,void 0,function*(){const n=t/e.context.sampleRate,r=new Z_(1,n,e.context.sampleRate);new e.constructor(Object.assign(e.get(),{frequency:2/n,detune:0,context:r})).toDestination().start(0);return(yield r.render()).getChannelData(0)})}class Xb extends kb{constructor(){const e=O_(Xb.getDefaults(),arguments,["frequency","type"]);super(e),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],wb(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new yb({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new yb({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),Q_(this,["frequency","detune"])}static getDefaults(){return Object.assign(kb.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Jb extends Kb{constructor(){const e=O_(Jb.getDefaults(),arguments,["frequency","type"]);super(e),this.name="Oscillator",this._oscillator=null,this.frequency=new Cb({context:this.context,units:"frequency",value:e.frequency}),Q_(this,"frequency"),this.detune=new Cb({context:this.context,units:"cents",value:e.detune}),Q_(this,"detune"),this._partials=e.partials,this._partialCount=e.partialCount,this._type=e.type,e.partialCount&&"custom"!==e.type&&(this._type=this.baseType+e.partialCount.toString()),this.phase=e.phase}static getDefaults(){return Object.assign(Kb.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(e){const t=this.toSeconds(e),n=new Xb({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(t)}_stop(e){const t=this.toSeconds(e);this._oscillator&&this._oscillator.stop(t)}_restart(e){const t=this.toSeconds(e);return this.log("restart",t),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(t),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type){return Jb._periodicWaveCache.find(e=>{return e.phase===this._phase&&(t=e.partials,n=this._partials,t.length===n.length&&t.every((e,t)=>n[t]===e));var t,n})}{const e=Jb._periodicWaveCache.find(e=>e.type===this._type&&e.phase===this._phase);return this._partialCount=e?e.partialCount:this._partialCount,e}}get type(){return this._type}set type(e){this._type=e;const t=-1!==["sine","square","sawtooth","triangle"].indexOf(e);if(0===this._phase&&t)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=e);else{const t=this._getCachedPeriodicWave();if(s_(t)){const{partials:e,wave:n}=t;this._wave=n,this._partials=e,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[t,n]=this._getRealImaginary(e,this._phase),r=this.context.createPeriodicWave(t,n);this._wave=r,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),Jb._periodicWaveCache.push({imag:n,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:t,type:this._type,wave:this._wave}),Jb._periodicWaveCache.length>100&&Jb._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(e){this.partialCount&&"custom"!==this._type&&"custom"!==e?this.type=e+this.partialCount:this.type=e}get partialCount(){return this._partialCount}set partialCount(e){f_(e,0);let t=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(t=n[1]),"custom"!==this._type)this.type=0===e?t:t+e.toString();else{const t=new Float32Array(e);this._partials.forEach((e,n)=>t[n]=e),this._partials=Array.from(t),this.type=this._type}}_getRealImaginary(e,t){let n=2048;const r=new Float32Array(n),i=new Float32Array(n);let s=1;if("custom"===e){if(s=this._partials.length+1,this._partialCount=this._partials.length,n=s,0===this._partials.length)return[r,i]}else{const t=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(e);t?(s=parseInt(t[2],10)+1,this._partialCount=parseInt(t[2],10),e=t[1],s=Math.max(s,2),n=s):this._partialCount=0,this._partials=[]}for(let o=1;o<n;++o){const n=2/(o*Math.PI);let a;switch(e){case"sine":a=o<=s?1:0,this._partials[o-1]=a;break;case"square":a=1&o?2*n:0,this._partials[o-1]=a;break;case"sawtooth":a=n*(1&o?1:-1),this._partials[o-1]=a;break;case"triangle":a=1&o?n*n*2*(o-1>>1&1?-1:1):0,this._partials[o-1]=a;break;case"custom":a=this._partials[o-1];break;default:throw new TypeError("Oscillator: invalid type: "+e)}0!==a?(r[o]=-a*Math.sin(t*o),i[o]=a*Math.cos(t*o)):(r[o]=0,i[o]=0)}return[r,i]}_inverseFFT(e,t,n){let r=0;const i=e.length;for(let s=0;s<i;s++)r+=e[s]*Math.cos(s*n)+t[s]*Math.sin(s*n);return r}getInitialValue(){const[e,t]=this._getRealImaginary(this._type,0);let n=0;const r=2*Math.PI;for(let i=0;i<32;i++)n=Math.max(this._inverseFFT(e,t,i/32*r),n);return U_(-this._inverseFFT(e,t,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(e){this._phase=e*Math.PI/180,this.type=this._type}asArray(){return T_(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return Yb(e,t)}()})}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Jb._periodicWaveCache=[];class Zb extends qb{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Bb({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class ew extends Cb{constructor(){const e=O_(ew.getDefaults(),arguments,["value"]);super(e),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Tb({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Cb.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class tw extends Kb{constructor(){const e=O_(tw.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="AMOscillator",this._modulationScale=new Zb({context:this.context}),this._modulationNode=new Tb({context:this.context}),this._carrier=new Jb({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Jb({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new ew({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Q_(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Jb.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return T_(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return Yb(e,t)}()})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class nw extends Kb{constructor(){const e=O_(nw.getDefaults(),arguments,["frequency","type","modulationType"]);super(e),this.name="FMOscillator",this._modulationNode=new Tb({context:this.context,gain:0}),this._carrier=new Jb({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new Cb({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new Jb({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new ew({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new ew({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Q_(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Jb.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(){return T_(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return Yb(e,t)}()})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class rw extends Kb{constructor(){const e=O_(rw.getDefaults(),arguments,["frequency","width"]);super(e),this.name="PulseOscillator",this._widthGate=new Tb({context:this.context,gain:0}),this._thresh=new Bb({context:this.context,mapping:e=>e<=0?-1:1}),this.width=new Cb({context:this.context,units:"audioRange",value:e.width}),this._triangle=new Jb({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Q_(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Kb.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(){return T_(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return Yb(e,t)}()})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class iw extends Kb{constructor(){const e=O_(iw.getDefaults(),arguments,["frequency","type","spread"]);super(e),this.name="FatOscillator",this._oscillators=[],this.frequency=new Cb({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Cb({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,Q_(this,["frequency","detune"])}static getDefaults(){return Object.assign(Jb.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,n=e/(this._oscillators.length-1);this._forEach((e,r)=>e.detune.value=t+n*r)}}get count(){return this._oscillators.length}set count(e){if(f_(e,1),this._oscillators.length!==e){this._forEach(e=>e.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const n=new Jb({context:this.context,volume:-6-1.1*e,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:0===t?()=>this.onstop(this):X_});"custom"===this.type&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[t]=n}this.spread=this._spread,"started"===this.state&&this._forEach(e=>e.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((e,t)=>e.phase=this._phase+t/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(){return T_(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return Yb(e,t)}()})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class sw extends Kb{constructor(){const e=O_(sw.getDefaults(),arguments,["frequency","modulationFrequency"]);super(e),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new ew({context:this.context,value:2}),this._pulse=new rw({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Jb({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Q_(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Kb.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(){return T_(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return Yb(e,t)}()})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const ow={am:tw,fat:iw,fm:nw,oscillator:Jb,pulse:rw,pwm:sw};class aw extends Kb{constructor(){const e=O_(aw.getDefaults(),arguments,["frequency","type"]);super(e),this.name="OmniOscillator",this.frequency=new Cb({context:this.context,units:"frequency",value:e.frequency}),this.detune=new Cb({context:this.context,units:"cents",value:e.detune}),Q_(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(Jb.getDefaults(),nw.getDefaults(),tw.getDefaults(),iw.getDefaults(),rw.getDefaults(),sw.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(e=>this._sourceType===e)&&(e=this._sourceType),e+this._oscillator.type}set type(e){"fm"===e.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):"am"===e.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):"fat"===e.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):"pwm"===e?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===e?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=ow[e],n=this.now();if(this._oscillator){const e=this._oscillator;e.stop(n),this.context.setTimeout(()=>e.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(t=this._oscillator.type),"fm"===e?this.type="fm"+t:"am"===e?this.type="am"+t:"fat"===e?this.type="fat"+t:"oscillator"===e?this.type=t:"pulse"===e?this.type="pulse":"pwm"===e&&(this.type="pwm")}_getOscType(e,t){return e instanceof ow[t]}get baseType(){return this._oscillator.baseType}set baseType(e){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===e||"pwm"===e||(this._oscillator.baseType=e)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(e){this._getOscType(this._oscillator,"fat")&&o_(e)&&(this._oscillator.count=e)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(e){this._getOscType(this._oscillator,"fat")&&o_(e)&&(this._oscillator.spread=e)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&u_(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(){return T_(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){return Yb(e,t)}()})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}function lw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;const n=new WeakMap;return function(r,i){Reflect.defineProperty(r,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(r){f_(r,e,t),n.set(this,r)}})}}function cw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;const n=new WeakMap;return function(r,i){Reflect.defineProperty(r,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(r){f_(this.toSeconds(r),e,t),n.set(this,r)}})}}class uw extends Kb{constructor(){const e=O_(uw.getDefaults(),arguments,["url","onload"]);super(e),this.name="Player",this._activeSources=new Set,this._buffer=new J_({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(Kb.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:X_,onerror:X_,playbackRate:1,reverse:!1})}load(e){return T_(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:X_)(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,n){return super.start(e,t,n),this}_start(e,t,n){t=this._loop?R_(t,this._loopStart):R_(t,0);const r=this.toSeconds(t),i=n;n=R_(n,Math.max(this._buffer.duration-r,0));let s=this.toSeconds(n);s/=this._playbackRate,e=this.toSeconds(e);const o=new Qb({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(e+s),this._state.setStateAtTime("stopped",e+s,{implicitEnd:!0})),this._activeSources.add(o),this._loop&&i_(i)?o.start(e,r):o.start(e,r,s-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(e=>e.stop(t))}restart(e,t,n){return super.restart(e,t,n),this}_restart(e,t,n){var r;null===(r=[...this._activeSources].pop())||void 0===r||r.stop(e),this._start(e,t,n)}seek(e,t){const n=this.toSeconds(t);if("started"===this._state.getValueAtTime(n)){const t=this.toSeconds(e);this._stop(n),this._start(n,t)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&f_(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&f_(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),n=this._state.getNextState("stopped",t);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach(e=>e.cancelStop())),this._activeSources.forEach(n=>{n.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}x_([cw(0)],uw.prototype,"fadeIn",void 0),x_([cw(0)],uw.prototype,"fadeOut",void 0);class hw extends _b{constructor(){const e=O_(hw.getDefaults(),arguments,["attack","decay","sustain","release"]);super(e),this.name="Envelope",this._sig=new Cb({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(_b.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(u_(e))return e;{let n;for(n in dw)if(dw[n][t]===e)return n;return e}}_setCurve(e,t,n){if(u_(n)&&Reflect.has(dw,n)){const r=dw[n];a_(r)?"_decayCurve"!==e&&(this[e]=r[t]):this[e]=r}else{if(!c_(n)||"_decayCurve"===e)throw new Error("Envelope: invalid curve: "+n);this[e]=n}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(e){this._setCurve("_decayCurve","Out",e)}triggerAttack(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.log("triggerAttack",e,t),e=this.toSeconds(e);let n=this.toSeconds(this.attack);const r=this.toSeconds(this.decay),i=this.getValueAtTime(e);if(i>0){n=(1-i)/(1/n)}if(n<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if("linear"===this._attackCurve)this._sig.linearRampTo(t,n,e);else if("exponential"===this._attackCurve)this._sig.targetRampTo(t,n,e);else{this._sig.cancelAndHoldAtTime(e);let r=this._attackCurve;for(let e=1;e<r.length;e++)if(r[e-1]<=i&&i<=r[e]){r=this._attackCurve.slice(e),r[0]=i;break}this._sig.setValueCurveAtTime(r,e,n,t)}if(r&&this.sustain<1){const i=t*this.sustain,s=e+n;this.log("decay",s),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(i,r+s):this._sig.exponentialApproachValueAtTime(i,s,r)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,e):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,e):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,e):(d_(c_(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,n,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t=this.toSeconds(t),this.triggerAttack(t,n),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e){return Eb(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0),this}asArray(){return T_(this,arguments,void 0,function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1024;return function*(){const n=t/e.context.sampleRate,r=new Z_(1,n,e.context.sampleRate),i=e.toSeconds(e.attack)+e.toSeconds(e.decay),s=i+e.toSeconds(e.release),o=.1*s,a=s+o,l=new e.constructor(Object.assign(e.get(),{attack:n*e.toSeconds(e.attack)/a,decay:n*e.toSeconds(e.decay)/a,release:n*e.toSeconds(e.release)/a,context:r}));l._sig.toDestination(),l.triggerAttackRelease(n*(i+o)/a,0);return(yield r.render()).getChannelData(0)}()})}dispose(){return super.dispose(),this._sig.dispose(),this}}x_([cw(0)],hw.prototype,"attack",void 0),x_([cw(0)],hw.prototype,"decay",void 0),x_([lw(0,1)],hw.prototype,"sustain",void 0),x_([cw(0)],hw.prototype,"release",void 0);const dw=(()=>{const e=128;let t,n;const r=[];for(t=0;t<e;t++)r[t]=Math.sin(t/127*(Math.PI/2));const i=[];for(t=0;t<127;t++){n=t/127;const e=Math.sin(n*(2*Math.PI)*6.4-Math.PI/2)+1;i[t]=e/10+.83*n}i[127]=1;const s=[];for(t=0;t<e;t++)s[t]=Math.ceil(t/127*5)/5;const o=[];for(t=0;t<e;t++)n=t/127,o[t]=.5*(1-Math.cos(Math.PI*n));const a=[];for(t=0;t<e;t++){n=t/127;const e=4*Math.pow(n,3)+.2,r=Math.cos(e*Math.PI*2*n);a[t]=Math.abs(r*(1-n))}function l(e){const t=new Array(e.length);for(let n=0;n<e.length;n++)t[n]=1-e[n];return t}return{bounce:{In:l(a),Out:a},cosine:{In:r,Out:(c=r,c.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:i,Out:l(i)},sine:{In:o,Out:l(o)},step:{In:s,Out:l(s)}};var c})();class fw extends _b{constructor(){const e=O_(fw.getDefaults(),arguments);super(e),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=e=>this._original_triggerRelease(e),this._volume=this.output=new Rb({context:this.context,volume:e.volume}),this.volume=this._volume.volume,Q_(this,"volume")}static getDefaults(){return Object.assign(_b.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){var n=this;const r=this["_original_"+e]=this[e];this[e]=function(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];const o=i[t],a=n.context.transport.schedule(e=>{i[t]=e,r.apply(n,i)},o);n._scheduledEvents.push(a)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(e,t,n,r){const i=this.toSeconds(n),s=this.toSeconds(t);return this.triggerAttack(e,i,r),this.triggerRelease(i+s),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class pw extends fw{constructor(){const e=O_(pw.getDefaults(),arguments);super(e),this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(fw.getDefaults(),{detune:0,onsilence:X_,portamento:0})}triggerAttack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.log("triggerAttack",e,t,n);const r=this.toSeconds(t);return this._triggerEnvelopeAttack(r,n),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const n=this.toSeconds(t),r=e instanceof db?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const e=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,e,n)}else this.frequency.setValueAtTime(r,n);return this}}x_([cw(0)],pw.prototype,"portamento",void 0);class mw extends hw{constructor(){super(O_(mw.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Tb({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class gw extends pw{constructor(){const e=O_(gw.getDefaults(),arguments);super(e),this.name="Synth",this.oscillator=new aw(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new mw(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),Q_(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(pw.getDefaults(),{envelope:Object.assign(D_(hw.getDefaults(),Object.keys(_b.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(D_(aw.getDefaults(),[...Object.keys(Kb.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),0===this.envelope.sustain){const t=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+t+n)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class vw extends gw{constructor(){const e=O_(vw.getDefaults(),arguments);super(e),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,Q_(this,["oscillator","envelope"])}static getDefaults(){return N_(pw.getDefaults(),gw.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const n=this.toSeconds(t),r=this.toFrequency(e instanceof db?e.toFrequency():e),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,n),this.oscillator.frequency.exponentialRampToValueAtTime(r,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}x_([lw(0)],vw.prototype,"octaves",void 0),x_([cw(0)],vw.prototype,"pitchDecay",void 0);const yw=new Set;function _w(e){yw.add(e)}function bw(e,t){const n=`registerProcessor("${e}", ${t})`;yw.add(n)}_w('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n');_w("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n");_w("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n");const ww="feedback-comb-filter";bw(ww,'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class xw extends fw{constructor(){const e=O_(xw.getDefaults(),arguments,["voice","options"]);super(e),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=e=>this.releaseAll(e),d_(!o_(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const n=this._voices.indexOf(this._dummyVoice);this._voices.splice(n,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(fw.getDefaults(),{maxPolyphony:32,options:{},voice:gw})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const t=this._activeVoices.findIndex(t=>t.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return d_(e instanceof pw,"Voice must extend Monophonic class"),e.connect(this.output),this._voices.push(e),e}__("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,n){e.forEach(e=>{const r=new Lb(this.context,e).toMidi(),i=this._getNextAvailableVoice();i&&(i.triggerAttack(e,t,n),this._activeVoices.push({midi:r,voice:i,released:!1}),this.log("triggerAttack",e,t))})}_triggerRelease(e,t){e.forEach(e=>{const n=new Lb(this.context,e).toMidi(),r=this._activeVoices.find(e=>{let{midi:t,released:r}=e;return t===n&&!r});r&&(r.voice.triggerRelease(t),r.released=!0,this.log("triggerRelease",e,t))})}_scheduleEvent(e,t,n,r){d_(!this.disposed,"Synth was already disposed"),n<=this.now()?"attack"===e?this._triggerAttack(t,n,r):this._triggerRelease(t,n):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(e,t,n,r)},n-this.now())}triggerAttack(e,t,n){Array.isArray(e)||(e=[e]);const r=this.toSeconds(t);return this._scheduleEvent("attack",e,r,n),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);const n=this.toSeconds(t);return this._scheduleEvent("release",e,n),this}triggerAttackRelease(e,t,n,r){const i=this.toSeconds(n);if(this.triggerAttack(e,i,r),c_(t)){d_(c_(e),"If the duration is an array, the notes must also be an array");for(let n=0;n<e.length;n++){const r=t[Math.min(n,t.length-1)],s=this.toSeconds(r);d_(s>0,"The duration must be greater than 0"),this.triggerRelease(e[n],i+s)}}else{const n=this.toSeconds(t);d_(n>0,"The duration must be greater than 0"),this.triggerRelease(e,i+n)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(e){const t=D_(e,["onsilence","context"]);return this.options=N_(this.options,t),this._voices.forEach(e=>e.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){const t=this.toSeconds(e);return this._activeVoices.forEach(e=>{let{voice:n}=e;n.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Tw extends fw{constructor(){const e=O_(Tw.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(e),this.name="Sampler",this._activeSources=new Map;const t={};Object.keys(e.urls).forEach(n=>{const r=parseInt(n,10);if(d_(h_(n)||o_(r)&&isFinite(r),`url key is neither a note or midi pitch: ${n}`),h_(n)){const r=new db(this.context,n).toMidi();t[r]=e.urls[n]}else o_(r)&&isFinite(r)&&(t[r]=e.urls[r])}),this._buffers=new Mb({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(fw.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:X_,onerror:X_,release:.1,urls:{}})}_findClosest(e){let t=0;for(;t<96;){if(this._buffers.has(e+t))return-t;if(this._buffers.has(e-t))return t;t++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.log("triggerAttack",e,t,n),Array.isArray(e)||(e=[e]),e.forEach(e=>{const r=lb(new db(this.context,e).toFrequency()),i=Math.round(r),s=r-i,o=this._findClosest(i),a=i-o,l=this._buffers.get(a),c=sb(o+s),u=new Qb({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:c}).connect(this.output);u.start(t,0,l.duration/c,n),c_(this._activeSources.get(i))||this._activeSources.set(i,[]),this._activeSources.get(i).push(u),u.onended=()=>{if(this._activeSources&&this._activeSources.has(i)){const e=this._activeSources.get(i),t=e.indexOf(u);-1!==t&&e.splice(t,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(e=>{const n=new db(this.context,e).toMidi();if(this._activeSources.has(n)&&this._activeSources.get(n).length){const e=this._activeSources.get(n);t=this.toSeconds(t),e.forEach(e=>{e.stop(t)}),this._activeSources.set(n,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(e=>{for(;e.length;){e.shift().stop(t)}}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=this.toSeconds(n);return this.triggerAttack(e,i,r),c_(t)?(d_(c_(e),"notes must be an array when duration is array"),e.forEach((e,n)=>{const r=t[Math.min(n,t.length-1)];this.triggerRelease(e,i+this.toSeconds(r))})):this.triggerRelease(e,i+this.toSeconds(t)),this}add(e,t,n){if(d_(h_(e)||isFinite(e),`note must be a pitch or midi: ${e}`),h_(e)){const r=new db(this.context,e).toMidi();this._buffers.add(r,t,n)}else this._buffers.add(e,t,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(e=>e.dispose())}),this._activeSources.clear(),this}}x_([cw(0)],Tw.prototype,"attack",void 0),x_([cw(0)],Tw.prototype,"release",void 0);class kw extends gb{constructor(){const e=O_(kw.getDefaults(),arguments,["callback","value"]);super(e),this.name="ToneEvent",this._state=new vb("stopped"),this._startOffset=0,this._loop=e.loop,this.callback=e.callback,this.value=e.value,this._loopStart=this.toTicks(e.loopStart),this._loopEnd=this.toTicks(e.loopEnd),this._playbackRate=e.playbackRate,this._probability=e.probability,this._humanize=e.humanize,this.mute=e.mute,this._playbackRate=e.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(gb.getDefaults(),{callback:X_,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;this._state.forEachFrom(e,e=>{let t;if("started"===e.state){-1!==e.id&&this.context.transport.clear(e.id);const n=e.time+Math.round(this.startOffset/this._playbackRate);if(!0===this._loop||o_(this._loop)&&this._loop>1){t=1/0,o_(this._loop)&&(t=this._loop*this._getLoopDuration());const r=this._state.getAfter(n);null!==r&&(t=Math.min(t,r.time-n)),t!==1/0&&(t=new Vb(this.context,t));const i=new Vb(this.context,this._getLoopDuration());e.id=this.context.transport.scheduleRepeat(this._tick.bind(this),i,new Vb(this.context,n),t)}else e.id=this.context.transport.schedule(this._tick.bind(this),new Vb(this.context,n))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(e){this._startOffset=e}get probability(){return this._probability}set probability(e){this._probability=e}get humanize(){return this._humanize}set humanize(e){this._humanize=e}start(e){const t=this.toTicks(e);return"stopped"===this._state.getValueAtTime(t)&&(this._state.add({id:-1,state:"started",time:t}),this._rescheduleEvents(t)),this}stop(e){this.cancel(e);const t=this.toTicks(e);if("started"===this._state.getValueAtTime(t)){this._state.setStateAtTime("stopped",t,{id:-1});const e=this._state.getBefore(t);let n=t;null!==e&&(n=e.time),this._rescheduleEvents(n)}return this}cancel(e){e=R_(e,-1/0);const t=this.toTicks(e);return this._state.forEachFrom(t,e=>{this.context.transport.clear(e.id)}),this._state.cancel(t),this}_tick(e){const t=this.context.transport.getTicksAtTime(e);if(!this.mute&&"started"===this._state.getValueAtTime(t)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let t=.02;l_(this.humanize)||(t=this.toSeconds(this.humanize)),e+=(2*Math.random()-1)*t}this.callback(e,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(e){this._loop=e,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this._rescheduleEvents()}get loopEnd(){return new Vb(this.context,this._loopEnd).toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e),this._loop&&this._rescheduleEvents()}get loopStart(){return new Vb(this.context,this._loopStart).toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const e=this.context.transport.ticks,t=this._state.get(e);if(null!==t&&"started"===t.state){const n=this._getLoopDuration();return(e-t.time)%n/n}return 0}return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Sw extends gb{constructor(){const e=O_(Sw.getDefaults(),arguments,["callback","interval"]);super(e),this.name="Loop",this._event=new kw({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:e.interval,playbackRate:e.playbackRate,probability:e.probability,humanize:e.humanize}),this.callback=e.callback,this.iterations=e.iterations}static getDefaults(){return Object.assign(gb.getDefaults(),{interval:"4n",callback:X_,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(e){return this._event.start(e),this}stop(e){return this._event.stop(e),this}cancel(e){return this._event.cancel(e),this}_tick(e){this.callback(e)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(e){this._event.loopEnd=e}get playbackRate(){return this._event.playbackRate}set playbackRate(e){this._event.playbackRate=e}get humanize(){return this._event.humanize}set humanize(e){this._event.humanize=e}get probability(){return this._event.probability}set probability(e){this._event.probability=e}get mute(){return this._event.mute}set mute(e){this._event.mute=e}get iterations(){return!0===this._event.loop?1/0:this._event.loop}set iterations(e){this._event.loop=e===1/0||e}dispose(){return super.dispose(),this._event.dispose(),this}}class Cw extends _b{constructor(){const e=O_(Cw.getDefaults(),arguments,["pan"]);super(e),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new yb({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",Q_(this,"pan")}static getDefaults(){return Object.assign(_b.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const Ew="bit-crusher";bw(Ew,"\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class Aw extends _b{constructor(){const e=O_(Aw.getDefaults(),arguments,["solo"]);super(e),this.name="Solo",this.input=this.output=new Tb({context:this.context}),Aw._allSolos.has(this.context)||Aw._allSolos.set(this.context,new Set),Aw._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(_b.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Aw._allSolos.get(this.context).forEach(e=>e._updateSolo())}get muted(){return 0===this.input.gain.value}_addSolo(){Aw._soloed.has(this.context)||Aw._soloed.set(this.context,new Set),Aw._soloed.get(this.context).add(this)}_removeSolo(){Aw._soloed.has(this.context)&&Aw._soloed.get(this.context).delete(this)}_isSoloed(){return Aw._soloed.has(this.context)&&Aw._soloed.get(this.context).has(this)}_noSolos(){return!Aw._soloed.has(this.context)||Aw._soloed.has(this.context)&&0===Aw._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Aw._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Aw._allSolos=new Map,Aw._soloed=new Map;class Iw extends _b{constructor(){const e=O_(Iw.getDefaults(),arguments,["pan","volume"]);super(e),this.name="PanVol",this._panner=this.input=new Cw({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Rb({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,Q_(this,["pan","volume"])}static getDefaults(){return Object.assign(_b.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Nw extends _b{constructor(){const e=O_(Nw.getDefaults(),arguments,["volume","pan"]);super(e),this.name="Channel",this._solo=this.input=new Aw({solo:e.solo,context:this.context}),this._panVol=this.output=new Iw({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Q_(this,["pan","volume"])}static getDefaults(){return Object.assign(_b.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return Nw.buses.has(e)||Nw.buses.set(e,new Tb({context:this.context})),Nw.buses.get(e)}send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this._getBus(e),r=new Tb({context:this.context,units:"decibels",gain:t});return this.connect(r),r.connect(n),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Nw.buses=new Map;const Ow=nb().transport;nb().destination,nb().destination;nb().listener;nb().draw;const Rw=nb();var Dw=n(960);const Pw="default-app-id",Mw=Qe({}),Lw=function(e,t){const n="object"==typeof e?e:Ye(),r="string"==typeof e?e:t||ta,i=$e(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(e=>{const t=u(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&vf(i,...e)}return i}(Mw),Vw=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye();const t=$e(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=$e(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(C(n.getOptions(),t??{}))return e;ft(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ti,persistence:[Dr,fr,yr]}),r=d("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Ei)return;const r=t?.token;Ai!==r&&(Ai=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){D(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){D(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=u("auth");return s&&Mn(n,`http://${s}`),n}(Mw),jw=100,Fw=[{id:"item_4",name:"\uccb4\ub825 \ud3ec\uc158",type:"consumable",value:5,stats:{health:10},description:"\uccb4\ub825\uc744 \ud68c\ubcf5\uc2dc\ucf1c\uc900\ub2e4.",shopCategory:"general"},{id:"item_5",name:"\ub9c8\ub098 \ud3ec\uc158",type:"consumable",value:5,stats:{intelligence:5},description:"\ub9c8\ub098\ub97c \ud68c\ubcf5\uc2dc\ucf1c\uc900\ub2e4.",shopCategory:"general"},{id:"item_6",name:"\uace8\ub4dc \uc8fc\uba38\ub2c8",type:"misc",value:50,stats:{},description:"\uace8\ub4dc\uac00 \ub4e4\uc5b4\uc788\ub294 \uc8fc\uba38\ub2c8.",shopCategory:"general"},{id:"item_1",name:"\ub0a1\uc740 \uac80",type:"weapon",value:10,stats:{strength:2},description:"\uc624\ub798\ub41c \uac80\uc774\uc9c0\ub9cc \uc4f8\ub9cc\ud558\ub2e4.",shopCategory:"blacksmith"},{id:"item_7",name:"\uac15\ucca0 \uac80",type:"weapon",value:50,stats:{strength:8},description:"\ub2e8\ub2e8\ud55c \uac15\ucca0\ub85c \ub9cc\ub4e4\uc5b4\uc9c4 \uac80.",shopCategory:"blacksmith"},{id:"item_2",name:"\ub098\ubb34 \ubc29\ud328",type:"armor",value:15,stats:{health:5},description:"\uac04\ub2e8\ud55c \ub098\ubb34 \ubc29\ud328.",shopCategory:"blacksmith"},{id:"item_3",name:"\ucd08\ubcf4\uc790 \ub85c\ube0c",type:"armor",value:20,stats:{intelligence:3},description:"\ub9c8\ubc95 \ucd08\ubcf4\uc790\ub97c \uc704\ud55c \ub85c\ube0c.",shopCategory:"tailor"},{id:"item_8",name:"\uac00\uc8fd \uac11\uc637",type:"armor",value:40,stats:{health:15,strength:2},description:"\uac00\ubccd\uace0 \ud2bc\ud2bc\ud55c \uac00\uc8fd \uac11\uc637.",shopCategory:"tailor"},{id:"item_9",name:"\ub098\ubb34 \ud5ec\uba67",type:"head",value:10,stats:{defense:3},description:"\uba38\ub9ac\ub97c \ubcf4\ud638\ud558\ub294 \ub098\ubb34 \ud5ec\uba67.",shopCategory:"tailor"}],Uw=[{id:"none",name:"\uc5c6\uc74c",svg:""},{id:"short_hair",name:"\uc9e7\uc740 \uba38\ub9ac",svg:'<rect x="24" y="10" width="16" height="8" fill="#8B4513" />'},{id:"long_hair",name:"\uae34 \uba38\ub9ac",svg:'<path d="M24 10 Q20 15 20 20 L20 30 Q28 35 44 30 L44 20 Q44 15 40 10 Z" fill="#4B0082" />'}],zw=[{id:"none",name:"\uc5c6\uc74c",svg:""},{id:"tshirt",name:"\ud2f0\uc154\uce20",svg:'<rect x="20" y="32" width="24" height="10" fill="#3498DB" />'},{id:"robe",name:"\ub85c\ube0c",svg:'<rect x="18" y="32" width="28" height="20" fill="#9B59B6" />'}],qw=[{id:"none",name:"\uc5c6\uc74c",svg:""},{id:"sword",name:"\uac80",svg:'<rect x="45" y="35" width="5" height="15" fill="#A9A9A9" /><rect x="47" y="30" width="1" height="5" fill="#A9A9A9" />'},{id:"staff",name:"\uc9c0\ud321\uc774",svg:'<rect x="15" y="25" width="3" height="25" fill="#8B4513" /><circle cx="16.5" cy="23" r="3" fill="#FFD700" />'}],Bw=e=>{let{hairId:t,outfitId:n,weaponId:r}=e;const i=(e,t)=>{const n=e.find(e=>e.id===t);return n?n.svg:""};return(0,Dw.jsxs)("div",{className:"relative w-full h-full",children:[(0,Dw.jsxs)("svg",{className:"absolute top-0 left-0 w-full h-full",viewBox:"0 0 64 64",children:[(0,Dw.jsx)("circle",{cx:"32",cy:"24",r:"12",fill:"#F0C6B0"}),(0,Dw.jsx)("circle",{cx:"28",cy:"22",r:"2",fill:"#4A4A4A"}),(0,Dw.jsx)("circle",{cx:"36",cy:"22",r:"2",fill:"#4A4A4A"}),(0,Dw.jsx)("rect",{x:"30",y:"28",width:"4",height:"2",fill:"#8B4513"})]}),t&&(0,Dw.jsx)("svg",{className:"absolute top-0 left-0 w-full h-full",viewBox:"0 0 64 64",dangerouslySetInnerHTML:{__html:i(Uw,t)}}),n&&(0,Dw.jsx)("svg",{className:"absolute top-0 left-0 w-full h-full",viewBox:"0 0 64 64",dangerouslySetInnerHTML:{__html:i(zw,n)}}),r&&(0,Dw.jsx)("svg",{className:"absolute top-0 left-0 w-full h-full",viewBox:"0 0 64 64",dangerouslySetInnerHTML:{__html:i(qw,r)}})]})},$w=e=>{let{character:t,updateCharacterPart:n,onClose:r}=e;return(0,Dw.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 text-white p-4 sm:p-8 font-inter flex flex-col items-center justify-center",children:(0,Dw.jsxs)("div",{className:"bg-gray-800 p-8 rounded-2xl shadow-xl border border-gray-700 max-w-lg w-full text-center",children:[(0,Dw.jsxs)("h2",{className:"text-3xl font-bold mb-6 text-pink-400 flex items-center justify-center",children:[(0,Dw.jsx)("svg",{className:"w-8 h-8 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",children:(0,Dw.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"\uc544\ubc14\ud0c0 \uafb8\ubbf8\uae30"]}),(0,Dw.jsx)("div",{className:"flex justify-center mb-8",children:(0,Dw.jsx)("div",{className:"w-32 h-32 flex items-center justify-center border-4 border-gray-600 overflow-hidden",children:(0,Dw.jsx)(Bw,{hairId:t.hairId,outfitId:t.outfitId,weaponId:t.weaponId})})}),(0,Dw.jsxs)("div",{className:"mb-6",children:[(0,Dw.jsx)("h3",{className:"text-xl font-semibold mb-3 text-yellow-300",children:"\uba38\ub9ac \uc2a4\ud0c0\uc77c"}),(0,Dw.jsx)("div",{className:"flex flex-wrap gap-3 justify-center",children:Uw.map(e=>(0,Dw.jsxs)("button",{onClick:()=>n("hairId",e.id),className:`flex flex-col items-center p-3 rounded-lg border-2 ${t.hairId===e.id?"border-blue-500 ring-2 ring-blue-500":"border-gray-600"} hover:border-blue-400 transition duration-200`,children:[(0,Dw.jsxs)("div",{className:"w-12 h-12 flex items-center justify-center",children:[e.svg&&(0,Dw.jsx)("svg",{viewBox:"0 0 64 64",dangerouslySetInnerHTML:{__html:e.svg}}),!e.svg&&(0,Dw.jsx)("span",{className:"text-gray-400 text-xs",children:"\uc5c6\uc74c"})]}),(0,Dw.jsx)("span",{className:"text-sm text-gray-300 mt-1",children:e.name})]},e.id))})]}),(0,Dw.jsxs)("div",{className:"mb-6",children:[(0,Dw.jsx)("h3",{className:"text-xl font-semibold mb-3 text-green-300",children:"\uc637"}),(0,Dw.jsx)("div",{className:"flex flex-wrap gap-3 justify-center",children:zw.map(e=>(0,Dw.jsxs)("button",{onClick:()=>n("outfitId",e.id),className:`flex flex-col items-center p-3 rounded-lg border-2 ${t.outfitId===e.id?"border-blue-500 ring-2 ring-blue-500":"border-gray-600"} hover:border-blue-400 transition duration-200`,children:[(0,Dw.jsxs)("div",{className:"w-12 h-12 flex items-center justify-center",children:[e.svg&&(0,Dw.jsx)("svg",{viewBox:"0 0 64 64",dangerouslySetInnerHTML:{__html:e.svg}}),!e.svg&&(0,Dw.jsx)("span",{className:"text-gray-400 text-xs",children:"\uc5c6\uc74c"})]}),(0,Dw.jsx)("span",{className:"text-sm text-gray-300 mt-1",children:e.name})]},e.id))})]}),(0,Dw.jsxs)("div",{className:"mb-8",children:[(0,Dw.jsx)("h3",{className:"text-xl font-semibold mb-3 text-red-300",children:"\ubb34\uae30"}),(0,Dw.jsx)("div",{className:"flex flex-wrap gap-3 justify-center",children:qw.map(e=>(0,Dw.jsxs)("button",{onClick:()=>n("weaponId",e.id),className:`flex flex-col items-center p-3 rounded-lg border-2 ${t.weaponId===e.id?"border-blue-500 ring-2 ring-blue-500":"border-gray-600"} hover:border-blue-400 transition duration-200`,children:[(0,Dw.jsxs)("div",{className:"w-12 h-12 flex items-center justify-center",children:[e.svg&&(0,Dw.jsx)("svg",{viewBox:"0 0 64 64",dangerouslySetInnerHTML:{__html:e.svg}}),!e.svg&&(0,Dw.jsx)("span",{className:"text-gray-400 text-xs",children:"\uc5c6\uc74c"})]}),(0,Dw.jsx)("span",{className:"text-sm text-gray-300 mt-1",children:e.name})]},e.id))})]}),(0,Dw.jsx)("button",{onClick:r,className:"w-full bg-gradient-to-r from-gray-600 to-gray-700 text-white py-3 rounded-lg font-bold text-lg shadow-md hover:from-gray-700 hover:to-gray-800 transition duration-300 transform hover:scale-105",children:"\ub4a4\ub85c \uac00\uae30"})]})})},Hw=t=>{let{character:n,onBack:r,sellItem:i,equipItem:s,unequipItem:o}=t;const[a,l]=(0,e.useState)("inventory"),[c,u]=(0,e.useState)("all"),[h,d]=(0,e.useState)("name"),[f,p]=(0,e.useState)("asc"),m=[...n.inventory].filter(e=>"all"===c||("consumable"===c?"consumable"===e.type||"misc"===e.type:"equipment"===c?"weapon"===e.type||"armor"===e.type:"outfit"!==c||"head"===e.type)).sort((e,t)=>{let n,r;return"name"===h?(n=e.name.toLowerCase(),r=t.name.toLowerCase()):"type"===h?(n=e.type.toLowerCase(),r=t.type.toLowerCase()):"value"===h&&(n=e.value,r=t.value),n<r?"asc"===f?-1:1:n>r?"asc"===f?1:-1:0}),g=e=>{if(!e||!e.type||!n.equippedItems)return!1;const t=n.equippedItems[e.type];return t&&t.uniqueId===e.uniqueId},v=new Set(n.inventory.map(e=>e.id)),y=new Set(Fw.map(e=>e.id)).size,_=y>0?(v.size/y*100).toFixed(1):0;return(0,Dw.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 text-white p-4 sm:p-8 font-inter flex flex-col items-center",children:(0,Dw.jsxs)("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700 max-w-4xl w-full text-center mt-8",children:[(0,Dw.jsxs)("h2",{className:"text-3xl font-bold mb-6 text-orange-400 flex items-center justify-center",children:[(0,Dw.jsx)("svg",{className:"w-8 h-8 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",children:(0,Dw.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10m-4-2h8m-4 2v4"})}),"\uc544\uc774\ud15c"]}),(0,Dw.jsxs)("div",{className:"flex justify-center mb-6 border-b border-gray-700",children:[(0,Dw.jsx)("button",{onClick:()=>l("inventory"),className:"px-6 py-3 text-lg font-semibold rounded-t-lg transition duration-200 "+("inventory"===a?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-700"),children:"\uc778\ubca4\ud1a0\ub9ac"}),(0,Dw.jsx)("button",{onClick:()=>l("compendium"),className:"px-6 py-3 text-lg font-semibold rounded-t-lg transition duration-200 "+("compendium"===a?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-700"),children:"\uc544\uc774\ud15c \ub3c4\uac10"})]}),"inventory"===a&&(0,Dw.jsxs)("div",{children:[(0,Dw.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-300",children:"\ub0b4 \uc778\ubca4\ud1a0\ub9ac"}),(0,Dw.jsxs)("div",{className:"flex justify-center mb-4 border-b border-gray-700",children:[(0,Dw.jsx)("button",{onClick:()=>u("all"),className:"px-4 py-2 text-md font-semibold rounded-t-lg transition duration-200 "+("all"===c?"bg-indigo-600 text-white":"text-gray-400 hover:bg-gray-700"),children:"\uc804\uccb4"}),(0,Dw.jsx)("button",{onClick:()=>u("consumable"),className:"px-4 py-2 text-md font-semibold rounded-t-lg transition duration-200 "+("consumable"===c?"bg-indigo-600 text-white":"text-gray-400 hover:bg-gray-700"),children:"\uc18c\ubaa8\ud488"}),(0,Dw.jsx)("button",{onClick:()=>u("equipment"),className:"px-4 py-2 text-md font-semibold rounded-t-lg transition duration-200 "+("equipment"===c?"bg-indigo-600 text-white":"text-gray-400 hover:bg-gray-700"),children:"\uc7a5\ube44"}),(0,Dw.jsx)("button",{onClick:()=>u("outfit"),className:"px-4 py-2 text-md font-semibold rounded-t-lg transition duration-200 "+("outfit"===c?"bg-indigo-600 text-white":"text-gray-400 hover:bg-gray-700"),children:"\uc758\uc0c1"})]}),(0,Dw.jsxs)("div",{className:"flex justify-end items-center mb-4 gap-2",children:[(0,Dw.jsx)("span",{className:"text-gray-400",children:"\uc815\ub82c:"}),(0,Dw.jsxs)("select",{className:"p-2 rounded-lg bg-gray-700 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500",value:h,onChange:e=>d(e.target.value),children:[(0,Dw.jsx)("option",{value:"name",children:"\uc774\ub984"}),(0,Dw.jsx)("option",{value:"type",children:"\uc720\ud615"}),(0,Dw.jsx)("option",{value:"value",children:"\uac00\uce58"})]}),(0,Dw.jsx)("button",{onClick:()=>p("asc"===f?"desc":"asc"),className:"p-2 rounded-lg bg-gray-700 text-white border border-gray-600 hover:bg-gray-600",children:"asc"===f?"\u25b2":"\u25bc"})]}),0===m.length?(0,Dw.jsx)("p",{className:"text-gray-400 py-4",children:"\uc774 \uce74\ud14c\uace0\ub9ac\uc5d0\ub294 \uc544\uc774\ud15c\uc774 \ube44\uc5b4\uc788\uc2b5\ub2c8\ub2e4."}):(0,Dw.jsx)("ul",{className:"space-y-3",children:m.map((e,t)=>(0,Dw.jsxs)("li",{className:"bg-gray-700 p-4 rounded-lg text-left flex flex-col sm:flex-row justify-between items-center",children:[(0,Dw.jsxs)("div",{className:"flex-grow mb-2 sm:mb-0",children:[(0,Dw.jsxs)("p",{className:"font-medium text-lg text-white",children:[e.name," ",g(e)&&(0,Dw.jsx)("span",{className:"text-blue-400 text-sm",children:"(\uc7a5\ucc29\ub428)"})]}),(0,Dw.jsxs)("p",{className:"text-sm text-gray-400",children:["\uc720\ud615: ","weapon"===e.type?"\ubb34\uae30":"armor"===e.type?"\ubc29\uc5b4\uad6c":"consumable"===e.type?"\uc18c\ubaa8\ud488":"head"===e.type?"\uba38\ub9ac":"\uae30\ud0c0"]}),(0,Dw.jsxs)("p",{className:"text-sm text-gray-400",children:["\uac00\uce58: ",e.value," \uace8\ub4dc"]}),e.stats&&Object.keys(e.stats).length>0&&(0,Dw.jsxs)("p",{className:"text-sm text-gray-400",children:["\ub2a5\ub825\uce58: ",Object.entries(e.stats).map(e=>{let[t,n]=e;return`${t}:+${n}`}).join(", ")]}),(0,Dw.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.description})]}),(0,Dw.jsxs)("div",{className:"flex space-x-2 mt-2 sm:mt-0",children:[["weapon","armor","head"].includes(e.type)&&(g(e)?(0,Dw.jsx)("button",{onClick:()=>o(e),className:"bg-red-600 text-white px-3 py-1 rounded-md text-sm hover:bg-red-700 transition duration-200",children:"\uc7a5\ucc29 \ud574\uc81c"}):(0,Dw.jsx)("button",{onClick:()=>s(e),className:"bg-blue-600 text-white px-3 py-1 rounded-md text-sm hover:bg-blue-700 transition duration-200",children:"\uc7a5\ucc29"})),(0,Dw.jsx)("button",{onClick:()=>i(e),className:"bg-yellow-600 text-white px-3 py-1 rounded-md text-sm hover:bg-yellow-700 transition duration-200",children:"\ud310\ub9e4"})]})]},e.uniqueId||e.id+t))})]}),"compendium"===a&&(0,Dw.jsxs)("div",{children:[(0,Dw.jsx)("h3",{className:"text-xl font-semibold mb-4 text-gray-300",children:"\uc544\uc774\ud15c \ub3c4\uac10"}),(0,Dw.jsxs)("p",{className:"text-gray-400 mb-4",children:["\ubcf4\uc720 \uc544\uc774\ud15c: ",v.size," / ",y," (",_,"%)"]}),(0,Dw.jsx)("ul",{className:"space-y-3",children:Fw.map(e=>(0,Dw.jsxs)("li",{className:"p-4 rounded-lg text-left "+(v.has(e.id)?"bg-blue-900 border border-blue-400":"bg-gray-700 border border-gray-600"),children:[(0,Dw.jsxs)("p",{className:"font-medium text-lg text-white",children:[e.name," ",v.has(e.id)&&(0,Dw.jsx)("span",{className:"text-blue-200 text-sm",children:"(\ubcf4\uc720)"})]}),(0,Dw.jsxs)("p",{className:"text-sm text-gray-400",children:["\uc720\ud615: ","weapon"===e.type?"\ubb34\uae30":"armor"===e.type?"\ubc29\uc5b4\uad6c":"consumable"===e.type?"\uc18c\ubaa8\ud488":"head"===e.type?"\uba38\ub9ac":"\uae30\ud0c0"]}),(0,Dw.jsxs)("p",{className:"text-sm text-gray-400",children:["\uac00\uce58: ",e.value," \uace8\ub4dc"]}),e.stats&&Object.keys(e.stats).length>0&&(0,Dw.jsxs)("p",{className:"text-sm text-gray-400",children:["\ub2a5\ub825\uce58: ",Object.entries(e.stats).map(e=>{let[t,n]=e;return`${t}:+${n}`}).join(", ")]}),(0,Dw.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.description})]},e.id))})]}),(0,Dw.jsx)("button",{onClick:r,className:"mt-8 w-full bg-gradient-to-r from-gray-600 to-gray-700 text-white py-3 rounded-lg font-bold text-lg shadow-md hover:from-gray-700 hover:to-gray-800 transition duration-300 transform hover:scale-105",children:"\ub4a4\ub85c \uac00\uae30"})]})})},Ww=t=>{let{character:n,onBack:r,buyItem:i}=t;const[s,o]=(0,e.useState)("general"),a=e=>Fw.filter(t=>t.shopCategory===e);return(0,Dw.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 text-white p-4 sm:p-8 font-inter flex flex-col items-center",children:(0,Dw.jsxs)("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700 max-w-4xl w-full text-center mt-8",children:[(0,Dw.jsxs)("h2",{className:"text-3xl font-bold mb-6 text-yellow-400 flex items-center justify-center",children:[(0,Dw.jsx)("svg",{className:"w-8 h-8 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",children:(0,Dw.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),"\uc0c1\uc810\uac00"]}),(0,Dw.jsxs)("div",{className:"flex justify-center mb-6 border-b border-gray-700",children:[(0,Dw.jsx)("button",{onClick:()=>o("general"),className:"px-6 py-3 text-lg font-semibold rounded-t-lg transition duration-200 "+("general"===s?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-700"),children:"\uc7a1\ud654\uc810"}),(0,Dw.jsx)("button",{onClick:()=>o("blacksmith"),className:"px-6 py-3 text-lg font-semibold rounded-t-lg transition duration-200 "+("blacksmith"===s?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-700"),children:"\ub300\uc7a5\uac04"}),(0,Dw.jsx)("button",{onClick:()=>o("tailor"),className:"px-6 py-3 text-lg font-semibold rounded-t-lg transition duration-200 "+("tailor"===s?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-700"),children:"\uc758\uc0c1\uc2e4"})]}),(0,Dw.jsxs)("div",{className:"w-full",children:[(0,Dw.jsxs)("h3",{className:"text-xl font-semibold mb-4 text-gray-300",children:["general"===s&&"\uc7a1\ud654\uc810 \uc544\uc774\ud15c","blacksmith"===s&&"\ub300\uc7a5\uac04 \uc544\uc774\ud15c","tailor"===s&&"\uc758\uc0c1\uc2e4 \uc544\uc774\ud15c"]}),(0,Dw.jsx)("ul",{className:"space-y-3",children:0===a(s).length?(0,Dw.jsx)("p",{className:"text-gray-400 py-4",children:"\uc774 \uc0c1\uc810\uc5d0\ub294 \ud310\ub9e4\ud560 \uc544\uc774\ud15c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):a(s).map(e=>(0,Dw.jsxs)("li",{className:"bg-gray-700 p-4 rounded-lg text-left flex flex-col sm:flex-row justify-between items-center",children:[(0,Dw.jsxs)("div",{className:"flex-grow mb-2 sm:mb-0",children:[(0,Dw.jsx)("p",{className:"font-medium text-lg text-white",children:e.name}),(0,Dw.jsxs)("p",{className:"text-sm text-gray-400",children:["\uc720\ud615: ","weapon"===e.type?"\ubb34\uae30":"armor"===e.type?"\ubc29\uc5b4\uad6c":"consumable"===e.type?"\uc18c\ubaa8\ud488":"head"===e.type?"\uba38\ub9ac":"\uae30\ud0c0"]}),(0,Dw.jsxs)("p",{className:"text-sm text-gray-400",children:["\uac00\uaca9: ",e.value," \uace8\ub4dc"]}),e.stats&&Object.keys(e.stats).length>0&&(0,Dw.jsxs)("p",{className:"text-sm text-gray-400",children:["\ub2a5\ub825\uce58: ",Object.entries(e.stats).map(e=>{let[t,n]=e;return`${t}:+${n}`}).join(", ")]}),(0,Dw.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.description})]}),(0,Dw.jsxs)("div",{className:"flex space-x-2 mt-2 sm:mt-0",children:[(0,Dw.jsx)("button",{onClick:()=>i(e,1),className:"bg-blue-600 text-white px-3 py-1 rounded-md text-sm hover:bg-blue-700 transition duration-200",children:"1\uac1c \uad6c\ub9e4"}),(0,Dw.jsx)("button",{onClick:()=>i(e,10),className:"bg-green-600 text-white px-3 py-1 rounded-md text-sm hover:bg-green-700 transition duration-200",children:"10\uac1c \uad6c\ub9e4"})]})]},e.id))})]}),(0,Dw.jsx)("button",{onClick:r,className:"mt-8 w-full bg-gradient-to-r from-gray-600 to-gray-700 text-white py-3 rounded-lg font-bold text-lg shadow-md hover:from-gray-700 hover:to-gray-800 transition duration-300 transform hover:scale-105",children:"\ub4a4\ub85c \uac00\uae30"})]})})},Gw=e=>{let{onBack:t}=e;return(0,Dw.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 text-white p-4 sm:p-8 font-inter flex flex-col items-center",children:(0,Dw.jsxs)("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700 max-w-2xl w-full text-center mt-8",children:[(0,Dw.jsxs)("h2",{className:"text-3xl font-bold mb-6 text-blue-400 flex items-center justify-center",children:[(0,Dw.jsx)("svg",{className:"w-8 h-8 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",children:(0,Dw.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h2a2 2 0 002-2V7a2 2 0 00-2-2h-2m-4 14v-2m4 2v-2m-10 2H4A2 2 0 012 18V7a2 2 0 012-2h2m4 14V7m0 10h4m-4 4H9.5M4 7h16M7 7h10"})}),"\uae38\ub4dc"]}),(0,Dw.jsx)("p",{className:"text-gray-300 text-lg",children:"\uae38\ub4dc \ud65c\ub3d9\uc744 \ud1b5\ud574 \ub2e4\ub978 \uc0ac\uc6a9\uc790\uc640 \ud611\ub825\ud558\uace0 \ubaa9\ud45c\ub97c \ub2ec\uc131\ud558\uc138\uc694!"}),(0,Dw.jsx)("button",{onClick:t,className:"mt-8 w-full bg-gradient-to-r from-gray-600 to-gray-700 text-white py-3 rounded-lg font-bold text-lg shadow-md hover:from-gray-700 hover:to-gray-800 transition duration-300 transform hover:scale-105",children:"\ub4a4\ub85c \uac00\uae30"})]})})},Kw=t=>{let{onBack:n}=t;const[r,i]=(0,e.useState)(0),[s,o]=(0,e.useState)(0),[a,l]=(0,e.useState)(!1),[c,u]=(0,e.useState)(!1),h=(0,e.useRef)(null),d=(0,e.useRef)(null);(0,e.useEffect)(()=>(d.current||(d.current=new xw(gw,{oscillator:{type:"sine"},envelope:{attack:.005,decay:.1,sustain:.3,release:1}}).toDestination(),d.current.volume.value=-15),()=>{d.current&&(d.current.releaseAll(),d.current.dispose(),d.current=null),h.current&&clearInterval(h.current)}),[]),(0,e.useEffect)(()=>(a?h.current=setInterval(()=>{i(e=>59===e?(o(e=>e+1),0):e+1)},1e3):clearInterval(h.current),()=>clearInterval(h.current)),[a]);return(0,Dw.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 text-white p-4 sm:p-8 font-inter flex flex-col items-center",children:(0,Dw.jsxs)("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700 max-w-2xl w-full text-center mt-8",children:[(0,Dw.jsxs)("h2",{className:"text-3xl font-bold mb-6 text-green-400 flex items-center justify-center",children:[(0,Dw.jsx)("svg",{className:"w-8 h-8 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",children:(0,Dw.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.747 0-3.332.477-4.5 1.253"})}),"\ubaa8\ud5d8 \uc2dc\uc791"]}),(0,Dw.jsx)("p",{className:"text-gray-300 text-lg mb-6",children:"\uc0c8\ub85c\uc6b4 \ubaa8\ud5d8\uc744 \uc2dc\uc791\ud558\uace0 \ud018\uc2a4\ud2b8\ub97c \uc644\ub8cc\ud558\uc138\uc694!"}),(0,Dw.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg mb-6",children:[(0,Dw.jsx)("h3",{className:"text-2xl font-bold text-yellow-300 mb-4",children:"\ud0c0\uc774\uba38"}),(0,Dw.jsx)("div",{className:"text-5xl font-mono mb-4 text-white",children:(f=s,p=r,`${String(f).padStart(2,"0")}:${String(p).padStart(2,"0")}`)}),(0,Dw.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,Dw.jsx)("button",{onClick:()=>{l(!0)},disabled:a,className:"bg-green-600 text-white px-5 py-2 rounded-lg font-bold text-lg shadow-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition duration-300",children:"\uc2dc\uc791"}),(0,Dw.jsx)("button",{onClick:()=>{l(!1)},disabled:!a&&0===r&&0===s,className:"bg-red-600 text-white px-5 py-2 rounded-lg font-bold text-lg shadow-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition duration-300",children:"\uc815\uc9c0"}),(0,Dw.jsx)("button",{onClick:()=>{l(!1),i(0),o(0)},className:"bg-gray-500 text-white px-5 py-2 rounded-lg font-bold text-lg shadow-md hover:bg-gray-600 transition duration-300",children:"\uc7ac\uc124\uc815"})]})]}),(0,Dw.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg mb-6",children:[(0,Dw.jsx)("h3",{className:"text-2xl font-bold text-purple-300 mb-4",children:"BGM"}),(0,Dw.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,Dw.jsx)("button",{onClick:async()=>{if(!c){"running"!==Rw.state&&(await tb.resume(),console.log("Tone.js AudioContext started."));const e=["C4","G3","A3","F3"];let t=0;d.current.loop=new Sw(n=>{const r=e[t%e.length];d.current.triggerAttackRelease(r,"8n",n),t++},"4n").start(0),Ow.start(),u(!0),console.log("BGM \uc7ac\uc0dd \uc2dc\uc791")}},disabled:c,className:"bg-blue-600 text-white px-5 py-2 rounded-lg font-bold text-lg shadow-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition duration-300",children:"BGM \uc7ac\uc0dd"}),(0,Dw.jsx)("button",{onClick:()=>{c&&(Ow.stop(),d.current.releaseAll(),u(!1),console.log("BGM \uc7ac\uc0dd \uc815\uc9c0"))},disabled:!c,className:"bg-red-600 text-white px-5 py-2 rounded-lg font-bold text-lg shadow-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition duration-300",children:"BGM \uc815\uc9c0"})]}),(0,Dw.jsx)("p",{className:"text-gray-400 text-sm mt-3",children:"*BGM\uc740 \uac04\ub2e8\ud55c \ucf54\ub4dc \uc9c4\ud589\uc73c\ub85c \uad6c\uc131\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4."})]}),(0,Dw.jsx)("button",{onClick:n,className:"mt-8 w-full bg-gradient-to-r from-gray-600 to-gray-700 text-white py-3 rounded-lg font-bold text-lg shadow-md hover:from-gray-700 hover:to-gray-800 transition duration-300 transform hover:scale-105",children:"\ub4a4\ub85c \uac00\uae30"})]})});var f,p},Qw=e=>{let{onBack:t}=e;return(0,Dw.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 text-white p-4 sm:p-8 font-inter flex flex-col items-center",children:(0,Dw.jsxs)("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700 max-w-2xl w-full text-center mt-8",children:[(0,Dw.jsxs)("h2",{className:"text-3xl font-bold mb-6 text-cyan-400 flex items-center justify-center",children:[(0,Dw.jsxs)("svg",{className:"w-8 h-8 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",children:[(0,Dw.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"}),(0,Dw.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"})]}),"\ud1b5\uacc4"]}),(0,Dw.jsx)("p",{className:"text-gray-300 text-lg",children:"\uc5ec\uae30\uc5d0 \uc0ac\uc6a9\uc790 \ud1b5\uacc4 \uc815\ubcf4\uac00 \ud45c\uc2dc\ub429\ub2c8\ub2e4."}),(0,Dw.jsx)("button",{onClick:t,className:"mt-8 w-full bg-gradient-to-r from-gray-600 to-gray-700 text-white py-3 rounded-lg font-bold text-lg shadow-md hover:from-gray-700 hover:to-gray-800 transition duration-300 transform hover:scale-105",children:"\ub4a4\ub85c \uac00\uae30"})]})})},Yw=e=>{let{onBack:t}=e;return(0,Dw.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 text-white p-4 sm:p-8 font-inter flex flex-col items-center",children:(0,Dw.jsxs)("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700 max-w-2xl w-full text-center mt-8",children:[(0,Dw.jsxs)("h2",{className:"text-3xl font-bold mb-6 text-yellow-400 flex items-center justify-center",children:[(0,Dw.jsx)("svg",{className:"w-8 h-8 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",children:(0,Dw.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.329 1.176l1.519 4.674c.3.921-.755 1.688-1.539 1.175l-4.915-3.181a1 1 0 00-1.176 0l-4.915 3.181c-.784.513-1.838-.254-1.539-1.175l1.519-4.674a1 1 0 00-.329-1.176l-3.976-2.888c-.784-.57-.381-1.81.588-1.81h4.915a1 1 0 00.95-.69l1.519-4.674z"})}),"\ub7ad\ud0b9"]}),(0,Dw.jsx)("p",{className:"text-gray-300 text-lg",children:"\uc5ec\uae30\uc5d0 \uc0ac\uc6a9\uc790 \ub7ad\ud0b9 \uc815\ubcf4\uac00 \ud45c\uc2dc\ub429\ub2c8\ub2e4."}),(0,Dw.jsx)("button",{onClick:t,className:"mt-8 w-full bg-gradient-to-r from-gray-600 to-gray-700 text-white py-3 rounded-lg font-bold text-lg shadow-md hover:from-gray-700 hover:to-gray-800 transition duration-300 transform hover:scale-105",children:"\ub4a4\ub85c \uac00\uae30"})]})})},Xw=t=>{let{userId:n,db:r,onBack:i}=t;const[s,o]=(0,e.useState)(new Date),[a,l]=(0,e.useState)(new Date),[c,u]=(0,e.useState)(""),[h,d]=(0,e.useState)(null),f=(0,e.useRef)(null),p=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,m=(0,e.useCallback)(async e=>{if(!n||!r)return;const t=p(e),i=function(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof op&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof cp).length,n=e.filter(e=>e instanceof lp).length;if(t>1||t>0&&n>0)throw new ss(is.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}(wf(r,`artifacts/${Pw}/users/${n}/diaryEntries`),function(e,t,n){const r=t,i=ip("where",e);return lp._create(i,r,n)}("date","==",t)),s=await function(e){e=Ps(e,yf);const t=Ps(e.firestore,Ef),n=Af(t),r=new bp(t);return sp(e._query),uf(n,e._query).then(n=>new yp(t,r,e,n))}(i);if(s.empty)u(""),d(null);else{const e=s.docs[0];u(e.data().content),d(e.id)}},[n,r]),g=(0,e.useCallback)(async(e,t,i)=>{if(!n||!r)return;const s=p(e),o=wf(r,`artifacts/${Pw}/users/${n}/diaryEntries`);var a;if(""!==t.trim())if(i)await xp(xf(o,i),{content:t}),console.log(`\uba54\ubaa8 \uc5c5\ub370\uc774\ud2b8\ub428: ${s}`);else{const e=await Tp(o,{date:s,content:t,createdAt:new Date});d(e.id),console.log(`\uc0c8 \uba54\ubaa8 \ucd94\uac00\ub428: ${s}`)}else i&&(await(a=xf(o,i),Sp(Ps(a.firestore,Ef),[new lc(a._key,Ql.none())])),console.log(`\uba54\ubaa8 \uc0ad\uc81c\ub428: ${s}`))},[n,r]);(0,e.useEffect)(()=>{m(a)},[a,m]),(0,e.useEffect)(()=>(f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{g(a,c,h)},500),()=>{f.current&&clearTimeout(f.current)}),[c,a,h,g]);const v=(e=>{const t=e.getFullYear(),n=e.getMonth(),r=new Date(t,n,1).getDay(),i=new Date(t,n+1,0).getDate(),s=[];for(let o=0;o<r;o++)s.push(null);for(let o=1;o<=i;o++)s.push(o);return s})(s);return(0,Dw.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 text-white p-4 sm:p-8 font-inter flex flex-col items-center",children:(0,Dw.jsxs)("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700 max-w-4xl w-full text-center mt-8",children:[(0,Dw.jsxs)("h2",{className:"text-3xl font-bold mb-6 text-purple-400 flex items-center justify-center",children:[(0,Dw.jsx)("svg",{className:"w-8 h-8 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",children:(0,Dw.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"\ub2e4\uc774\uc5b4\ub9ac"]}),(0,Dw.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg mb-6",children:[(0,Dw.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Dw.jsx)("button",{onClick:()=>{o(e=>new Date(e.getFullYear(),e.getMonth()-1,1))},className:"text-blue-400 hover:text-blue-300 font-bold text-xl",children:"<"}),(0,Dw.jsxs)("h3",{className:"text-2xl font-bold text-white",children:[s.getFullYear(),"\ub144 ",s.getMonth()+1,"\uc6d4"]}),(0,Dw.jsx)("button",{onClick:()=>{o(e=>new Date(e.getFullYear(),e.getMonth()+1,1))},className:"text-blue-400 hover:text-blue-300 font-bold text-xl",children:">"})]}),(0,Dw.jsxs)("div",{className:"grid grid-cols-7 gap-2 text-sm",children:[["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"].map(e=>(0,Dw.jsx)("div",{className:"font-bold text-gray-400",children:e},e)),v.map((e,t)=>(0,Dw.jsx)("div",{className:`p-2 rounded-lg cursor-pointer ${null===e?"bg-gray-700":"hover:bg-gray-600"}\n                  ${a.getDate()===e&&a.getMonth()===s.getMonth()&&a.getFullYear()===s.getFullYear()?"bg-blue-600 text-white font-bold":"bg-gray-700"}\n                  ${(new Date).getDate()===e&&(new Date).getMonth()===s.getMonth()&&(new Date).getFullYear()===s.getFullYear()&&a.getDate()!==e?"border-2 border-yellow-400":""}\n                `,onClick:()=>(e=>{e&&l(new Date(s.getFullYear(),s.getMonth(),e))})(e),children:e},t))]})]}),(0,Dw.jsxs)("div",{className:"bg-gray-700 p-4 rounded-lg",children:[(0,Dw.jsxs)("h3",{className:"text-xl font-semibold mb-3 text-green-300",children:[p(a)," \uba54\ubaa8"]}),(0,Dw.jsx)("textarea",{className:"w-full p-3 rounded-lg bg-gray-600 text-white border border-gray-500 focus:ring-2 focus:ring-green-500 focus:border-transparent h-32 resize-none",placeholder:"\uc774 \ub0a0\uc758 \uba54\ubaa8\ub97c \uc791\uc131\ud558\uc138\uc694...",value:c,onChange:e=>u(e.target.value)})]}),(0,Dw.jsx)("button",{onClick:i,className:"mt-8 w-full bg-gradient-to-r from-gray-600 to-gray-700 text-white py-3 rounded-lg font-bold text-lg shadow-md hover:from-gray-700 hover:to-gray-800 transition duration-300 transform hover:scale-105",children:"\ub4a4\ub85c \uac00\uae30"})]})})},Jw=t=>{let{onBack:n,userId:r,db:i}=t;const[s,o]=(0,e.useState)("statistics");return(0,Dw.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 text-white p-4 sm:p-8 font-inter flex flex-col items-center",children:(0,Dw.jsxs)("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700 max-w-4xl w-full text-center mt-8",children:[(0,Dw.jsxs)("h2",{className:"text-3xl font-bold mb-6 text-purple-400 flex items-center justify-center",children:[(0,Dw.jsxs)("svg",{className:"w-8 h-8 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",children:[(0,Dw.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.568.35 1.253.542 1.96.542z"}),(0,Dw.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"\uae30\ud0c0"]}),(0,Dw.jsxs)("div",{className:"flex justify-center mb-6 border-b border-gray-700",children:[(0,Dw.jsx)("button",{onClick:()=>o("statistics"),className:"px-6 py-3 text-lg font-semibold rounded-t-lg transition duration-200 "+("statistics"===s?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-700"),children:"\ud1b5\uacc4"}),(0,Dw.jsx)("button",{onClick:()=>o("ranking"),className:"px-6 py-3 text-lg font-semibold rounded-t-lg transition duration-200 "+("ranking"===s?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-700"),children:"\ub7ad\ud0b9"}),(0,Dw.jsx)("button",{onClick:()=>o("diary"),className:"px-6 py-3 text-lg font-semibold rounded-t-lg transition duration-200 "+("diary"===s?"bg-blue-600 text-white":"text-gray-400 hover:bg-gray-700"),children:"\ub2e4\uc774\uc5b4\ub9ac"})]}),(()=>{switch(s){case"statistics":default:return(0,Dw.jsx)(Qw,{onBack:()=>o("main")});case"ranking":return(0,Dw.jsx)(Yw,{onBack:()=>o("main")});case"diary":return(0,Dw.jsx)(Xw,{userId:r,db:i,onBack:()=>o("main")})}})(),(0,Dw.jsx)("button",{onClick:n,className:"mt-8 w-full bg-gradient-to-r from-gray-600 to-gray-700 text-white py-3 rounded-lg font-bold text-lg shadow-md hover:from-gray-700 hover:to-gray-800 transition duration-300 transform hover:scale-105",children:"\ub4a4\ub85c \uac00\uae30"})]})})};const Zw=function(){const[t,n]=(0,e.useState)(null),[r,i]=(0,e.useState)([]),[s,o]=(0,e.useState)({health:jw,intelligence:10,strength:10,gold:0,level:1,experience:0,inventory:[],equippedItems:{weapon:null,armor:null,head:null},hairId:"none",outfitId:"none",weaponId:"none"}),[a,l]=(0,e.useState)(""),[c,u]=(0,e.useState)("easy"),[h,d]=(0,e.useState)("general"),[f,p]=(0,e.useState)(!0),[m,g]=(0,e.useState)(!1),[v,y]=(0,e.useState)("main");(0,e.useEffect)(()=>{const e=function(e,t,n,r){return D(e).onAuthStateChanged(t,n,r)}(Vw,async e=>{if(e)n(e.uid),console.log("Firebase \uc778\uc99d \uc131\uacf5. User ID:",e.uid);else try{await async function(e){if(He(e.app))return Promise.reject(gt(e));const t=Tn(e);if(await t._initializationPromise,t.currentUser?.isAnonymous)return new nr({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await tr(t,{returnSecureToken:!0}),r=await nr._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(r.user),r}(Vw),console.log("Firebase \uc775\uba85 \ub85c\uadf8\uc778 \uc131\uacf5.")}catch(t){console.error("Firebase \uc778\uc99d \uc624\ub958:",t)}g(!0)});return()=>e()},[]),(0,e.useEffect)(()=>{if(!m||!t)return void console.log("\uc778\uc99d \ub610\ub294 \uc0ac\uc6a9\uc790 ID \uc900\ube44 \uc548 \ub428. \ub370\uc774\ud130 \ub85c\ub4dc \uac74\ub108\ub6f0\uae30.");p(!0),console.log("\uce90\ub9ad\ud130 \ub370\uc774\ud130 \ub85c\ub4dc \uc2dc\uc791...");const e=xf(Lw,`artifacts/${Pw}/users/${t}/character/main`),n=kp(e,t=>{if(t.exists()){const e=t.data();console.log("Firestore\uc5d0\uc11c \uce90\ub9ad\ud130 \ub370\uc774\ud130 \ub85c\ub4dc\ub428:",e),o({...e,hairId:e.hairId||"none",outfitId:e.outfitId||"none",weaponId:e.weaponId||"none",inventory:e.inventory||[],equippedItems:e.equippedItems||{weapon:null,armor:null,head:null}})}else{console.log("Firestore\uc5d0 \uce90\ub9ad\ud130 \ub370\uc774\ud130 \uc5c6\uc74c. \ucd08\uae30\uac12\uc73c\ub85c \uc124\uc815.");const t=[],n=Fw.find(e=>"item_1"===e.id);n&&t.push({...n,uniqueId:Date.now()+Math.random()}),wp(e,{health:jw,intelligence:10,strength:10,gold:0,level:1,experience:0,inventory:t,equippedItems:{weapon:null,armor:null,head:null},hairId:"none",outfitId:"none",weaponId:"none"}).then(()=>{o({health:jw,intelligence:10,strength:10,gold:0,level:1,experience:0,inventory:t,equippedItems:{weapon:null,armor:null,head:null},hairId:"none",outfitId:"none",weaponId:"none"}),console.log("\uce90\ub9ad\ud130 \ub370\uc774\ud130 \ucd08\uae30\ud654 \uc644\ub8cc (\ub0a1\uc740 \uac80 \uc9c0\uae09).")}).catch(e=>console.error("\uce90\ub9ad\ud130 \ucd08\uae30\ud654 \uc624\ub958:",e))}p(!1)},e=>{console.error("\uce90\ub9ad\ud130 \ub370\uc774\ud130 \ub85c\ub4dc \uc624\ub958:",e),p(!1)}),r=kp(wf(Lw,`artifacts/${Pw}/users/${t}/tasks`),e=>{const t=e.docs.map(e=>({id:e.id,...e.data()}));i(t)},e=>{console.error("\uc791\uc5c5 \ub370\uc774\ud130 \ub85c\ub4dc \uc624\ub958:",e)});return()=>{n(),r()}},[t,m]);const _=async()=>{if(a.trim()&&t)try{const e=wf(Lw,`artifacts/${Pw}/users/${t}/tasks`);await Tp(e,{name:a,difficulty:c,type:h,completed:!1,createdAt:new Date}),l(""),u("easy"),d("general"),console.log("\uc791\uc5c5\uc774 \uc131\uacf5\uc801\uc73c\ub85c \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(e){console.error("\uc791\uc5c5 \ucd94\uac00 \uc624\ub958:",e)}else console.log("\uc791\uc5c5 \uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.")},b=async(e,n)=>{if(t)try{const r=xf(Lw,`artifacts/${Pw}/users/${t}/character/main`);await xp(r,{[e]:n}),o(t=>({...t,[e]:n})),console.log(`\uc544\ubc14\ud0c0 \ud30c\uce20 ${e}\uc744(\ub97c) ${n}\ub85c \ubcc0\uacbd\ud588\uc2b5\ub2c8\ub2e4.`)}catch(r){console.error("\uc544\ubc14\ud0c0 \ud30c\uce20 \ubcc0\uacbd \uc624\ub958:",r)}},w=async e=>{var n;if(!t)return;const r=xf(Lw,`artifacts/${Pw}/users/${t}/character/main`);(null===(n=s.equippedItems[e.type])||void 0===n?void 0:n.uniqueId)===e.uniqueId&&o(t=>({...t,equippedItems:{...t.equippedItems,[e.type]:null}}));const i=s.inventory.filter(t=>t.uniqueId!==e.uniqueId),a=s.gold+e.value;try{var l;await xp(r,{inventory:i,gold:a,equippedItems:(null===(l=s.equippedItems[e.type])||void 0===l?void 0:l.uniqueId)===e.uniqueId?{...s.equippedItems,[e.type]:null}:s.equippedItems}),o(t=>{var n;return{...t,inventory:i,gold:a,equippedItems:(null===(n=s.equippedItems[e.type])||void 0===n?void 0:n.uniqueId)===e.uniqueId?{...t.equippedItems,[e.type]:null}:t.equippedItems}}),console.log(`${e.name}\uc744(\ub97c) ${e.value} \uace8\ub4dc\uc5d0 \ud310\ub9e4\ud588\uc2b5\ub2c8\ub2e4. \uc5c5\ub370\uc774\ud2b8\ub41c \uc778\ubca4\ud1a0\ub9ac:`,i)}catch(c){console.error("\uc544\uc774\ud15c \ud310\ub9e4 \uc624\ub958:",c)}},x=async e=>{if(!t||!e.type||!["weapon","armor","head"].includes(e.type))return void console.log("\uc7a5\ucc29\ud560 \uc218 \uc5c6\ub294 \uc544\uc774\ud15c\uc785\ub2c8\ub2e4.");const n=xf(Lw,`artifacts/${Pw}/users/${t}/character/main`);let r={...s},i={...r.equippedItems};const a=i[e.type];a&&a.uniqueId!==e.uniqueId&&(r.inventory.push(a),console.log(`${a.name}\uc744(\ub97c) \uc7a5\ucc29 \ud574\uc81c\ud558\uace0 \uc778\ubca4\ud1a0\ub9ac\ub85c \ub3cc\ub824\ub193\uc558\uc2b5\ub2c8\ub2e4.`)),i[e.type]=e,r.equippedItems=i;try{await xp(n,r),o(r),console.log(`${e.name}\uc744(\ub97c) \uc7a5\ucc29\ud588\uc2b5\ub2c8\ub2e4. \uc5c5\ub370\uc774\ud2b8\ub41c \uce90\ub9ad\ud130:`,r)}catch(l){console.error("\uc544\uc774\ud15c \uc7a5\ucc29 \uc624\ub958:",l)}},T=async e=>{if(!t||!e.type||!["weapon","armor","head"].includes(e.type))return void console.log("\uc7a5\ucc29 \ud574\uc81c\ud560 \uc218 \uc5c6\ub294 \uc544\uc774\ud15c\uc785\ub2c8\ub2e4.");const n=xf(Lw,`artifacts/${Pw}/users/${t}/character/main`);let r={...s},i={...r.equippedItems};if(i[e.type]&&i[e.type].uniqueId===e.uniqueId){i[e.type]=null,r.equippedItems=i;try{await xp(n,r),o(r),console.log(`${e.name}\uc744(\ub97c) \uc7a5\ucc29 \ud574\uc81c\ud588\uc2b5\ub2c8\ub2e4. \uc5c5\ub370\uc774\ud2b8\ub41c \uce90\ub9ad\ud130:`,r)}catch(a){console.error("\uc544\uc774\ud15c \uc7a5\ucc29 \ud574\uc81c \uc624\ub958:",a)}}else console.log("\ud574\ub2f9 \uc2ac\ub86f\uc5d0 \uc7a5\ucc29\ub41c \uc544\uc774\ud15c\uc774 \uc544\ub2c8\uac70\ub098 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.")},k=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!t)return;const r=xf(Lw,`artifacts/${Pw}/users/${t}/character/main`),i=e.value*n;if(s.gold<i)return void console.log("\uace8\ub4dc\uac00 \ubd80\uc871\ud569\ub2c8\ub2e4!");let a={...s};a.gold-=i;for(let t=0;t<n;t++){const n={...e,uniqueId:Date.now()+Math.random()+t};a.inventory.push(n)}try{await xp(r,a),o(a),console.log(`${e.name} ${n}\uac1c\ub97c \uad6c\ub9e4\ud588\uc2b5\ub2c8\ub2e4. \ub0a8\uc740 \uace8\ub4dc: ${a.gold}`)}catch(l){console.error("\uc544\uc774\ud15c \uad6c\ub9e4 \uc624\ub958:",l)}},{maxHealth:S,maxMana:C,attack:E,defense:A}=(e=>{let{health:t,intelligence:n,strength:r,level:i}=e,s=0,o=0,a=0,l=0;if(e.equippedItems)for(const c in e.equippedItems){const t=e.equippedItems[c];t&&t.stats&&(s+=t.stats.health||0,o+=t.stats.intelligence||0,a+=t.stats.strength||0,l+=t.stats.defense||0)}return t+=s,n+=o,r+=a,{maxHealth:jw+2*t+10*i,maxMana:5*n+5*i,attack:1.5*r+2*i,defense:.8*t+1*i+l}})(s),I=100*s.level;if(f)return(0,Dw.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-900 text-white",children:(0,Dw.jsx)("div",{className:"text-lg font-semibold",children:"\ub85c\ub529 \uc911..."})});const N=()=>{var e,n,o,f,p,m;return(0,Dw.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-gray-800 text-white p-4 sm:p-8 font-inter flex flex-col pb-20",children:[" ",(0,Dw.jsxs)("div",{className:"flex justify-end text-sm text-gray-400 mb-4",children:["\uc0ac\uc6a9\uc790 ID: ",(0,Dw.jsx)("span",{className:"font-mono ml-2",children:t||"\ub85c\uadf8\uc778 \uc911..."})]}),(0,Dw.jsxs)("h1",{className:"text-4xl sm:text-5xl font-bold text-center mb-10 text-yellow-400 drop-shadow-lg",children:[(0,Dw.jsx)("span",{className:"block mb-2",children:"ToDoQuest"}),(0,Dw.jsx)("span",{className:"text-xl sm:text-2xl font-normal text-gray-300",children:"RPG \uc77c\uc815 \uad00\ub9ac"})]}),(0,Dw.jsxs)("div",{className:"max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 flex-grow",children:[" ",(0,Dw.jsxs)("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700",children:[(0,Dw.jsxs)("h2",{className:"text-2xl font-semibold mb-4 text-purple-400 flex items-center",children:[(0,Dw.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",children:(0,Dw.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"\ub0b4 \uce90\ub9ad\ud130"]}),(0,Dw.jsx)("button",{onClick:()=>y("avatarCustomization"),className:"flex justify-center mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full mx-auto",children:(0,Dw.jsx)("div",{className:"w-24 h-24 flex items-center justify-center border-4 border-gray-600 overflow-hidden",children:(0,Dw.jsx)(Bw,{hairId:s.hairId,outfitId:s.outfitId,weaponId:s.weaponId})})}),(0,Dw.jsxs)("div",{className:"space-y-3",children:[(0,Dw.jsxs)("div",{className:"flex items-center",children:[(0,Dw.jsx)("span",{className:"text-gray-400 w-24",children:"\ub808\ubca8:"}),(0,Dw.jsx)("span",{className:"font-bold text-lg text-green-400",children:s.level})]}),(0,Dw.jsxs)("div",{className:"flex items-center",children:[(0,Dw.jsx)("span",{className:"text-gray-400 w-24",children:"\uacbd\ud5d8\uce58:"}),(0,Dw.jsxs)("span",{className:"font-bold text-lg text-yellow-300",children:[s.experience," / ",I]})]}),(0,Dw.jsxs)("div",{className:"flex items-center",children:[(0,Dw.jsx)("span",{className:"text-gray-400 w-24",children:"\uccb4\ub825:"}),(0,Dw.jsxs)("span",{className:"font-bold text-lg text-red-400",children:[s.health," / ",S]})]}),(0,Dw.jsxs)("div",{className:"flex items-center",children:[(0,Dw.jsx)("span",{className:"text-gray-400 w-24",children:"\uc9c0\ub2a5:"}),(0,Dw.jsx)("span",{className:"font-bold text-lg text-blue-400",children:s.intelligence})]}),(0,Dw.jsxs)("div",{className:"flex items-center",children:[(0,Dw.jsx)("span",{className:"text-gray-400 w-24",children:"\ud798:"}),(0,Dw.jsx)("span",{className:"font-bold text-lg text-orange-400",children:s.strength})]}),(0,Dw.jsxs)("div",{className:"flex items-center",children:[(0,Dw.jsx)("span",{className:"text-gray-400 w-24",children:"\uacf5\uaca9\ub825:"}),(0,Dw.jsx)("span",{className:"font-bold text-lg text-red-500",children:E.toFixed(0)})]}),(0,Dw.jsxs)("div",{className:"flex items-center",children:[(0,Dw.jsx)("span",{className:"text-gray-400 w-24",children:"\ubc29\uc5b4\ub825:"}),(0,Dw.jsx)("span",{className:"font-bold text-lg text-blue-500",children:A.toFixed(0)})]}),(0,Dw.jsxs)("div",{className:"flex items-center",children:[(0,Dw.jsx)("span",{className:"text-gray-400 w-24",children:"\uace8\ub4dc:"}),(0,Dw.jsxs)("span",{className:"font-bold text-lg text-yellow-500 flex items-center",children:[(0,Dw.jsx)("svg",{className:"w-5 h-5 mr-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",children:(0,Dw.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z",clipRule:"evenodd"})}),s.gold]})]}),(0,Dw.jsxs)("div",{className:"mt-4 pt-4 border-t border-gray-700",children:[(0,Dw.jsx)("h3",{className:"text-lg font-semibold text-gray-300 mb-2",children:"\uc7a5\ucc29 \uc544\uc774\ud15c"}),(0,Dw.jsxs)("ul",{className:"text-sm text-gray-400 space-y-1",children:[(0,Dw.jsxs)("li",{children:["\ubb34\uae30: ",(null===(e=s.equippedItems)||void 0===e||null===(n=e.weapon)||void 0===n?void 0:n.name)||"\uc5c6\uc74c"]}),(0,Dw.jsxs)("li",{children:["\ubc29\uc5b4\uad6c: ",(null===(o=s.equippedItems)||void 0===o||null===(f=o.armor)||void 0===f?void 0:f.name)||"\uc5c6\uc74c"]}),(0,Dw.jsxs)("li",{children:["\uba38\ub9ac: ",(null===(p=s.equippedItems)||void 0===p||null===(m=p.head)||void 0===m?void 0:m.name)||"\uc5c6\uc74c"]})]})]})]})]}),(0,Dw.jsxs)("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700",children:[(0,Dw.jsxs)("h2",{className:"text-2xl font-semibold mb-4 text-cyan-400 flex items-center",children:[(0,Dw.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",children:(0,Dw.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),"\uc0c8\ub85c\uc6b4 \ud018\uc2a4\ud2b8 \ucd94\uac00"]}),(0,Dw.jsxs)("div",{className:"space-y-4",children:[(0,Dw.jsx)("input",{type:"text",placeholder:"\ud018\uc2a4\ud2b8 \uc774\ub984",className:"w-full p-3 rounded-lg bg-gray-700 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:a,onChange:e=>l(e.target.value)}),(0,Dw.jsxs)("select",{className:"w-full p-3 rounded-lg bg-gray-700 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:c,onChange:e=>u(e.target.value),children:[(0,Dw.jsx)("option",{value:"easy",children:"\ub09c\uc774\ub3c4: \uc26c\uc6c0"}),(0,Dw.jsx)("option",{value:"medium",children:"\ub09c\uc774\ub3c4: \ubcf4\ud1b5"}),(0,Dw.jsx)("option",{value:"hard",children:"\ub09c\uc774\ub3c4: \uc5b4\ub824\uc6c0"})]}),(0,Dw.jsxs)("select",{className:"w-full p-3 rounded-lg bg-gray-700 text-white border border-gray-600 focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:h,onChange:e=>d(e.target.value),children:[(0,Dw.jsx)("option",{value:"general",children:"\uc720\ud615: \uc77c\ubc18"}),(0,Dw.jsx)("option",{value:"physical",children:"\uc720\ud615: \uc6b4\ub3d9 (\ud798/\uccb4\ub825)"}),(0,Dw.jsx)("option",{value:"mental",children:"\uc720\ud615: \uacf5\ubd80 (\uc9c0\ub2a5/\uccb4\ub825)"}),(0,Dw.jsx)("option",{value:"production",children:"\uc720\ud615: \uc0dd\uc0b0 (\uc9c0\ub2a5/\ud798/\uace8\ub4dc)"})]}),(0,Dw.jsx)("button",{onClick:_,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-bold text-lg shadow-md hover:from-blue-700 hover:to-purple-700 transition duration-300 transform hover:scale-105",children:"\ud018\uc2a4\ud2b8 \uc0dd\uc131"})]})]})]}),(0,Dw.jsxs)("div",{className:"bg-gray-800 p-6 rounded-2xl shadow-xl border border-gray-700 mt-8 max-w-6xl mx-auto w-full",children:[(0,Dw.jsxs)("h2",{className:"text-2xl font-semibold mb-4 text-lime-400 flex items-center",children:[(0,Dw.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",children:(0,Dw.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),"\ub098\uc758 \ud018\uc2a4\ud2b8 \ubaa9\ub85d"]}),0===r.length?(0,Dw.jsx)("p",{className:"text-gray-400 text-center py-4",children:"\uc544\uc9c1 \ud018\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4. \uc0c8\ub85c\uc6b4 \ud018\uc2a4\ud2b8\ub97c \ucd94\uac00\ud574\ubcf4\uc138\uc694!"}):(0,Dw.jsx)("ul",{className:"space-y-3",children:r.map(e=>(0,Dw.jsxs)("li",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between bg-gray-700 p-4 rounded-lg shadow-sm border border-gray-600",children:[(0,Dw.jsxs)("div",{className:"mb-2 sm:mb-0",children:[(0,Dw.jsx)("p",{className:"text-lg font-medium text-white",children:e.name}),(0,Dw.jsxs)("p",{className:"text-sm text-gray-400",children:["\ub09c\uc774\ub3c4: ",(0,Dw.jsx)("span",{className:"font-semibold "+("easy"===e.difficulty?"text-green-300":"medium"===e.difficulty?"text-yellow-300":"text-red-300"),children:"easy"===e.difficulty?"\uc26c\uc6c0":"medium"===e.difficulty?"\ubcf4\ud1b5":"\uc5b4\ub824\uc6c0"}),(0,Dw.jsxs)("span",{className:"ml-4",children:["\uc720\ud615: ","physical"===e.type?"\uc6b4\ub3d9":"mental"===e.type?"\uacf5\ubd80":"production"===e.type?"\uc0dd\uc0b0":"\uc77c\ubc18"]})]})]}),(0,Dw.jsx)("button",{onClick:()=>(async(e,n,r)=>{if(t)try{const o=xf(Lw,`artifacts/${Pw}/users/${t}/tasks`,e),a=xf(Lw,`artifacts/${Pw}/users/${t}/character/main`);await wp(o,{completed:!0},{merge:!0});let l=0,c=0,u=0;switch(n){case"easy":l=3,c=10,u=20;break;case"medium":l=7,c=25,u=50;break;case"hard":l=15,c=100,u=100}let h={...s};switch(r){case"physical":h.strength+=l,h.health+=Math.floor(l/2);break;case"mental":h.intelligence+=l,h.health+=Math.floor(l/2);break;case"production":h.intelligence+=Math.floor(l/2),h.strength+=Math.floor(l/2),h.gold+=c;break;default:h.health+=l,h.intelligence+=l,h.strength+=l}h.gold+=c,h.experience+=u;const d=100*s.level;if(h.experience>=d&&(h.level+=1,h.experience-=d,h.health+=5,h.intelligence+=5,h.strength+=5,console.log(`\ub808\ubca8\uc5c5! \ud604\uc7ac \ub808\ubca8: ${h.level}`)),Math.random()<.2){const e=Math.floor(Math.random()*Fw.length),t={...Fw[e],uniqueId:Date.now()+Math.random()};h.inventory=[...h.inventory||[],t],console.log(`\uc0c8\ub85c\uc6b4 \uc544\uc774\ud15c \ud68d\ub4dd: ${t.name}`)}await wp(a,h,{merge:!0}),console.log("\uce90\ub9ad\ud130 \ub370\uc774\ud130 \uc5c5\ub370\uc774\ud2b8 \uc644\ub8cc (\ud018\uc2a4\ud2b8 \uc644\ub8cc).",h),i(t=>t.filter(t=>t.id!==e))}catch(o){console.error("\uc791\uc5c5 \uc644\ub8cc \uc624\ub958:",o)}})(e.id,e.difficulty,e.type),className:"bg-gradient-to-r from-green-500 to-teal-500 text-white px-4 py-2 rounded-lg font-bold shadow-md hover:from-green-600 hover:to-teal-600 transition duration-300 transform hover:scale-105",children:"\ud018\uc2a4\ud2b8 \uc644\ub8cc"})]},e.id))})]}),(0,Dw.jsxs)("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-800 border-t border-gray-700 p-4 flex justify-around items-center shadow-lg z-10",children:[(0,Dw.jsxs)("button",{onClick:()=>y("items"),className:"flex flex-col items-center text-gray-300 hover:text-blue-400 transition duration-200 focus:outline-none",children:[(0,Dw.jsx)("svg",{className:"w-6 h-6 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",children:(0,Dw.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10m-4-2h8m-4 2v4"})}),(0,Dw.jsx)("span",{className:"text-xs",children:"\uc544\uc774\ud15c"})]}),(0,Dw.jsxs)("button",{onClick:()=>y("shop"),className:"flex flex-col items-center text-gray-300 hover:text-yellow-400 transition duration-200 focus:outline-none",children:[(0,Dw.jsx)("svg",{className:"w-6 h-6 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",children:(0,Dw.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),(0,Dw.jsx)("span",{className:"text-xs",children:"\uc0c1\uc810\uac00"})]}),(0,Dw.jsxs)("button",{onClick:()=>y("guild"),className:"flex flex-col items-center text-gray-300 hover:text-pink-400 transition duration-200 focus:outline-none",children:[(0,Dw.jsx)("svg",{className:"w-6 h-6 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",children:(0,Dw.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 20h2a2 2 0 002-2V7a2 2 0 00-2-2h-2m-4 14v-2m4 2v-2m-10 2H4A2 2 0 012 18V7a2 2 0 012-2h2m4 14V7m0 10h4m-4 4H9.5M4 7h16M7 7h10"})}),(0,Dw.jsx)("span",{className:"text-xs",children:"\uae38\ub4dc"})]}),(0,Dw.jsxs)("button",{onClick:()=>y("adventure"),className:"flex flex-col items-center text-gray-300 hover:text-green-400 transition duration-200 focus:outline-none",children:[(0,Dw.jsx)("svg",{className:"w-6 h-6 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",children:(0,Dw.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.747 0-3.332.477-4.5 1.253"})}),(0,Dw.jsx)("span",{className:"text-xs",children:"\ubaa8\ud5d8 \uc2dc\uc791"})]}),(0,Dw.jsxs)("button",{onClick:()=>y("other"),className:"flex flex-col items-center text-gray-300 hover:text-purple-400 transition duration-200 focus:outline-none",children:[(0,Dw.jsxs)("svg",{className:"w-6 h-6 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"[http://www.w3.org/2000/svg](http://www.w3.org/2000/svg)",children:[(0,Dw.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.568.35 1.253.542 1.96.542z"}),(0,Dw.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,Dw.jsx)("span",{className:"text-xs",children:"\uae30\ud0c0"})]})]})]})};switch(v){case"main":default:return N();case"avatarCustomization":return(0,Dw.jsx)($w,{character:s,updateCharacterPart:b,onClose:()=>y("main")});case"items":return(0,Dw.jsx)(Hw,{character:s,onBack:()=>y("main"),sellItem:w,equipItem:x,unequipItem:T});case"shop":return(0,Dw.jsx)(Ww,{character:s,onBack:()=>y("main"),buyItem:k});case"guild":return(0,Dw.jsx)(Gw,{onBack:()=>y("main")});case"adventure":return(0,Dw.jsx)(Kw,{onBack:()=>y("main")});case"other":return(0,Dw.jsx)(Jw,{onBack:()=>y("main"),userId:t,db:Lw})}},ex=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)})};t.createRoot(document.getElementById("root")).render((0,Dw.jsx)(e.StrictMode,{children:(0,Dw.jsx)(Zw,{})})),ex()})()})();
//# sourceMappingURL=main.5b306c50.js.map